var c=function(e,t,o,r,n,i,a,l,s){"use strict";e="default"in e?e["default"]:e,t="default"in t?t["default"]:t,o="default"in o?o["default"]:o,r="default"in r?r["default"]:r,n="default"in n?n["default"]:n,i="default"in i?i["default"]:i,a="default"in a?a["default"]:a,l="default"in l?l["default"]:l,s="default"in s?s["default"]:s;var c={},d=function(e){return window.location.hash===e},u=function(e){var t=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),o=new RegExp("[\\?&]"+t+"=([^&#]*)"),r=o.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?e:t},f=function(){r.locale("en",{months:"January_Feburary_Mar√ßh_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"jan_feb_mar_apr_may_jun_jul_aug_sep_oct_nov_dec".split("_")})},w=function(e){return null!=e},b=function(e,t){return t=t||"DD/MM/YYYY",e?r(e).locale("en").format(t):"no date"},g=function(e,t){if(!sessionStorage.getItem(e))return sessionStorage.setItem(e,String(t))},h=function(e,t){return sessionStorage.setItem(e,JSON.stringify(t))},v=function(e){return sessionStorage.getItem(e)?JSON.parse(String(sessionStorage.getItem(e))):null},y=function(e){var t=sessionStorage.getItem(e);return t?(sessionStorage.removeItem(e),t):null},k=function(t,o){var r=document,n=r.createElement("script");return window.disqus_config=function(){this.page.url=t,this.page.identifier=o},n.src="//catarseflex.disqus.com/embed.js",n.setAttribute("data-timestamp",String(+new Date)),(r.head||r.body).appendChild(n),e("")},x=function(e){var t=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return t.test(e)},j=function(e){var t=void 0,o=void 0,r=void 0,n=void 0,i=void 0,a=void 0,l=e.replace(/[^\d]+/g,"");if(""==l)return!1;if(14!=l.length)return!1;if("00000000000000"==l||"11111111111111"==l||"22222222222222"==l||"33333333333333"==l||"44444444444444"==l||"55555555555555"==l||"66666666666666"==l||"77777777777777"==l||"88888888888888"==l||"99999999999999"==l)return!1;t=l.length-2,o=l.substring(0,t),r=l.substring(t),n=0,i=t-7;for(var s=t;s>=1;s--)n+=Number(o.charAt(t-s))*i--,i<2&&(i=9);if(a=n%11<2?0:11-n%11,String(a)!=r.charAt(0))return!1;t+=1,o=l.substring(0,t),n=0,i=t-7;for(var c=t;c>=1;c--)n+=Number(o.charAt(t-c))*i--,i<2&&(i=9);return a=n%11<2?0:11-n%11,String(a)==r.charAt(1)},z=function(e){var t=0,o=void 0;if("00000000000"==e)return!1;for(var r=1;r<=9;r++)t+=parseInt(e.substring(r-1,r))*(11-r);if(o=10*t%11,10!=o&&11!=o||(o=0),o!=parseInt(e.substring(9,10)))return!1;t=0;for(var n=1;n<=10;n++)t+=parseInt(e.substring(n-1,n))*(12-n);return o=10*t%11,10!=o&&11!=o||(o=0),o==parseInt(e.substring(10,11))},C=e.prop([]),S=function(){return C([])},P=function(){e.prop([]);return{submit:function(e,t){return function(){return S(),o.map(e,function(e){"email"===e.rule&&(x(e.prop())||C().push({field:e.prop,message:"Invalid E-mail."})),"text"===e.rule&&""===e.prop().trim()&&C().push({field:e.prop,message:"The field can not be empty."})}),!C().length>0&&t()}},hasError:function(e){return o.reduce(C(),function(t,o){return o.field()===e()||t},!1)}}},T=function(e,t){var o=r(e,t||"DD/MM/YYYY");return o.isValid()?o:r(e)},M={days:"days",minutes:"minutes",hours:"hours",seconds:"seconds"},A=function oa(e){var oa=M,t=function(){var t=oa[e.unit||"seconds"];return Number(e.total)<=1?t.slice(0,-1):t};return{unit:t(),total:e.total}},E=function(e,t){return function(r,n,i){if(!o.isNumber(r))return null;var a="\\d(?=(\\d{"+(i||3)+"})+"+(n>0?"\\D":"$")+")",l=r.toFixed(Math.max(0,~~n));return(t?l.replace(".",t):l).replace(new RegExp(a,"g"),"$&"+(e||","))}},D=E(".",","),R=function(t,o){var r=e.prop(t);return r.toggle=function(){return r(r()===o?t:o)},r},N=i.filtersVM({id:"eq"}),F=function(){if(c.currentProject)return c.currentProject;var e=document.getElementById("application"),t=e&&e.getAttribute("data-parameters");return t?c.currentProject=JSON.parse(t):null},I=function(){if(c.rdToken)return c.rdToken;var e=o.first(document.querySelectorAll("[name=rd-token]"));return e?c.rdToken=e.getAttribute("content"):null},q=function(){if(c.similityCustomer)return c.similityCustomer;var e=o.first(document.querySelectorAll("[name=simility-customer]"));return e?c.similityCustomer=e.getAttribute("content"):null},O=function(){if(c.mailchumUrl)return c.mailchumUrl;var e=o.first(document.querySelectorAll("[name=mailchimp-url]"));return e?c.mailchumUrl=e.getAttribute("content"):null},V=function(){if(c.user)return c.user;var e=document.getElementsByTagName("body"),t=o.first(e).getAttribute("data-user");return t?c.user=JSON.parse(t):null},L=function(){var e=V();return null==e||null==e.user_id?null:e.user_id},B=function(){return!o.isNull(L())},U=function(){if(c.apiHost)return c.apiHost;var e=document.getElementById("api-host");return c.apiHost=e&&e.getAttribute("content")},Y=function(e){var t=window.location.pathname.split("/").slice(-1)[0];return e===t},W=function(e){return e||"/assets/catarse_bootstrap/user.jpg"},H=function(){return e(".u-text-center.u-margintop-30 u-marginbottom-30",[e('img[alt="Loader"][src="https://s3.amazonaws.com/catarse.files/loader.gif"]')])},J=function(){return e("span.badge.badge-success.margin-side-5",t.t("projects.new_feature_badge"))},X=function(){var e=function(){try{window.FB.XFBML.parse()}catch(e){console.log(e)}};return window.setTimeout(e,500)},K=function(e,t,o){return e>1?e+o:e+t},G=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=e.replace(/\r\n?/,"\n"),e.length>0&&(e=e.replace(/\n\n+/g,"</p><p>"),e=e.replace(/\n/g,"<br />"),e="<p>"+e+"</p>"),e},Z=function(e){return e.maximum_contributions>0&&e.paid_count+e.waiting_payment_count>=e.maximum_contributions},ee=function(e){return e.maximum_contributions-(e.paid_count+e.waiting_payment_count)},te=function(e){var t=document.createElement("a");return t.href=e,t},oe=function(){return function(e,t){!t&&window.$&&window.UIHelper.setupResponsiveIframes(n(e))}},re=function(){return function(e,t){if(!t){var o=window.location.hash.substr(1);o===e.id&&(window.location.hash="",setTimeout(function(){window.location.hash=e.id}))}}},ne=function(){return window.location.href="/en/login",!1},ie=function(e){return window.location.href=e,!1},ae=function(e){var t=0,o=0;do t+=e.offsetTop||0,o+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:o}},le=function(){var e=function(e,t){for(var r=document.getElementsByClassName(t),n=e.parentNode;n&&!o.contains(r,n);)n=n.parentNode;return n&&(n.style.display="none"),n},t=document.getElementById("modal-close");o.isElement(t)&&(t.onclick=function(o){o.preventDefault(),e(t,"modal-backdrop")});var r=document.getElementsByClassName("modal-close");o.map(r,function(t){o.isElement(t)&&(t.onclick=function(o){o.preventDefault(),e(t,"modal-backdrop")})})},se=function(){var e=document.getElementsByClassName("icon-close")[0];o.isElement(e)&&(e.onclick=function(t){t.preventDefault(),e.parentElement&&e.parentElement.remove()})},ce=function(e,t){return t=t||{},o.extend({},t,{scope:e})},de=function(t){var r=o.isFunction(t)?function(){t(),e.redraw()}:e.redraw;window.addEventListener("hashchange",r,!1)},ue=function(){var e=o.first(document.querySelectorAll("[name=csrf-token]"));return e?e.getAttribute("content"):null},me=function(){var e=o.first(document.querySelectorAll("[name=csrf-param]"));return e?e.getAttribute("content"):null},pe=function(e){var t=window.scrollY,o=ae(e).top,r=300,n=(o-t)/r,i=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},a=setInterval(function(){var e=i(t/o)*t;window.scrollTo(0,e),t>=o&&clearInterval(a),t+=n},1)},fe=function(){return window.scrollTo(0,0)},we=function(){var e=function(e,t){e.onclick=function(){var e=document.getElementById(t);return o.isElement(e)&&pe(e),!1}};return function(t,o){o||e(t,t.hash.slice(1))}},be=function(e){var t={online:{cssClass:"text-success",text:"ONLINE"},successful:{cssClass:"text-success",text:"FINANCED"},failed:{cssClass:"text-error",text:"NOT FINANCED"},waiting_funds:{cssClass:"text-waiting",text:"WAITING FOR"},rejected:{cssClass:"text-error",text:"REFUSED"},draft:{cssClass:"",text:"DRAFT"},in_analysis:{cssClass:"",text:"IN ANALYSIS"},approved:{cssClass:"text-success",text:"APPROVED"}};return t[e]},ge=function(e){return function(t,o){if(!o){var r=document.createElement("script");return r.type="text/javascript",r.id="RDIntegration",document.getElementById(r.id)||(document.body.appendChild(r),r.onload=function(){return window.RdIntegration.integrate(I(),e)},r.src="https://d335luupugsy2.cloudfront.net/js/integration/stable/rd-js-integration.min.js"),!1}}},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function.prototype;return e?function(){try{e.project||(e.project=F()),e.user||(e.user=V()),a.event(e)}catch(o){console.error("[h.analyticsEvent] error:",o)}t()}:t},_e={},ve=function(e,t){if(!e)return t;var r=o.compact([e.cat,e.act]).join("_");if(!r)throw new Error("Should inform cat or act");return function(){if(!_e[r]){_e[r]=!0;var o=he(e,t);o()}}},ye=function(e){return parseFloat(e().replace(".","").replace(",","."))},ke=function(e){var t=String(e).replace(/[^0-9]|[.,]/g,""),o=t.slice(0,t.length-2),r=t.slice(t.length-2);return o=o.replace(/\B(?=(\d{3})+(?!\d))/g,"."),o+","+r},xe=function(e){return e.replace(/[0-9]/g,"")},je=function(e){return e.replace(/[^0-9]/g,"")},ze=function(e,t){return function(o){return function(r){return r.length===e&&o!==t?r+t:r}}},Ce=function(e){return function(t){return o.compact(o.map(t,function(t,o){return t in e?null:[o,t]}))}},Se=function ra(e){return function(t){return function(o,r){if(o>=t.length)return!1;var n=t.charAt(o);return n in e?e[n].test(r):r===n||ra(e)(t)(o+1,r)}}},Pe=function(e){var t=o.map(e,function(e){return ze(e[0],e[1])});return function(e,r){var n=o.map(t,function(e){return e(r)}),i=o.reduce(n,function(e,t){return o.isFunction(e)?o.compose(t,e):t});return i(e)}},Te=function(e,t){var r={9:/\d/,A:/[a-zA-Z]/},n=Ce(r),i=Se(r),a=Pe(n(e)),l=i(e);return o.reduce(t,function(e,t){return l(e.length,t)&&(e=a(e,t)+t),e},"")},Me=function(e){return sessionStorage.removeItem(e)},Ae=e.prop(),Ee=function(e){Ae(e)},De=function(){return Ae},Re=e.prop(),Ne=function(e){Re(e)},Fe=function(){return Re},Ie=function(e,t){return"/"+e+(t?"?ref="+t:"")},qe=function(e){e&&!function(){var t=!1;window.addEventListener("scroll",function(o){if(!t&&window.$&&n(document).scrollTop()>.75*n(window).height()){t=!0;var r=he(e);r()}})}()},Oe={event:he,oneTimeEvent:ve,windowScroll:qe},Ve=function(e){var t=void 0;return t="function"==typeof e?e().permalink:e.permalink,"http://www.myjvn.com/"+t},Le=function(){var e=window.location.pathname;return"/en"==e||"/"==e},Be=function(){var e=window.location.pathname,t=e.indexOf("/insights")>-1,o=e.indexOf("/edit")>-1,r=e.indexOf("/contribution")>-1;return!o&&!t&&!r},Ue=function(e){return function(t,o){var r=document.getElementsByTagName("title")[0],n=r.innerText;if(n!==e)return r.innerText=e}},Ye=function(){var e=sessionStorage.getItem("reminder");e&&Le()&&(window.location.href="/projects/"+e)},We=function(){if(c.rootUrl)return c.rootUrl;var e=o.first(document.querySelectorAll("[name=root-url]"));return e?c.rootUrl=e.getAttribute("content"):null},He=function(e){return{source:!1,formatting:["p"],formattingAdd:[{tag:"blockquote",title:"To quote","class":"fontsize-base quote",clear:!0},{tag:"p",title:"Header 1","class":"fontsize-larger fontweight-semibold",clear:!0},{tag:"p",title:"Header 2","class":"fontsize-large",clear:!0}],lang:"en",maxHeight:800,minHeight:300,convertVideoLinks:!0,convertUrlLinks:!0,convertImageLinks:!1,plugins:["video"],imageUpload:"/redactor_rails/pictures?"+e,imageGetJson:"/redactor_rails/pictures",path:"/assets/redactor-rails",css:"style.css"}},Je=function(e){return function(t,o){o||!function(){var o=window.$(t),r=ue(),n=me(),i="";n&&r&&(i=n+"="+encodeURIComponent(r)),o.redactor(He(i)),o.redactor("code.set",e()),window.$(".redactor-editor").on("blur",function(){return e(o.redactor("code.get"))})}()}},Xe=function(t,o){return e("textarea.input_field.redactor.w-input.text-field.bottom.jumbo.positive",{name:t,config:Je(o)})},Ke=function(e){ue()&&e.setRequestHeader("X-CSRF-Token",ue())};f(),se(),le(),Ye();var Ge={authenticityParam:me,authenticityToken:ue,buildLink:Ie,cumulativeOffset:ae,discuss:k,existy:w,validateEmail:x,validateCpf:z,validateCnpj:j,momentify:b,momentFromString:T,formatNumber:D,idVM:N,getUser:V,getUserID:L,getSimilityCustomer:q,getApiHost:U,getMailchimpUrl:O,getCurrentProject:F,toggleProp:R,loader:H,newFeatureBadge:J,fbParse:X,pluralize:K,simpleFormat:Q,translatedTime:A,rewardSouldOut:Z,rewardRemaning:ee,parseUrl:te,hashMatch:d,redrawHashChange:de,useAvatarOrDefault:W,locationActionMatch:Y,navigateToDevise:ne,navigateTo:ie,storeAction:g,callStoredAction:y,UIHelper:oe,toAnchor:re,paramByName:u,i18nScope:ce,RDTracker:ge,selfOrEmpty:p,animateScrollTo:pe,scrollTo:we,scrollTop:fe,projectStateTextClass:be,validationErrors:C,validate:P,analytics:Oe,strip:G,storeObject:h,getStoredObject:v,removeStoredObject:Me,setProject:Ee,getProject:De,setReward:Ne,getReward:Fe,applyMonetaryMask:ke,noNumbersMask:xe,numbersOnlyMask:je,monetaryToFloat:ye,mask:Te,projectFullPermalink:Ve,isProjectPage:Be,setPageTitle:Ue,rootUrl:We,redactor:Xe,setCsrfToken:Ke,userSignedIn:B},$e={country:i.model("countries"),state:i.model("states"),contributionDetail:i.model("contribution_details"),contributionActivity:i.model("contribution_activities"),projectDetail:i.model("project_details"),userDetail:i.model("user_details"),balance:i.model("balances"),balanceTransaction:i.model("balance_transactions"),balanceTransfer:i.model("balance_transfers"),user:i.model("users"),userCreditCard:i.model("user_credit_cards"),bankAccount:i.model("bank_accounts"),bank:i.model("banks"),rewardDetail:i.model("reward_details"),projectReminder:i.model("project_reminders"),projectReport:i.model("project_reports"),contributions:i.model("contributions"),directMessage:i.model("direct_messages"),teamTotal:i.model("team_totals"),recommendedProjects:i.model("recommended_projects"),projectAccount:i.model("project_accounts"),projectAccountError:i.model("project_account_errors"),projectContribution:i.model("project_contributions"),projectContributiorsStat:i.model("project_stat_contributors"),projectPostDetail:i.model("project_posts_details"),projectContributionsPerDay:i.model("project_contributions_per_day"),projectContributionsPerLocation:i.model("project_contributions_per_location"),projectContributionsPerRef:i.model("project_contributions_per_ref"),projectTransfer:i.model("project_transfers"),project:i.model("projects"),projectSearch:i.model("rpc/project_search"),category:i.model("categories"),categoryTotals:i.model("category_totals"),categoryFollower:i.model("category_followers"),teamMember:i.model("team_members"),notification:i.model("notifications"),statistic:i.model("statistics"),successfulProject:i.model("successful_projects"),finishedProject:i.model("finished_projects"),userFriend:i.model("user_friends"),userFollow:i.model("user_follows"),followAllFriends:i.model("rpc/follow_all_friends"),contributor:i.model("contributors"),userFollower:i.model("user_followers"),creatorSuggestion:i.model("creator_suggestions"),userContribution:i.model("user_contributions"),deleteProject:i.model("rpc/delete_project"),cancelProject:i.model("rpc/cancel_project")};$e.teamMember.pageSize(40),$e.rewardDetail.pageSize(!1),$e.project.pageSize(30),$e.category.pageSize(50),$e.contributionActivity.pageSize(40),$e.successfulProject.pageSize(9),$e.finishedProject.pageSize(9),$e.country.pageSize(!1),$e.state.pageSize(!1),$e.projectContribution.pageSize(9),$e.contributor.pageSize(9),$e.recommendedProjects.pageSize(3);var Qe=postgrest.paginationVM($e.user,"id.desc",{Prefer:"count=exact"}),Ze=postgrest.filtersVM({full_text_index:"@@",deactivated_at:"is.null"}),et=function(e){return(e||"").toString().trim()};Ze.deactivated_at(null).order({id:"desc"}),Ze.deactivated_at.toFilter=function(){var e=JSON.parse(Ze.deactivated_at());return e},Ze.full_text_index.toFilter=function(){var e=et(Ze.full_text_index());return e&&l(e)||void 0};var tt={view:function(t,o){var r=o.inputWrapperClass||".w-input.text-field.positive.medium",n=o.btnClass||".btn.btn-large.u-marginbottom-10";return e(".w-row",[e(".w-col.w-col-8",[e("input"+r+'[placeholder="'+o.placeholder+'"][type="text"]',{onchange:e.withAttr("value",o.vm),value:o.vm()})]),e(".w-col.w-col-4",[e("input#filter-btn"+n+'[type="submit"][value="To seek"]')])])}},ot={controller:function(){return{toggler:Ge.toggleProp(!1,!0)}},view:function(t,r){var n=r.filterBuilder,i=(r.data,r.label||""),a=o.findWhere(n,{component:tt});return e("#admin-contributions-filter.w-section.page-header",[e(".w-container",[e(".fontsize-larger.u-text-center.u-marginbottom-30",i),e(".w-form",[e("form",{onsubmit:r.submit},[a?e.component(a.component,a.data):"",e(".u-marginbottom-20.w-row",e('button.w-col.w-col-12.fontsize-smallest.link-hidden-light[style="background: none; border: none; outline: none; text-align: left;"][type="button"]',{onclick:t.toggler.toggle},"Advanced Filters ¬†>")),t.toggler()?e("#advanced-search.w-row.admin-filters",[o.map(n,function(t){return t.component!==tt?e.component(t.component,t.data):""})]):""])])])])}},rt={controller:function(e){return{displayDetailBox:Ge.toggleProp(!1,!0)}},view:function(t,o){var r=o.item;return e(".w-clearfix.card.u-radius.u-marginbottom-20.results-admin-items",[e.component(o.listItem,{item:r,key:o.key}),e("button.w-inline-block.arrow-admin.fa.fa-chevron-down.fontcolor-secondary",{onclick:t.displayDetailBox.toggle}),t.displayDetailBox()?e.component(o.listDetail,{item:r,key:o.key}):""])}},nt={controller:function(e){var t=e.vm.list;!t.collection().length&&t.firstPage&&t.firstPage().then(null,function(t){e.vm.error(t.message)})},view:function(t,o){var r=o.vm.list,n=o.vm.error,i=o.label||"";return e(".w-section.section",[e(".w-container",n()?e(".card.card-error.u-radius.fontweight-bold",n()):[e(".w-row.u-marginbottom-20",[e(".w-col.w-col-9",[e(".fontsize-base",r.isLoading()?"Loading "+i.toLowerCase()+"...":[e("span.fontweight-semibold",r.total())," "+i.toLowerCase()+" Found"])])]),e("#admin-contributions-list.w-container",[r.collection().map(function(t){return e.component(rt,{listItem:o.listItem,listDetail:o.listDetail,item:t,key:t.id})}),e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-2.w-col-push-5",[r.isLoading()?Ge.loader():e("button#load-more.btn.btn-medium.btn-terciary",{onclick:r.nextPage},"Load more")])])])])])])])}},it={view:function(t,o){var r=o.item;return e(".w-row.admin-user",[e(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[e('img.user-avatar[src="'+Ge.useAvatarOrDefault(r.profile_img_thumbnail)+'"]')]),e(".w-col.w-col-9.w-col-small-9",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[e('a.alt-link[target="_blank"][href="/users/'+r.id+'/edit"]',r.name||r.email)]),e(".fontsize-smallest","User: "+r.id),e(".fontsize-smallest.fontcolor-secondary","Email: "+r.email),o.additional_data])])}},at={view:function(t,o){return e(".w-row",[e(".w-col.w-col-4",[e.component(it,o)])])}},lt={controller:function(t){var r=t.data,n=e.prop(!1),i=e.prop(!1),a=(e.prop(!1),r.property),l={},s=t.item;r.requestOptions.config=function(e){Ge.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",Ge.authenticityToken())};var c=e.prop(!1),d=function(){return e.request(o.extend({},{data:l},r.requestOptions))},u=e.prop(""),m=e.prop(""),p=function(e){c(!1),m(e.errors[0]),n(!0),i(!0)},f=function(e){c(!1),o.extend(s,e[0]),n(!0),i(!1)},w=function(){return c(!0),l[a]=u(),d().then(f,p),!1},b=function(e,t,o){o.onunload=function(){n(!1),i(!1)}};return{complete:n,error:i,error_message:m,l:c,newPassword:u,submit:w,toggler:Ge.toggleProp(!1,!0),unload:b}},view:function(t,o){var r=o.data,n=t.l()?"please wait...":r.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},r.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p",t.error_message())])]:[e('.w-form-done[style="display:block;"]',[e("p","Password changed successfully.")])]:[e("label",r.innerLabel),e('input.w-input.text-field[type="text"][name="'+r.property+'"][placeholder="'+r.placeholder+'"]',{onchange:e.withAttr("value",t.newPassword),value:t.newPassword()}),e('input.w-button.btn.btn-small[type="submit"][value="'+n+'"]')])]):""])}},st={controller:function(t){var o=t.data,r=e.prop(!1),n=e.prop(!1),i=(e.prop(!1),{}),a=t.item,l=o.property,s=o.forceValue||null,c=e.prop(s);Ge.idVM.id(a[o.updateKey]);var d=postgrest.loaderWithToken(o.model.patchOptions(Ge.idVM.parameters(),i)),u=function(e){_.extend(a,e[0]),r(!0),n(!1)},m=function(){return i[l]=c(),d.load().then(u,function(){r(!0),n(!0)}),!1},p=function(e,t,o){o.onunload=function(){r(!1),n(!1),c(s)}};return{complete:r,error:n,l:d,newValue:c,submit:m,toggler:Ge.toggleProp(!1,!0),unload:p}},view:function(t,o){var r=o.data,n=t.l()?"please wait...":r.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},r.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p","There was a problem with the request. "+r.errorMessage)])]:[e('.w-form-done[style="display:block;"]',[e("p",r.successMessage)])]:[e("label",r.innerLabel),void 0===r.forceValue?e('input.w-input.text-field[type="text"][placeholder="'+r.placeholder+'"]',{onchange:e.withAttr("value",t.newValue),value:t.newValue()}):"",e('input.w-button.btn.btn-small[type="submit"][value="'+n+'"]')])]):""])}},ct={controller:function(t){var o=e.prop([]),r=function(e){var t=$e.notification;t.getPageWithToken(postgrest.filtersVM({user_id:"eq",sent_at:"is.null"}).user_id(e.id).sent_at(!0).order({sent_at:"desc"}).parameters()).then(o)};return r(t.user),{notifications:o}},view:function(t){return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Notification history"),t.notifications().map(function(t){return e(".w-row.fontsize-smallest.lineheight-looser.date-event",[e(".w-col.w-col-24",[e(".fontcolor-secondary",Ge.momentify(t.sent_at,"DD/MM/YYYY, HH:mm")," - ",e('a[target="blank"][href="/notifications/'+t.relation+"/"+t.id+'"]',t.template_name),t.origin?" - "+t.origin:"")])])})])}},dt={controller:function(){return{actions:{reset:{property:"password",callToAction:"Reset",innerLabel:"New User Password:",outerLabel:"Redefine password",placeholder:"ex: 123mud@r",model:$e.user},reactivate:{property:"deactivated_at",updateKey:"id",callToAction:"Reactivate",innerLabel:"Reactivate...",successMessage:"Are you sure you want to re-enable this user?...",errorMessage:"The user could not be reactivated!",outerLabel:"Reactivate user",forceValue:null,model:$e.user}}}},view:function(t,r){var n=t.actions,i=r.item,a=(r.details,function(e,t){return o.extend({},e,{requestOptions:{url:"/users/"+t+"/new_password",method:"POST"}})});return e("#admin-contribution-detail-box",[e(".divider.u-margintop-20.u-marginbottom-20"),e(".w-row.u-marginbottom-30",[e.component(lt,{data:a(n.reset,i.id),item:i}),i.deactivated_at?e.component(st,{data:n.reactivate,item:i}):""]),e(".w-row.card.card-terciary.u-radius",[e.component(ct,{user:i})])])}},ut={view:function(t,r){var n=o.isFunction(r.options)?r.options():r.options;return e("select"+r.classes+'[id="'+r.id+'"]',{onchange:e.withAttr("value",r.valueProp),value:r.valueProp()},o.map(n,function(t){return e('option[value="'+t.value+'"]',t.option)}))}},mt={view:function(t,o){var r=o.wrapper_class||".w-col.w-col-3.w-col-small-6";return e(r,[e('label.fontsize-smaller[for="'+o.index+'"]',o.custom_label?e.component(o.custom_label[0],o.custom_label[1]):o.label),e.component(ut,{id:o.index,classes:".w-select.text-field.positive",valueProp:o.vm,options:o.options})])}},pt={controller:function(){var t=Qe,o=Ze,r=e.prop(""),n=[{component:tt,data:{vm:o.full_text_index,placeholder:"Search by name, email, user ids..."}},{component:mt,data:{label:"With the state",index:"status",name:"deactivated_at",vm:o.deactivated_at,options:[{value:"",option:"Any"},{value:null,option:"active"},{value:!0,option:"disabled"}]}}],i=function(){return t.firstPage(o.parameters()).then(null,function(e){r(e.message)}),!1};return{filterVM:o,filterBuilder:n,listVM:{list:t,error:r},submit:i}},view:function(t){var o="Users";return[e.component(ot,{form:t.filterVM.formDescriber,filterBuilder:t.filterBuilder,label:o,submit:t.submit}),e.component(nt,{vm:t.listVM,label:o,listItem:at,listDetail:dt})]}},ft=postgrest.paginationVM($e.contributionDetail,"id.desc",{Prefer:"count=exact"}),wt=i.filtersVM({full_text_index:"@@",state:"eq",gateway:"eq",value:"between",created_at:"between"}),bt=function(e){return(e||"").toString().trim()};wt.state(""),wt.gateway(""),wt.order({id:"desc"}),wt.created_at.lte.toFilter=function(){var e=bt(wt.created_at.lte());return e&&Ge.momentFromString(e).endOf("day").format("")},wt.created_at.gte.toFilter=function(){var e=bt(wt.created_at.gte());return e&&Ge.momentFromString(e).format()},wt.full_text_index.toFilter=function(){var e=bt(wt.full_text_index());return e&&l(e)||void 0};var gt={view:function(t,o){var r=o.item;return e(".w-row.admin-project",[e(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[e("img.thumb-project.u-radius[src="+r.project_img+"][width=50]")]),e(".w-col.w-col-9.w-col-small-9",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[e('a.alt-link[target="_blank"][href="/'+r.permalink+'"]',r.project_name)]),e(".fontsize-smallest.fontweight-semibold",r.project_state),e(".fontsize-smallest.fontcolor-secondary",Ge.momentify(r.project_online_date)+" a "+Ge.momentify(r.project_expires_at))])])}},ht={view:function(t,o){var r=o.item;return e(".w-row.admin-contribution",[e(".fontweight-semibold.lineheight-tighter.u-marginbottom-10.fontsize-small","Rs"+r.value),e(".fontsize-smallest.fontcolor-secondary",Ge.momentify(r.created_at,"DD/MM/YYYY HH:mm[h]")),e(".fontsize-smallest",["Gateway ID: ",e('a.alt-link[target="_blank"][href="https://dashboard.pagar.me/#/transactions/'+r.gateway_id+'"]',r.gateway_id)])])}},_t={view:function(t,o){var r=o.item,n={profile_img_thumbnail:r.user_profile_img,id:r.user_id,name:r.user_name,email:r.email},i=e(".fontsize-smallest.fontcolor-secondary","Gateway: "+r.payer_email);return e.component(it,{item:n,additional_data:i})}},vt=_.partial(Ge.i18nScope,"projects.payment"),yt={controller:function(t){var o=t.item,r=null,n=void 0,i=void 0,a=void 0;return r=function(){if(o.gateway_data)switch(o.gateway.toLowerCase()){case"moip":return{first_digits:o.gateway_data.cartao_bin,last_digits:o.gateway_data.cartao_final,brand:o.gateway_data.cartao_bandeira};case"pagarme":return{first_digits:o.gateway_data.card_first_digits,last_digits:o.gateway_data.card_last_digits,brand:o.gateway_data.card_brand}}},n=function(){switch(o.payment_method.toLowerCase()){case"boletobancario":return e("span#boleto-detail","");case"cartaodecredito":var t=r();return t?e("#creditcard-detail.fontsize-smallest.fontcolor-secondary.lineheight-tight",[t.first_digits+"******"+t.last_digits,e("br"),t.brand+" "+o.installments+"x"]):""}},i=function(){switch(o.payment_method.toLowerCase()){case"boletobancario":return".fa-barcode";case"cartaodecredito":return".fa-credit-card";default:return".fa-question"}},a=function(){switch(o.state){case"paid":return".text-success";case"refunded":return".text-refunded";case"pending":case"pending_refund":return".text-waiting";default:return".text-error"}},{displayPaymentMethod:n,paymentMethodClass:i,stateClass:a}},view:function(o,r){var n=r.item;return e(".w-row.payment-status",[e(".fontsize-smallest.lineheight-looser.fontweight-semibold",[e("span.fa.fa-circle"+o.stateClass()),"¬†"+t.t(n.state,vt())]),e(".fontsize-smallest.fontweight-semibold",[e("span.fa"+o.paymentMethodClass())," ",e('a.link-hidden[href="#"]',n.payment_method)]),e(".fontsize-smallest.fontcolor-secondary.lineheight-tight",[o.displayPaymentMethod()])])}},kt={controller:function(){return{itemBuilder:[{component:_t,wrapperClass:".w-col.w-col-4"},{component:gt,wrapperClass:".w-col.w-col-4"},{component:ht,wrapperClass:".w-col.w-col-2"},{component:yt,wrapperClass:".w-col.w-col-2"}]}},view:function(t,o){return e(".w-row",_.map(t.itemBuilder,function(t){return e(t.wrapperClass,[e.component(t.component,{item:o.item,key:o.key})])}))}},xt={controller:function(t){var r=t.data,n=e.prop(!1),i={},a=e.prop(!1),l=(e.prop(!1),t.item()),s=e.prop(l.description||""),c=(r.getKey,e.prop("")),d={},u={},m=e.prop([]),p=(r.radios,r.getKey),f=t.getKeyValue,w=r.updateKey,b=t.updateKeyValue,g=r.validate,h=r.selectedItem||e.prop();u[w]="eq";var _=postgrest.filtersVM(u);_[w](b),d[p]="eq";var v=postgrest.filtersVM(d);v[p](f);var y=postgrest.loaderWithToken(r.getModel.getPageOptions(v.parameters())),k=postgrest.loaderWithToken(r.updateModel.patchOptions(_.parameters(),i)),x=function(e){if(e.length>0){var t=o.findWhere(m(),{id:e[0][r.selectKey]});h(t)}else a({message:"No items updated"});n(!0)},j=function(e){var t=r.addEmpty;m(e),o.isUndefined(t)||m().unshift(t)},z=function(){y.load().then(j,a)},C=function(){if(c()){var e=g(m(),c());o.isUndefined(e)?(i[r.selectKey]=c()===-1?null:c(),k.load().then(x,a)):(n(!0),a({message:e}))}return!1},S=function(e,t,o){o.onunload=function(){n(!1),a(!1),c("")}},P=function(t){s(t),e.redraw()};return z(),{complete:n,description:s,setDescription:P,error:a,setLoader:k,getLoader:y,newID:c,submit:C,toggler:Ge.toggleProp(!1,!0),unload:S,radios:m}},view:function(t,r){var n=r.data,i=r.item(),a=t.setLoader()||t.getLoader()?"please wait...":n.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},n.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p",t.error().message)])]:[e('.w-form-done[style="display:block;"]',[e("p","Reward changed successfully!")])]:[t.radios()?o.map(t.radios(),function(o,r){return e(".w-radio",[e("input#r-"+r+'.w-radio-input[type=radio][name="admin-radio"][value="'+o.id+'"]',{checked:o.id===(i[n.selectKey]||i.id),onclick:function(){t.newID(o.id),t.setDescription(o.description)}}),e('label.w-form-label[for="r-'+r+'"]',"Rs"+o.minimum_value)])}):Ge.loader(),e("strong","Description"),e("p",t.description()),e('input.w-button.btn.btn-small[type="submit"][value="'+a+'"]')])]):""])}},jt={controller:function(t){var r=t.data,n=e.prop(!1),i=e.prop(!1),a=(e.prop(!1),t.item);r.requestOptions.config=function(e){Ge.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",Ge.authenticityToken())};var l=o.compose(r.model.getRowWithToken,Ge.idVM.id(a[r.updateKey]).parameters),s=e.prop(!1),c=function(){return l().then(u)},d=function(e){s(!1),n(!0),i(!0)},u=function(e){o.extend(a,e[0]),n(!0),i(!1)},m=function(){return s(!0),e.request(r.requestOptions).then(c,d),!1},p=function(e,t,o){o.onunload=function(){n(!1),i(!1)}};return{l:s,complete:n,error:i,submit:m,toggler:Ge.toggleProp(!1,!0),unload:p}},view:function(t,o){var r=o.data,n=t.l()?"please wait...":r.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},r.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p","There was a problem with the request.")])]:[e('.w-form-done[style="display:block;"]',[e("p","Request successful.")])]:[e("label",r.innerLabel),e('input.w-button.btn.btn-small[type="submit"][value="'+n+'"]')])]):""]);
}},zt={view:function(t,o){var r=o.contribution;return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Detalhes do apoio"),e(".fontsize-smallest.lineheight-looser",["Value: Rs"+Ge.formatNumber(r.value,2,3),e("br"),"Rate: Rs"+Ge.formatNumber(r.gateway_fee,2,3),e("br"),"Waiting confirmation: "+(r.waiting_payment?"Yes":"No"),e("br"),"Anonymous: "+(r.anonymous?"Yes":"No"),e("br"),"Id payment: "+r.gateway_id,e("br"),"Support: "+r.contribution_id,e("br"),"Key:¬†\n",e("br"),r.key,e("br"),"Medium: "+r.gateway,e("br"),"Operator: "+(r.gateway_data&&r.gateway_data.acquirer_name),e("br"),r.is_second_slip?[e('a.link-hidden[href="#"]',"Bank slip")," ",e("span.badge","2nd route")]:""])])}},Ct={controller:function(e){var t=e.contribution,r=o.reduce([{date:t.paid_at,name:"Support Confirmed"},{date:t.pending_refund_at,name:"Reimbursement Requested"},{date:t.refunded_at,name:"Reversal made"},{date:t.created_at,name:"Support created"},{date:t.refused_at,name:"Support canceled"},{date:t.deleted_at,name:"Support deleted"},{date:t.chargeback_at,name:"Chargeback"}],function(e,t){return null!==t.date&&void 0!==t.date?(t.originalDate=t.date,t.date=Ge.momentify(t.date,"DD/MM/YYYY, HH:mm"),e.concat(t)):e},[]);return{orderedEvents:o.sortBy(r,"originalDate")}},view:function(t){return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Transaction History"),t.orderedEvents.map(function(t){return e(".w-row.fontsize-smallest.lineheight-looser.date-event",[e(".w-col.w-col-6",[e(".fontcolor-secondary",t.date)]),e(".w-col.w-col-6",[e("div",t.name)])])})])}},St={view:function(t,o){var r=o.reward(),n=parseInt(r.paid_count)+parseInt(r.waiting_payment_count);return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Reward"),e(".fontsize-smallest.lineheight-looser",r.id?["ID: "+r.id,e("br"),"Minimum value: Rs"+Ge.formatNumber(r.minimum_value,2,3),e("br"),e.trust("Available: "+n+" / "+(r.maximum_contributions||"&infin;")),e("br"),"Waiting confirmation: "+r.waiting_payment_count,e("br"),"Description: "+r.description]:"Support without reward")])}},Pt={controller:function(t){var r=void 0,n=function(){var n=$e.rewardDetail,i=t.item.reward_id,a=n.getRowOptions(Ge.idVM.id(i).parameters()),l=e.prop({});return r=postgrest.loaderWithToken(a),i&&r.load().then(o.compose(l,o.first)),l};return{reward:n(),actions:{transfer:{property:"user_id",updateKey:"id",callToAction:"Transfer",innerLabel:"Id of new supporter:",outerLabel:"Download Support",placeholder:"ex: 129908",successMessage:"Support transferred successfully!",errorMessage:"Support has not been transferred!",model:$e.contributionDetail},reward:{getKey:"project_id",updateKey:"contribution_id",selectKey:"reward_id",radios:"rewards",callToAction:"Change Reward",outerLabel:"Reward",getModel:$e.rewardDetail,updateModel:$e.contributionDetail,selectedItem:n(),addEmpty:{id:-1,minimum_value:10,description:"No reward"},validate:function(e,r){var n=o.findWhere(e,{id:r});return t.item.value>=n.minimum_value?void 0:"Minimum reward value is greater than the contribution amount."}},refund:{updateKey:"id",callToAction:"Direct refund",innerLabel:"Are you sure you want to reimburse this support?",outerLabel:"Refund Support",model:$e.contributionDetail},remove:{property:"state",updateKey:"id",callToAction:"Delete",innerLabel:"Are you sure you want to delete this support?",outerLabel:"Delete Support",forceValue:"deleted",successMessage:"Support removed successfully!",errorMessage:"Support has not been removed!",model:$e.contributionDetail}},l:r}},view:function(t,r){var n=t.actions,i=r.item,a=t.reward,l=function(e,t){return o.extend({},e,{requestOptions:{url:"/admin/contributions/"+t+"/gateway_refund",method:"PUT"}})};return e("#admin-contribution-detail-box",[e(".divider.u-margintop-20.u-marginbottom-20"),e(".w-row.u-marginbottom-30",[e.component(st,{data:n.transfer,item:i}),t.l()?Ge.loader:e.component(xt,{data:n.reward,item:a,getKeyValue:i.project_id,updateKeyValue:i.contribution_id}),e.component(jt,{data:l(n.refund,i.id),item:i}),e.component(st,{data:n.remove,item:i})]),e(".w-row.card.card-terciary.u-radius",[e.component(zt,{contribution:i}),e.component(Ct,{contribution:i}),t.l()?Ge.loader:e.component(St,{reward:a,key:i.key})])])}},Tt={view:function(t,o){return e(".w-col.w-col-3.w-col-small-6",[e('label.fontsize-smaller[for="'+o.index+'"]',o.label),e(".w-row",[e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[id="'+o.index+'"][type="text"]',{onchange:e.withAttr("value",o.first),value:o.first()})]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e(".fontsize-smaller.u-text-center.lineheight-looser","and")]),e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[type="text"]',{onchange:e.withAttr("value",o.last),value:o.last()})])])])}},Mt={view:function(t,o){return e(".w-col.w-col-3.w-col-small-6",[e('label.fontsize-smaller[for="'+o.index+'"]',o.label),e(".w-row",[e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[id="'+o.index+'"][type="text"]',{onchange:e.withAttr("value",o.first),value:o.first()})]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e(".fontsize-smaller.u-text-center.lineheight-looser","e")]),e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[type="text"]',{onchange:e.withAttr("value",o.last),value:o.last()})])])])}},At={controller:function(){var t=ft,o=wt,r=e.prop(""),n=[{component:tt,data:{vm:o.full_text_index,placeholder:"Search by Design, Email, User and Support Ids..."}},{component:mt,data:{label:"With the state",name:"state",vm:o.state,options:[{value:"",option:"Any"},{value:"paid",option:"paid"},{value:"refused",option:"refused"},{value:"pending",option:"pending"},{value:"pending_refund",option:"pending_refund"},{value:"refunded",option:"refunded"},{value:"chargeback",option:"chargeback"},{value:"deleted",option:"deleted"}]}},{component:mt,data:{label:"gateway",name:"gateway",vm:o.gateway,options:[{value:"",option:"Any"},{value:"Pagarme",option:"Pagarme"},{value:"MoIP",option:"MoIP"},{value:"PayPal",option:"PayPal"},{value:"Credits",option:"Credits"}]}},{component:Tt,data:{label:"Values between",first:o.value.gte,last:o.value.lte}},{component:Mt,data:{label:"Support period",first:o.created_at.gte,last:o.created_at.lte}}],i=function(){return r(!1),t.firstPage(o.parameters()).then(null,function(e){r(e.message)}),!1};return{filterVM:o,filterBuilder:n,listVM:{list:t,error:r},data:{label:"Support"},submit:i}},view:function(t){return[e.component(ot,{form:t.filterVM.formDescriber,filterBuilder:t.filterBuilder,submit:t.submit}),e.component(nt,{vm:t.listVM,listItem:kt,listDetail:Pt})]}},Et={controller:function(t){var o=(t.builder,e.prop("")),r=e.prop(!1),n=function(){return!!Ge.validateEmail(o())||(r(!0),!1)};return{email:o,submit:n,error:r}},view:function(t,o){var r=t.error?"":".positive.error";return e('form.w-form[id="email-form"][method="post"][action="'+o.builder.customAction+'"]',{onsubmit:t.submit},[e(".w-col.w-col-5",[e("input"+r+'.w-input.text-field.medium[name="EMAIL"][placeholder="Type your e-mail"][type="text"]',{config:Ge.RDTracker("landing-flex"),onchange:e.withAttr("value",t.email),value:t.email()}),t.error()?e("span.fontsize-smaller.text-error","invalid E-mail"):""]),e(".w-col.w-col-3",[e('input.w-button.btn.btn-large[type="submit"][value="Register"]')])])}},Dt=m.prop(""),Rt=m.prop([]),Nt={id:-1,description:"Thank you. I just want to help the project.",minimum_value:10},Ft=m.prop(Nt.minimum_value+",00"),It=m.prop(Nt),qt=i.filtersVM({project_id:"eq"}),Ot=function(e){return qt.project_id(e),i.loaderWithToken($e.rewardDetail.getPageOptions(qt.parameters()))},Vt=function(e){return Ot(e).load().then(Rt)},Lt=function(){var e=document.getElementById("application"),t=e&&e.getAttribute("data-contribution");if(t){var o=JSON.parse(t);It(o.reward);return m.redraw(!0),It}return!1},Bt=function(e){return function(){Yt.selectedReward()!==e&&(Yt.selectedReward(e),Ft(Ge.applyMonetaryMask(e.minimum_value+",00")))}},Ut=_.compose(Ft,Ge.applyMonetaryMask),Yt={error:Dt,rewards:Rt,applyMask:Ut,noReward:Nt,fetchRewards:Vt,selectReward:Bt,getSelectedReward:Lt,selectedReward:It,contributionValue:Ft,rewardsLoader:Ot,getValue:Ft,setValue:Ft},Wt=_.partial(Ge.i18nScope,"projects"),Ht=function(){var e=i.filtersVM,o=e({state:"eq"}).state("online"),n=e({near_me:"eq",open_for_contributions:"eq"}).open_for_contributions("true").near_me(!0),a=e({expires_at:"lte",open_for_contributions:"eq"}).open_for_contributions("true").expires_at(r().add(14,"days").format("YYYY-MM-DD")),l=e({online_date:"gte",open_for_contributions:"eq"}).open_for_contributions("true").online_date(r().subtract(5,"days").format("YYYY-MM-DD")),s=e({score:"gte",open_for_contributions:"eq"}).score("1").open_for_contributions("true"),c=e({open_for_contributions:"eq"}).open_for_contributions("true"),d=e({open_for_contributions:"eq",contributed_by_friends:"eq"}).open_for_contributions("true").contributed_by_friends(!0),u=e({state:"eq"}).state("successful"),m=e({}),p={all:{title:"All categories",filter:o,nicename:"Online",isContextual:!1,keyName:"all"},score:{title:"All categories",filter:s,nicename:t.t("home.row_title",Wt()),isContextual:!1,keyName:"score"},contributed_by_friends:{title:"Friends",filter:d,nicename:"Friends",isContextual:!1,keyName:"contributed_by_friends"},online:{title:"Online",filter:c,isContextual:!1,keyName:"online"},expiring:{title:"Final stretch",filter:a,isContextual:!1,keyName:"expiring"},successful:{title:"All categories",filter:u,nicename:"Financed",isContextual:!1,keyName:"successful"},finished:{title:"All categories",filter:m,nicename:"Finalized",isContextual:!1,keyName:"finished"},recent:{title:"Recent",filter:l,isContextual:!1,keyName:"recent"},near_me:{title:"Next to me",filter:n,isContextual:!1,keyName:"near_me"}},f=function(e){return _.map(e,function(e){return p[e].isContextual=!0}),p},w=function(){return _.filter(p,function(e){return e.isContextual})},b=function(e){return p[e.keyName].isContextual=!1,p};return{filters:p,setContextFilters:f,getContextFilters:w,removeContextFilter:b}},Jt=Ge.idVM,Xt=(e.prop([]),e.prop({})),Kt=i.filtersVM({project_user_id:"eq"}),Gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;Kt.project_user_id(e).order({project_id:"desc"}),$e.project.pageSize(t);var o=i.loaderWithToken($e.project.getPageOptions(Kt.parameters()));return o.load()},$t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=i.filtersVM({user_id:"eq"});o.user_id(e),$e.contributor.pageSize(t);var r=i.loaderWithToken($e.contributor.getPageOptions(o.parameters()));return r.load()},Qt=function(e){var t=i.filtersVM({user_id:"eq"});t.user_id(e);var o=i.loaderWithToken($e.bankAccount.getPageOptions(t.parameters()));return o.load()},Zt=function(e){var t=i.filtersVM({user_id:"eq",without_notification:"eq"});t.user_id(e).without_notification(!0),$e.projectReminder;var o=i.loaderWithToken($e.projectReminder.getPageOptions(t.parameters()));return o.load()},eo=function(e){var t=i.filtersVM({user_id:"eq"});t.user_id(e),$e.userCreditCard.pageSize(!1);var o=i.loaderWithToken($e.userCreditCard.getPageOptions(t.parameters()));return o.load()},to=function(t,o){return e.request({method:"GET",config:Ge.setCsrfToken,url:"/projects/"+t+"/contributions/"+o.contribution_id+"/confirm_delivery"})},oo=function(t,o){return e.request({method:"GET",config:Ge.setCsrfToken,url:"/projects/"+t+"/contributions/"+o.contribution_id+"/toggle_anonymous"})},ro=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=i.filtersVM({user_id:"eq",state:"in"});o.user_id(e).order({created_at:"desc"}).state(["refunded","pending_refund","paid"]),$e.userContribution.pageSize(t);var r=i.loaderWithToken($e.userContribution.getPageOptions(o.parameters()));return r.load()},no=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xt;Jt.id(e);var n=i.loaderWithToken($e.userDetail.getRowOptions(Jt.parameters()));return t?n.load().then(o.compose(r,o.first)):n.load()},io=function(){return no(Ge.getUserID()),Xt},ao=function(e){return e.profile_img_thumbnail||"https://catarse.me/assets/catarse_bootstrap/user.jpg"},lo=function(e){return e.profile_cover_image||ao(e)},so=function(t){var r=o.partial(o.sample,o,3),n=e.prop([]),a=e.prop([]),l=Ge.getUser(),s=l.user_id,c=function(){return o.reduce(n(),function(e,t){var r=o.isFunction(e)?e():e,n=o.isFunction(t)?t():t;return r&&n},!0)},d=function(){var e=Ht().filters,t=i.loaderWithToken($e.project.getPageOptions(o.extend({},{order:"score.desc"},e.score.filter.parameters())));n().push(t),t.load().then(o.compose(a,r))},u=function(e){var t=e.project_id,r=i.loaderWithToken($e.project.getPageOptions(i.filtersVM({project_id:"eq"}).project_id(t).parameters()));n().push(r),r.load().then(function(e){a().push(o.first(e))})},m=i.loaderWithToken($e.recommendedProjects.getPageOptions(i.filtersVM({user_id:"eq"}).user_id(s).parameters()));return m.load().then(function(e){e.length>0?o.map(e,u):d()}),{loader:c,collection:a}},co={getUserCreatedProjects:Gt,getUserCreditCards:eo,confirmDelivery:to,toggleAnonymous:oo,getUserProjectReminders:Zt,getUserRecommendedProjects:so,getUserContributedProjects:ro,getUserBankAccount:Qt,getPublicUserContributedProjects:$t,displayImage:ao,displayCover:lo,fetchUser:no,getCurrentUser:io},uo=(Ge.idVM,e.prop()),mo=e.prop(),po=e.prop([]),fo=i.filtersVM({project_id:"eq"}),wo=function(e){return function(t){return uo(o.first(t)),e||co.fetchUser(uo().user_id,!0,mo),uo}},bo=function(e,t){fo.project_id(e);var o=i.loaderWithToken($e.projectDetail.getRowOptions(fo.parameters()));return ho(e,t),o.load().then(wo(t))},go=function(){mo({}),Yt.rewards([])},ho=function(e,t){t&&co.fetchUser(t,!0,mo),Yt.fetchRewards(e)},_o=function(){var t=document.getElementById("application"),o=t&&t.getAttribute("data-parameters");if(o){var r=uo(JSON.parse(o)),n=r.project_id,i=r.project_user_id;return e.redraw(!0),bo(n,i),uo()}return!1},vo=function(t,o){return function(){return uo(t),go(),e.route(Ge.buildLink(t.permalink,o),{project_id:t.project_id,project_user_id:t.project_user_id}),!1}},yo=function(){if(uo()){var e=uo().project_name||uo().name;return e?Ge.setPageTitle(e):Function.prototype}},ko={userDetails:mo,getCurrentProject:_o,projectContributions:po,currentProject:uo,rewardDetails:Yt.rewards,routeToProject:vo,setProjectPageTitle:yo,init:bo},xo={controller:function(t){var r=t.project,n=e.prop([]),a=i.paginationVM($e.contributor,"user_id.desc",{Prefer:"count=exact"}),l=i.filtersVM({project_id:"eq",is_follow:"eq"}).project_id(r.project_id).is_follow(!0);return a.collection().length||a.firstPage(l.parameters()).then(function(){n(o.sample(a.collection(),2))}),{project:r,listVM:a,friendsSample:n}},view:function(t,r){var n=(t.project,t.listVM.collection().length);return e(".friend-backed-card",[e(".friend-facepile",[o.map(t.friendsSample(),function(t){var r=o.isEmpty(t.data.profile_img_thumbnail)?"/assets/catarse_bootstrap/user.jpg":t.data.profile_img_thumbnail;return e("img.user-avatar[src='"+r+"']")})]),e("p.fontsize-smallest.friend-namepile.lineheight-tighter",[e("span.fontweight-semibold",o.map(t.friendsSample(),function(e){return e.data.name.split(" ")[0]}).join(n>2?", ":" e ")),n>2?[" and ",e("span.fontweight-semibold","more "+(n-t.friendsSample().length))]:""," Backed"])])}},jo=o.partial(Ge.i18nScope,"projects.card"),zo={controller:function(e){var t=e.project,o=t.progress.toFixed(2),r=Ge.translatedTime(t.remaining_time),n=Ge.translatedTime(t.elapsed_time),i=e.type||"small",a=function(){var e={small:{wrapper:".w-col.w-col-4",innerWrapper:".card-project.card.u-radius",thumb:".card-project-thumb",descriptionWrapper:"",description:".card-project-description.alt",title:".fontweight-semibold.u-text-center-small-only.lineheight-tight.u-marginbottom-10.fontsize-base",author:".w-hidden-small.w-hidden-tiny.fontsize-smallest.fontcolor-secondary.u-marginbottom-20",headline:".w-hidden-small.w-hidden-tiny.fontcolor-secondary.fontsize-smaller",city:".w-hidden-small.w-hidden-tiny.card-project-author.altt"},medium:{wrapper:".w-col.w-col-6",innerWrapper:".card-project.card.u-radius",thumb:".card-project-thumb.medium",descriptionWrapper:"",description:".card-project-description.alt",title:".fontsize-large.fontweight-semibold.u-marginbottom-10",author:".w-hidden-small.w-hidden-tiny.fontsize-smallest.fontcolor-secondary.u-marginbottom-20",headline:".w-hidden-small.w-hidden-tiny.fontcolor-secondary.fontsize-smaller",city:".w-hidden-small.w-hidden-tiny.card-project-author.altt"},big:{wrapper:".card.u-radius.card-project",innerWrapper:".w-row",thumb:".w-col.w-col-8.w-col-medium-6.card-project-thumb.big",descriptionWrapper:".w-col.w-col-4.w-col-medium-6",description:".card-project-description.big",title:".fontsize-large.fontweight-semibold.u-marginbottom-10",author:".fontsize-smallest.fontcolor-secondary.u-marginbottom-20",headline:".fontcolor-secondary.fontsize-smaller",city:".w-hidden"}};return e[i]},l=function(){var e=function(){return"failed"===t.state||"waiting_funds"===t.state?"card-secondary":""};return".card-project-meter."+t.mode+"."+t.state+"."+(o>100?"complete":"incomplete")+"."+e()};return{css:a,type:i,progress:o,remainingTextObj:r,elapsedTextObj:n,cardMeter:l}},view:function(r,n){var i=n.project;return e(r.css().wrapper,[e(r.css().innerWrapper,[e("a"+r.css().thumb+'[href="/'+i.permalink+"?ref="+n.ref+'"]',{onclick:ko.routeToProject(i,n.ref),style:{"background-image":"url("+i.project_img+")",display:"block"}}),e(r.css().descriptionWrapper,[e(r.css().description,[e(r.css().title,[e('a.link-hidden[href="/'+i.permalink+"?ref="+n.ref+'"]',{onclick:ko.routeToProject(i,n.ref)},i.project_name)]),e(r.css().author,t.t("by",jo())+" "+i.owner_public_name),e(r.css().headline,[e('a.link-hidden[href="/'+i.permalink+"?ref="+n.ref+'"]',{onclick:ko.routeToProject(i,n.ref)},i.headline)])]),e(r.css().city,[e(".fontsize-smallest.fontcolor-secondary",[e("span.fa.fa-map-marker.fa-1"," ")," "+(i.city_name?i.city_name:"")+", "+(i.state_acronym?i.state_acronym:"")])]),e(r.cardMeter(),[o.contains(["successful","failed","waiting_funds"],i.state)?e("div","successful"===i.state&&r.progress<100?t.t("display_status.flex_successful",jo()):t.t("display_status."+i.state,jo())):e(".meter",[e(".meter-fill",{style:{width:(r.progress>100?100:r.progress)+"%"}})])]),e(".card-project-stats",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4",[e(".fontsize-base.fontweight-semibold",Math.floor(i.progress)+"%")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.u-text-center-small-only",[e(".fontsize-smaller.fontweight-semibold","Rs "+Ge.formatNumber(i.pledged)),e(".fontsize-smallest.lineheight-tightest",t.t("contributed",jo()))]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.u-text-right",i.expires_at?[e(".fontsize-smaller.fontweight-semibold",r.remainingTextObj.total+" "+r.remainingTextObj.unit),e(".fontsize-smallest.lineheight-tightest",r.remainingTextObj.total>1?t.t("remaining.other",jo()):t.t("remaining.one",jo()))]:[e(".fontsize-smallest.lineheight-tight",["Initiated",e("br"),r.elapsedTextObj.total+" "+r.elapsedTextObj.unit])])])])]),n.showFriends&&"big"===r.type?e(".w-col.w-col-4.w-col-medium-6",[e.component(xo,{project:i})]):""]),n.showFriends&&"big"!==r.type?e.component(xo,{project:i}):""])}},Co=o.partial(Ge.i18nScope,"projects"),So={view:function(r,n){var i=n.collection,a=n.title||i.title,l=n.ref,s=n.showFriends,c=n.wrapper||".w-section.section.u-marginbottom-40";return i.loader()||i.collection().length>0?e(c,[e(".w-container",[o.isUndefined(i.title)&&o.isUndefined(i.hash)?"":e(".w-row.u-marginbottom-30",[e(s?".w-col.w-col-8.w-col-small-6.w-col-tiny-6":".w-col.w-col-10.w-col-small-6.w-col-tiny-6",[e(".fontsize-large.lineheight-looser",a)]),e(s?".w-col.w-col-4.w-col-small-6.w-col-tiny-6":".w-col.w-col-2.w-col-small-6.w-col-tiny-6",[e(".w-row",[s?e(".w-col.w-col-6",[e('a.btn.btn-no-border.btn-small.btn-terciary[href="/connect-facebook?ref='+l+'"]',"Meet friends")]):"",e(s?".w-col.w-col-6":".w-col.w-col-12",e('a.btn.btn-small.btn-terciary[href="/explore?ref='+l+"&filter="+i.hash+'"]',{config:e.route},t.t("home.see_all",Co())))])])]),i.loader()?Ge.loader():e(".w-row",o.map(i.collection(),function(t){return e.component(zo,{project:t,ref:l,showFriends:s})}))])]):e("div")}},Po={controller:function(e){return{showAnswer:Ge.toggleProp(!1,!0)}},view:function(t,o){return e(".card.qa-card.u-marginbottom-20.u-radius.btn-terciary",[e(".fontsize-base",{onclick:function(){t.showAnswer.toggle(),o.onclick&&o.onclick()}},o.question),t.showAnswer()?e("p.u-margintop-20.fontsize-small",e.trust(o.answer)):""])}},To={controller:function(){var t=e.prop([]),o=e.prop([]),r=(e.prop(),_.partial(_.sample,_,3)),n={customAction:"http://fazum.catarse.me/obrigado-landing-catarse-flex"},a=function(e,t){t||Ge.discuss("https://catarse.me/flex","flex_page")},l=i.filtersVM({mode:"eq",state:"eq",recommended:"eq"}),s=i.loaderWithToken($e.statistic.getRowOptions());l.mode("flex").state("online").recommended(!0);var c=i.loader($e.project.getPageOptions(l.parameters()));return s.load().then(t),c.load().then(_.compose(o,r)),{addDisqus:a,builder:n,statsLoader:s,stats:t,projectsLoader:c,projects:{loader:c,collection:o}}},view:function(t,o){var r=_.first(t.stats());return[e(".w-section.hero-full.hero-zelo",[e(".w-container.u-text-center",[e("img.logo-flex-home[src='/assets/logo-flex.png'][width='359']"),e(".w-row",[e(".w-col.fontsize-large.u-marginbottom-60.w-col-push-2.w-col-8","Let`s build a new mode of crowdfunding! Register your email and learn how to register your project on flex!")]),e(".w-row",[e(".w-col.w-col-2"),e.component(Et,{builder:t.builder}),e(".w-col.w-col-2")])])]),[e(".section",[e(".w-container",[e(".fontsize-largest.u-margintop-40.u-text-center","Pra quem ser√°?"),e(".fontsize-base.u-text-center.u-marginbottom-60","We will start the testing phase with specific project categories"),e("div",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-6",[e(".u-text-center.u-marginbottom-20",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e393a01b66e250aca67cb_icon-zelo-com.png'][width='210']"),e(".fontsize-largest.lineheight-loose","Causes")]),e("p.fontsize-base","Flexibility for causes of impact! We will be open to campaigns of organizations or individuals for the collection of resources for personal causes, assistance projects, health, humanitarian aid, animal protection, socio-environmental entrepreneurship, activism or anything that unites people to do good.")]),e(".w-col.w-col-6",[e(".u-text-center.u-marginbottom-20",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e3929a0daea230a5f12cd_icon-zelo-pessoal.png'][width='210']"),e(".fontsize-largest.lineheight-loose","Kitties")]),e("p.fontsize-base","Simple campaigns that need the flexibility to raise money with people close to you. We will be open to a variety of personal campaigns that can range from covering study costs to helping those in need of medical treatment. To collect the money to make that party buy presents for someone with the help of the galley.")])])])])]),e(".w-section.section.bg-greenlime.fontcolor-negative",[e(".w-container",[e(".fontsize-largest.u-margintop-40.u-marginbottom-60.u-text-center","Como funcionar√°?"),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39c578b284493e2a428a_zelo-money.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","Stay with how much to collect"),e("p.u-text-center.fontsize-base","Flex is to drive campaigns where all money is welcome! You get everything you can raise.")]),e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39d37c013d4a3ee687d2_icon-reward.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","No rewards required"),e("p.u-text-center.fontsize-base","No flex offering rewards is optional. You choose whether to offer them makes sense for your project and campaign.")])]),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39fb01b66e250aca67e3_icon-curad.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","You publish your project yourself"),e("p.u-text-center.fontsize-base","All projects enrolled in the flex come on the air. Agility and ease for you to capture resources through the internet.")]),e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39e77c013d4a3ee687d4_icon-time.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","End the campaign anytime"),e("p.u-text-center.fontsize-base","There is no capitation time limit. You choose when to close your campaign and receive the amounts collected.")])])])]),e(".w-section.section",[e(".w-container",[e(".w-editable.fontsize-larger.u-margintop-40.u-margin-bottom-40.u-text-center","Meet some of the first flex projects"),t.projectsLoader()?Ge.loader():e.component(So,{collection:t.projects,ref:"ctrse_flex",wrapper:".w-row.u-margintop-40"})])]),e(".w-section.divider"),e(".w-section.section",[e(".w-container",[e(".fontsize-larger.u-text-center.u-marginbottom-60.u-margintop-40","Doubts"),e(".w-row.u-marginbottom-60",[e(".w-col.w-col-6",[e.component(Po,{question:"What are the flexible mode fees? ",answer:"Like in JVN, sending a project costs nothing! The fee charged on the JVN flex service is 13% on the amount collected."}),e.component(Po,{question:"Where does the money from my project come from?",answer:"Family, friends, fans and members of communities that you are part of are your greatest contributors. It is they who will spread their campaign to the people they know, and so the circle of supporters is increasing and your campaign is gaining strength."}),e.component(Po,{question:'What is the difference between the flexible and the "all or nothing"?',answer:'Currently Catarse uses only the "all or nothing" model, where you only get the money if you beat the collection goal within the term of the campaign. The flexible model is different because it allows the director to keep what he has collected, regardless of whether or not he reaches the project goal within the term of the campaign. There will be no time limit for campaigns. Our flexible system will be something new compared to the models that currently exist in the market.'})]),e(".w-col.w-col-6",[e.component(Po,{question:"Can I enter projects for flexible mode already?",answer:"Yes. Register your email and learn how to register your project on flex!"}),e.component(Po,{question:"Why do you want to do the Catarse flex?",answer:"We believe that the Brazilian crowdfunding environment still has room for many actions, tests and experiments to really understand what people need. We dream of making collective financing a habit in Brazil. Catarse flex is another step in this direction."}),e.component(Po,{question:"When will you launch Catarse flex?",answer:"We still do not know when we will open flex for the general public, but you can register your email on this page and receive special material on how to submit your project."})])])])]),e(".w-section.section-large.u-text-center.bg-purple",[e(".w-container.fontcolor-negative",[e(".fontsize-largest","Inscreva seu projeto!"),e(".fontsize-base.u-marginbottom-60","Register your email and learn how to register your project on flex!"),e(".w-row",[e(".w-col.w-col-2"),e.component(Et,{builder:t.builder}),e(".w-col.w-col-2")])])]),e('.w-section.section-one-column.bg-catarse-zelo.section-large[style="min-height: 50vh;"]',[e(".w-container.u-text-center",[e(".w-editable.u-marginbottom-40.fontsize-larger.lineheight-tight.fontcolor-negative","Flex is an experiment and initiative of JVN, Nepal`s largest crowdfunding platform."),e(".w-row.u-text-center",t.statsLoader()?Ge.loader():[e(".w-col.w-col-4",[e(".fontsize-jumbo.text-success.lineheight-loose",Ge.formatNumber(r.total_contributors,0,3)),e("p.start-stats.fontsize-base.fontcolor-negative","People have already supported at least 01 project in JVN")]),e(".w-col.w-col-4",[e(".fontsize-jumbo.text-success.lineheight-loose",Ge.formatNumber(r.total_projects_success,0,3)),e("p.start-stats.fontsize-base.fontcolor-negative","Projects have already been funded in JVN")]),e(".w-col.w-col-4",[e(".fontsize-jumbo.text-success.lineheight-loose",r.total_contributed.toString().slice(0,2)+" millions"),e("p.start-stats.fontsize-base.fontcolor-negative","They were invested in ideas published in JVN")])])])]),e(".w-section.section.bg-blue-one.fontcolor-negative",[e(".w-container",[e(".fontsize-large.u-text-center.u-marginbottom-20","Recommend the Catarse flex for friends! "),e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("div",[e("img.icon-share-mobile[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/53a3f66e05eb6144171d8edb_facebook-xxl.png']"),e('a.w-button.btn.btn-large.btn-fb[href="http://www.facebook.com/sharer/sharer.php?u=https://www.myjvn.com/flex?ref=facebook&title='+encodeURIComponent("Meet the new JVN Flex!")+'"][target="_blank"]',"To share")])]),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("div",[e("img.icon-share-mobile[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/53a3f65105eb6144171d8eda_twitter-256.png']"),e('a.w-button.btn.btn-large.btn-tweet[href="https://twitter.com/intent/tweet?text='+encodeURIComponent("Let`s build a new mode of crowdfunding for Catarse! Join us, sign up for your email!")+'https://www.myjvn.com/flex?ref=twitter"][target="_blank"]',"To tweet")])])])]),e(".w-col.w-col-2")])])]),e(".w-section.section-large.bg-greenlime",[e(".w-container",[e("#participe-do-debate.u-text-center",{config:Ge.toAnchor()},[e("h1.fontsize-largest.fontcolor-negative","Build Flex with us"),e(".fontsize-base.u-marginbottom-60.fontcolor-negative","Start a conversation, ask, comment, critique and make suggestions!")]),e('#disqus_thread.card.u-radius[style="min-height: 50vh;"]',{config:t.addDisqus})])])]]}},Mo={controller:function(t){var o=(e.prop(0),e.prop(t.width||280)),r=e.prop(0),n=e.prop(0),i=e.prop(0),a=e.prop({top:0,left:0}),l=Ge.toggleProp(0,1),s=function(){l.toggle(),e.redraw()},c=function(e,t){t||a(Ge.cumulativeOffset(e))},d=function(e,t){if(!t){var o=e.offsetHeight+e.offsetParent.offsetHeight,i=window.getComputedStyle(e);window.innerWidth<e.offsetWidth+2*parseFloat(i.paddingLeft)+30?(e.style.width=window.innerWidth-30,n(-a().left+15)):a().left+e.offsetWidth/2<=window.innerWidth&&a().left-e.offsetWidth/2>=0?n(-e.offsetWidth/2):a().left+e.offsetWidth/2>window.innerWidth?n(-e.offsetWidth+e.offsetParent.offsetWidth):a().left-e.offsetWidth/2<0&&n(-e.offsetParent.offsetWidth),r(-o)}};return{width:o,top:r,left:n,opacity:i,tooltip:l,toggle:s,setPosition:d,setParentPosition:c}},view:function(t,o){var r=t.width();return e(o.el,{onclick:t.toggle,config:t.setParentPosition,style:{cursor:"pointer"}},t.tooltip()?[e('.tooltip.dark[style="width: '+r+"px; top: "+t.top()+"px; left: "+t.left()+'px;"]',{config:t.setPosition},[e(".fontsize-smallest",o.text)])]:"")}},Ao=o.partial(Ge.i18nScope,"projects.dashboard_nav"),Eo=o.partial(Ge.i18nScope,"projects.dashboard_nav_links"),Do={controller:function(e){var t=document.getElementsByTagName("body")[0],r=Ge.toggleProp(!0,!1),n=Ge.toggleProp(!0,!1),i=Ge.toggleProp("body-project open","body-project closed"),a=function(e){return o.isEmpty(e.large_image)?o.isEmpty(e.thumb_image)?"/assets/thumb-project.png":e.thumb_image:e.large_image};return e.project().is_published&&r.toggle(!1),
e.hidePublish&&n.toggle(!1),{body:t,editLinksToggle:r,showPublish:n,bodyToggleForNav:i,projectThumb:a}},view:function(r,n){var i=n.project(),a="/projects/"+i.project_id,l=a+"/edit",s="dashboard-nav-link-left "+(i.is_published?"indent":""),c=e("span.fontsize-smallest.fontcolor-secondary"," (optional)");return r.body.className=r.bodyToggleForNav(),e("#project-nav",[e(".project-nav-wrapper",[e("nav.w-section.dashboard-nav.side",[e('a#dashboard_preview_link.w-inline-block.dashboard-project-name[href="'+(i.is_published?"/"+i.permalink:l+"#preview")+'"]',[e('img.thumb-project-dashboard[src="'+(i?r.projectThumb(i):"/assets/thumb-project.png")+'"][width="114"]'),e(".fontcolor-negative.lineheight-tight.fontsize-small",i.name),e('img.u-margintop-10[src="/assets/catarse_bootstrap/badge-'+i.mode+'-h.png"][width=80]')]),e("#info-links",[e('a#dashboard_home_link[class="dashboard-nav-link-left '+(Ge.locationActionMatch("insights")?"selected":"")+'"][href="'+a+'/insights"]',[e("span.fa.fa-bar-chart.fa-lg.fa-fw"),t.t("start_tab",Ao())]),i.is_published?[e('a#dashboard_reports_link[class="dashboard-nav-link-left '+(Ge.locationActionMatch("contributions_report")?"selected":"")+('"][href="'+a+'/contributions_report"]'),[e("span.fa.fa.fa-table.fa-lg.fa-fw"),t.t("reports_tab",Ao())]),e('a#dashboard_reports_link[class="dashboard-nav-link-left '+(Ge.locationActionMatch("posts")?"selected":"")+('"][href="'+a+'/posts"]'),[e("span.fa.fa-bullhorn.fa-fw.fa-lg"),t.t("posts_tab",Ao()),i.posts_count>0?e("span.badge",i.posts_count):e("span.badge.badge-attention","None")])]:""]),e(".edit-project-div",[i.is_published?e("button#toggle-edit-menu.dashboard-nav-link-left",{onclick:r.editLinksToggle.toggle},[e("span.fa.fa-pencil.fa-fw.fa-lg"),t.t("edit_project",Ao())]):"",r.editLinksToggle()?e("#edit-menu-items",[e("#dashboard-links",[!i.is_published||i.is_admin_role?[e('a#basics_link[class="'+s+'"][href="'+l+'#basics"]',t.t(i.mode+".basics_tab",Eo())),e('a#goal_link[class="'+s+'"][href="'+l+'#goal"]',t.t(i.mode+".goal_tab",Eo()))]:"",e('a#description_link[class="'+s+'"][href="'+l+'#description"]',t.t(i.mode+".description_tab",Eo())),e('a#video_link[class="'+s+'"][href="'+l+'#video"]',["Video",e("span.fontsize-smallest.fontcolor-secondary"," (optional)")]),e('a#budget_link[class="'+s+'"][href="'+l+'#budget"]',t.t(i.mode+".budget_tab",Eo())),e('a#card_link[class="'+s+'"][href="'+l+'#card"]',t.t(i.mode+".card_tab",Eo())),e('a#dashboard_reward_link[class="'+s+'"][href="'+l+'#reward"]',["Rewards",c]),e('a#dashboard_user_about_link[class="'+s+'"][href="'+l+'#user_about"]',t.t(i.mode+".about_you_tab",Eo())),i.is_published?"":[e('a#dashboard_preview_link[class="'+s+'"][href="'+l+'#preview"]',[e("span.fa.fa-fw.fa-eye.fa-lg"),t.t(i.mode+".preview_tab",Eo())])]])]):"",!i.is_published&&r.showPublish()?[e(".btn-send-draft-fixed","aon"===i.mode?["draft"===i.state?e('a.btn.btn-medium[href="/projects/'+i.project_id+'/validate_publish"]',[t.t("publish",Ao()),e.trust("&nbsp;&nbsp;"),e("span.fa.fa-chevron-right")]):""]:["draft"===i.state?e('a.btn.btn-medium[href="/flexible_projects/'+i.project_id+'/validate_publish"]',[t.t("publish",Ao()),e.trust("&nbsp;&nbsp;"),e("span.fa.fa-chevron-right")]):""])]:["flex"===i.mode&&i.is_published?[e(".btn-send-draft-fixed",o.isNull(i.expires_at)?e('a.w-button.btn.btn-medium.btn-secondary-dark[href="/projects/'+i.project_id+'/edit#announce_expiration"]',t.t("announce_expiration",Ao())):"")]:""]])])]),e('a.btn-dashboard href="javascript:void(0);"',{onclick:r.bodyToggleForNav.toggle},[e("span.fa.fa-bars.fa-lg")])])}},Ro={view:function(t,o){return e(".modal-backdrop",[e(".modal-dialog-outer",[e(".modal-dialog-inner.modal-dialog-small",[e("a.w-inline-block.fa.fa-lg.modal-close"+(o.hideCloseButton?"":".fa-close")+'[href="javascript:void(0);"]',{onclick:o.displayModal.toggle}),e.component(o.content[0],o.content[1])])])])}},No={controller:function(e){var t=e.resource,o=function(){return!_.isNull(t.expires_at)&&r().add(8,"days")>=r(t.zone_expires_at)};return{project:t,remainingTextObj:Ge.translatedTime(t.remaining_time),elapsedTextObj:Ge.translatedTime(t.elapsed_time),isFinalLap:o}},view:function(t){var o=t.project,r=o.progress.toFixed(2),n=Ge.projectStateTextClass(o.state),i=t.remainingTextObj,a=t.elapsedTextObj;return e(".project-details-card.card.u-radius.card-terciary.u-marginbottom-20",[e("div",[e(".fontsize-small.fontweight-semibold",[e("span.fontcolor-secondary","Status:"),"¬†",e("span",{"class":n.cssClass},t.isFinalLap()&&o.open_for_contributions?"FINAL STRAIGHT":n.text),"¬†"]),o.is_published?[e(".meter.u-margintop-20.u-marginbottom-10",[e(".meter-fill",{style:{width:(r>100?100:r)+"%"}})]),e(".w-row",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","Financed"),e(".fontweight-semibold.fontsize-large.lineheight-tight",r+"%")]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","Raised"),e(".fontweight-semibold.fontsize-large.lineheight-tight",["Rs "+Ge.formatNumber(o.pledged,2)])]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","Supports"),e(".fontweight-semibold.fontsize-large.lineheight-tight",o.total_contributions)]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[_.isNull(o.expires_at)?[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","Initiated"),e(".fontweight-semibold.fontsize-large.lineheight-tight",a.total+" "+a.unit)]:[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","Remain"),e(".fontweight-semibold.fontsize-large.lineheight-tight",i.total+" "+i.unit)]])])]:""])])}},Fo={view:function(t,o){return e(".modal-dialog-content.u-text-center",[e(".fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40"),e("p.fontsize-larger.lineheight-tight","Your campaign is online !!! Congratulations on that first big step. Good luck on this journey. ;)")])}},Io={view:function(t,r){var n=r.project(),i=n.progress.toFixed(2),a=Ge.projectStateTextClass(n.state),l=Ge.translatedTime(n.remaining_time),s=Ge.translatedTime(n.elapsed_time);return e(".w-row.u-marginbottom-40",[e(".w-col.w-col-3.u-text-center-small-only",[e(".fontsize-small.fontweight-semibold.u-marginbottom-20",[e("span.fontcolor-secondary","Status: "),e("span",{"class":a.cssClass},a.text)])]),e(".w-col.w-col-9",[e(".w-row.u-text-center",[e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6",[e(".fontweight-semibold.fontsize-large.lineheight-tight",i+"%"),e(".fontcolor-secondary.lineheight-tighter.fontsize-small.u-marginbottom-10","Financed")]),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6",[e(".fontweight-semibold.fontsize-large.lineheight-tight","Rs "+Ge.formatNumber(n.pledged,2)),e(".fontcolor-secondary.lineheight-tighter.fontsize-small.u-marginbottom-10","Raised")]),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6",[e(".fontweight-semibold.fontsize-large.lineheight-tight",n.total_contributions),e(".fontcolor-secondary.lineheight-tighter.fontsize-small","Supports")]),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6",[o.isNull(n.expires_at)?[e(".fontweight-semibold.fontsize-large.lineheight-tight",s.total+" "+s.unit),e(".fontcolor-secondary.lineheight-tighter.fontsize-small","Initiated")]:[e(".fontweight-semibold.fontsize-large.lineheight-tight",""+l.total),e(".fontcolor-secondary.lineheight-tighter.fontsize-small",l.unit+" "+(l.total>0,"remaining"))]])])])])}},qo={controller:function(t){var o=e.prop(!1),r=e.prop(!1),n=e.prop(!0),a=e.prop(""),l=e.prop(""),s=function(){if("Delete-draft"===l()){var s=$e.deleteProject.postOptions({_project_id:t.project.project_id});o=i.loaderWithToken(s),o.load().then(function(){r(!0)})["catch"](function(t){n(!1),a("Error deleting project. Please try again."),e.redraw()})}else n(!1),a('Please correct the following errors: To permanently delete the project you must fill in "delete-draft".');return!1};return{deleteProject:s,confirmed:n,deleteSuccess:r,error:a,check:l}},view:function(t,o){o.project;return e("div",t.deleteSuccess()?"":e(".modal-dialog-header",e(".fontsize-large.u-text-center",["Confirm ",e("span.fa.fa-trash","")])),e("form.modal-dialog-content",{onsubmit:t.deleteProject},t.deleteSuccess()?[e(".fontsize-base.u-margintop-30","Project deleted successfully. Click the link below to return to the homepage."),e("a.btn.btn-inactive.btn-large.u-margintop-30[href='/en/users/"+Ge.getUser().user_id+"/edit#projects']","Resume")]:[e(".fontsize-base.u-marginbottom-60",["The project will be permanently deleted and all data you filled in the draft edition will not be retrieved."]),e(".fontsize-base.u-marginbottom-10",["Confirm writing ","In the field below",e("span.fontweight-semibold.text-error"," Delete-draft")]),e(".w-form",e(".text-error.u-marginbottom-10",t.error()),[e("div",e("input.positive.text-field.u-marginbottom-40.w-input[maxlength='256'][type='text']",{"class":!t.confirmed()&&"error",placeholder:"Delete-draft",onchange:e.withAttr("value",t.check)}))]),e("div",e(".w-row",[e(".w-col.w-col-3"),e(".u-text-center.w-col.w-col-6",[e("input.btn.btn-inactive.btn-large.u-marginbottom-20[type='submit'][value='Delete forever']"),e("a.fontsize-small.link-hidden-light[href='#']",{onclick:o.displayDeleteModal.toggle},"Cancel")]),e(".w-col.w-col-3")]))]))}},Oo={controller:function(e){var t=Ge.toggleProp(!1,!0);return{displayDeleteModal:t}},view:function(t,o){return e("div",[t.displayDeleteModal()?e.component(Ro,{displayModal:t.displayDeleteModal,hideCloseButton:!0,content:[qo,{displayDeleteModal:t.displayDeleteModal,project:o.project}]}):"",e(".before-footer",e(".w-container",e("a.btn.btn-inline.btn-no-border.btn-small.btn-terciary.u-marginbottom-20.u-right.w-button[href='javascript:void(0);']",{onclick:t.displayDeleteModal.toggle,style:{transition:"all 0.5s ease 0s"}},[e.trust("&nbsp;"),"Delete Campaign ",e("span.fa.fa-trash","")])))])}},Vo={controller:function(t){var o=(e.prop(!1),e.prop(!1)),r=e.prop(""),n=function(){return"cancel-campaign"===r()?(t.displayModal.toggle(),document.getElementById("send-message").style.display="block"):o(!0),!1};return{showNextModal:n,checkError:o,check:r}},view:function(t,o){return e("form.cancel-project-modal.modal-dialog-content",{onsubmit:t.showNextModal},[e(".fontsize-small.u-marginbottom-20",['Upon cancellation, your campaign will appear on the platform as "non-funded" and your supporters will be immediately reimbursed. ',e("span.fontweight-semibold","This action can not be undone!"),e("br"),e("span.fontweight-semibold")]),e(".fontsize-small.u-marginbottom-10",["If you are sure you want to cancel your campaign, please confirm by writing ",e("span.fontweight-semibold.text-error","cancel-campaign "),"in the field below. Then we will ask you to write a message to your supporters and your campaign will then be canceled.",e("span.fontweight-semibold.text-error")]),e(".w-form",[e("input.positive.text-field.u-marginbottom-40.w-input[maxlength='256'][type='text']",{"class":!!t.checkError()&&"error",placeholder:"cancel-campaign",onchange:e.withAttr("value",t.check)})]),e("div",e(".w-row",[e(".w-col.w-col-3"),e(".u-text-center.w-col.w-col-6",[e("input.btn.btn-inactive.btn-large.u-marginbottom-20[type='submit'][value='Next step >']"),e("a.fontsize-small.link-hidden-light[href='#']",{onclick:o.displayModal.toggle},"Cancel")]),e(".w-col.w-col-3")]))])}},Lo={controller:function(e){var t=Ge.toggleProp(!1,!0);return{displayCancelModal:t}},view:function(t,o){return e("div",[t.displayCancelModal()?e.component(Ro,{displayModal:t.displayCancelModal,content:[Vo,{displayModal:t.displayCancelModal}]}):"",e(".w-row.before-footer",e(".w-col.w-col-12",e(".w-container",e("button.btn.btn-cancel.btn-inline.btn-no-border.btn-small.btn-terciary.u-marginbottom-20.u-right.w-button",{onclick:t.displayCancelModal.toggle,style:{transition:"all 0.5s ease 0s"}},[e("span.fa.fa-times-circle",""),e.trust("&nbsp;"),"Cancel Project"]))))])}},Bo={controller:function(e){var t=o.first(e.collection()),r=o.isUndefined(t)?[]:t.source,n=function(){return[{fillColor:"rgba(126,194,69,0.2)",strokeColor:"rgba(126,194,69,1)",pointColor:"rgba(126,194,69,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:o.map(r,function(t){return t[e.dataKey]})}]},i=function(t,i){if(!i){var a=t.getContext("2d");new s(a).Line({labels:o.map(r,function(t){return e.xAxis(t)}),datasets:n()})}};return{renderChart:i,source:r}},view:function(t,r){return e(".card.u-radius.medium.u-marginbottom-30",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",r.label),e(".w-row",[e(".w-col.w-col-12.overflow-auto",[o.isEmpty(t.source)?e(".w-col.w-col-8.w-col-push-2",e("p.fontsize-base",r.emptyState)):e('canvas[id="chart"][width="860"][height="300"]',{config:t.renderChart})])])])}},Uo={controller:function(t){var r=e.prop(t.table),n=e.prop(-1),i=function(e,t){var r=n(),i=o.isArray(e[r])&&e[r].length>1?e[r][0]:e[r],a=o.isArray(t[r])&&t[r].length>1?t[r][0]:t[r];return i<a?-1:a<i?1:0},a=function(e){var t=o.first(r()),a=void 0;n()===e?a=o.rest(r()).reverse():(n(e),a=o.rest(r()).sort(i)),r(o.union([t],a))};return a(Math.abs(t.defaultSortIndex)||0),t.defaultSortIndex<0&&a(Math.abs(t.defaultSortIndex)||0),{table:r,sortTable:a}},view:function(t,r){var n=o.first(t.table()),i=o.rest(t.table());return e(".table-outer.u-marginbottom-60",[e(".w-row.table-row.fontweight-semibold.fontsize-smaller.header",o.map(n,function(o,r){var n=function(){return t.sortTable(r)};return e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[e('a.link-hidden[href="javascript:void(0);"]',{onclick:n},[o+" ",e("span.fa.fa-sort")])])})),e(".table-inner.fontsize-small",o.map(i,function(t){return e(".w-row.table-row",o.map(t,function(t){return t=o.isArray(t)&&t.length>1?t[1]:t,e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[e("div",t)])}))}))])}},Yo={view:function(t,o){var r=o.resource;return e("#project-reminder-count.card.u-radius.u-text-center.medium.u-marginbottom-80",[e(".fontsize-large.fontweight-semibold","Total people who clicked on the Remember me button"),e(".fontsize-smaller.u-marginbottom-30","An email reminder is sent 48 hours before the end of your campaign"),e(".fontsize-jumbo",r.reminder_count)])}},Wo={controller:function(e){var t=e.dataToRedraw||{},r=function(e,r,n){r||o.map(e.children,function(e){var o=t[e.getAttribute("id")];o&&(e[o.action]=o.actionSource)})};return{listenToReplace:r}},view:function(t,o){var r=o.content;return e(".w-container",[e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6.w-col-push-3",[e(".u-text-center",[e("img.u-marginbottom-20",{src:r.icon,width:94}),e(".fontsize-large.fontweight-semibold.u-marginbottom-20",r.title),e(".fontsize-base.u-marginbottom-30",{config:t.listenToReplace},e.trust(r.text)),r.cta?e("a.btn.btn-large.btn-inline",{href:r.href,onclick:o.nextStage},r.cta):""])])])])}},Ho=o.partial(Ge.i18nScope,"projects.successful_onboard.confirm_account.refuse"),Jo={controller:function(t){var o=e.prop(""),r=e.prop(!1),n=function(){return""===o().trim()?r(!0):t.addErrorReason(o).call()};return{addErrorReason:n,errorReasonM:o,error:r}},view:function(o,r){return e(".w-row.bank-transfer-answer",[e(".w-col.w-col-6.w-col-push-3",[e(".w-form.bank-transfer-problem.card.u-radius",[e("form#successful-onboard-error",[e("a.w-inline-block.u-right.btn.btn-terciary.btn-no-border.btn-inline.fa.fa-close",{href:"#confirm_account",onclick:r.changeToAction("start")}),e("label.field-label.fontweight-semibold.u-marginbottom-20",t.t("title",Ho())),e("textarea.w-input.text-field",{placeholder:t.t("placeholder",Ho()),"class":o.error()?"error":"",onfocus:function(){return o.error(!1)},onchange:e.withAttr("value",o.errorReasonM)}),o.error()?e(".w-row",[e(".w-col.w-col-6.w-col-push-3.u-text-center",[e("span.fontsize-smallest.text-error","Required field")])]):"",e(".w-row",[e(".w-col.w-col-4.w-col-push-4",[e("a.w-button.btn.btn-medium",{href:"#confirm_account_refuse",onclick:o.addErrorReason},t.t("cta",Ho()))])])])])])])}},Xo=o.partial(Ge.i18nScope,"projects.successful_onboard.confirm_account"),Ko={view:function(o,r){return e(".w-row.bank-transfer-answer",[e(".w-col.w-col-6.w-col-push-3",[e(".w-form.bank-transfer-confirm.card.u-radius",[e("form#successful-onboard-form",[e("a.w-inline-block.u-right.btn.btn-terciary.btn-no-border.btn-inline.fa.fa-close",{href:"#confirm_account",onclick:r.changeToAction("start")}),e("label.field-label.fontweight-semibold.u-marginbottom-20",t.t("accept.title",Xo())),e(".fontsize-smaller.u-marginbottom-30",t.t("accept.info",Xo())),e(".w-row",[e(".w-col.w-col-4.w-col-push-4",[r.acceptAccountLoader()?Ge.loader():e("a.w-button.btn.btn-medium",{href:"#accept_account",onclick:r.acceptAccount},t.t("accept.cta",Xo()))])])])])])])}},Go=o.partial(Ge.i18nScope,"projects.successful_onboard.confirm_account"),$o={controller:function(t){var o={error:Jo,accept:Ko},r=e.prop("start"),n=function(){return o[r()]},i=function(e){return function(){return r(e),!1}};return{changeToAction:i,actionStage:n,currentStage:r}},view:function(r,n){var i=n.projectAccount,a=r.actionStage,l=r.currentStage,s=i.owner_document.length>14?"Juridical":"Natural",c=i.owner_document.length>14;return e(".w-container.u-marginbottom-40",[e(".u-text-center",[e(".fontsize-large.fontweight-semibold.u-marginbottom-30",t.t("title",Go()))]),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6",[e(".fontsize-base.u-marginbottom-30.card.card-terciary",[e("div",[e("span.fontcolor-secondary",t.t("person.label",Go())),t.t("person."+s+".label",Go())]),e("div",[e("span.fontcolor-secondary",t.t("person."+s+".name",Go())),i.owner_name]),i.state_inscription&&c?e("div",[e("span.fontcolor-secondary",t.t("person.state_inscription",Go())),i.state_inscription]):"",e("div",[e("span.fontcolor-secondary",t.t("person."+s+".document",Go())),i.owner_document]),e("div",[e("span.fontcolor-secondary",t.t("person.bank.name",Go())),i.bank_name]),e("div",[e("span.fontcolor-secondary",t.t("person.bank.agency",Go())),""+i.agency+(o.isEmpty(i.agency_digit)?"":"-"+i.agency_digit)]),e("div",[e("span.fontcolor-secondary",t.t("person.bank.account",Go())),i.account+"-"+i.account_digit])])]),e(".w-col.w-col-6",[e(".fontsize-base.u-marginbottom-30.card.card-terciary",[e("div",[e("span.fontcolor-secondary",t.t("person.address",Go())),i.address_street+", "+i.address_number+" "+(o.isNull(i.address_complement)?"":", "+i.address_complement)]),e("div",[e("span.fontcolor-secondary",t.t("person.neighbourhood",Go())),i.address_neighbourhood]),e("div",[e("span.fontcolor-secondary",t.t("person.city",Go())),i.address_city]),e("div",[e("span.fontcolor-secondary",t.t("person.state",Go())),i.address_state]),e("div",[e("span.fontcolor-secondary",t.t("person.zip_code",Go())),i.address_zip_code])])])]),"start"===l()?e("#confirmation-dialog.w-row.bank-transfer-answer",[e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6.w-hidden-small.w-hidden-tiny"),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6",[e("a#confirm-account.btn.btn-large",{href:"#confirm_account",onclick:r.changeToAction("accept")},"Yes")]),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6",[e("a#refuse-account.btn.btn-large.btn-terciary",{href:"#error_account",onclick:r.changeToAction("error")},"No")]),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6.w-hidden-small.w-hidden-tiny")]):e.component(a(),{projectAccount:i,changeToAction:r.changeToAction,addErrorReason:n.addErrorReason,acceptAccount:n.acceptAccount,acceptAccountLoader:n.acceptAccountLoader})])}},Qo={view:function(t,o){var r=o.projectTransfer;return e("div",[e(".modal-dialog-header",[e(".fontsize-large.u-text-center","Project Extract")]),e(".modal-dialog-content",[e("p.fontsize-small.u-marginbottom-40",["Check the extract of your project, including the fees and retentions. If you have questions about how this calculation is done, ",e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-"][target="__blank"]',"Access here"),"."]),e("div",[e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-4",[e(".text-success","+¬†Rs "+Ge.formatNumber(r.pledged,2))]),e(".w-col.w-col-8",[e("div","Total collection ("+r.total_contributions+" Supports)")])]),r.irrf_tax>0?e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-4",[e(".text-success","+ Rs "+Ge.formatNumber(r.irrf_tax,2))]),e(".w-col.w-col-8",[e("div","Retention IRRF (Income Tax withholding)")])]):"",e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-4",[e(".text-error","- Rs "+Ge.formatNumber(r.catarse_fee,2))]),e(".w-col.w-col-8",[e("div","JVN fee and means of payment ("+Ge.formatNumber(100*r.service_fee,2)+"%)¬†")])]),e(".divider.u-marginbottom-10"),e(".w-row.fontsize-base.fontweight-semibold",[e(".w-col.w-col-4",[e("div","Rs "+Ge.formatNumber(r.total_amount,2))]),e(".w-col.w-col-8",[e("div","Total to be transferred")])])])])])}},Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},tr=function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)},or=o.partial(Ge.i18nScope,"projects.successful_onboard"),rr=function(e,t){return{transfer_limit_date:Ge.momentify(e.transfer_limit_date),total_amount:Ge.formatNumber(t.total_amount,2),bank_name:e.bank_name,agency:""+e.agency+(e.agency_digit?"-"+e.agency_digit:""),account:""+e.account+(e.account_digit?"-"+e.account_digit:""),user_email:e.user_email}},nr={content:function(e,r){var n=t.translations[t.currentLocale()].projects.successful_onboard[e],i="finished"===e?{}:rr(o.first(r.account()),o.first(r.transfer())),a={};return o.map(n,function(r,n){a=o.extend({},a,er({},n,t.t(e+"."+n,or(i))))}),a}},ir=(_.partial(Ge.i18nScope,"projects.successful_onboard"),{controller:function(t){var o=i.filtersVM({project_id:"eq"}),r=e.prop([]),n=e.prop([]),a=Ge.toggleProp(!1,!0),l={start:Wo,confirm_account:$o,error_account:Wo,pending_transfer:Wo,finished:Wo},s=e.prop("start"),c=function(){return l[s()]},d=function(){return nr.content(s(),{account:r,transfer:n,showTaxModal:a})},u=i.loaderWithToken,m=function(e){_.first(r());return i.loaderWithToken($e.projectAccountError.postOptions({project_id:t.project().project_id,reason:e}))},p=i.loaderWithToken($e.projectAccount.postOptions({project_id:t.project().project_id}));o.project_id(t.project().project_id);var f=u($e.projectAccount.getRowOptions(o.parameters()));f.load().then(function(e){r(e),h()});var w=u($e.projectTransfer.getRowOptions(o.parameters()));w.load().then(n);var b=function(e){return s(e),c},g=function(){var e=_.keys(l),t=e[_.indexOf(e,s())+1];return s(t),c},h=function(){if(!f()){var e=_.first(r());if(_.isNull(e))return b("finished")();if(_.isNull(e.error_reason)&&_.isNull(e.transfer_state))return b("start")();if(!_.isNull(e.error_reason))return b("error_account")();if(!_.isNull(e.transfer_state))return"transferred"==e.transfer_state?b("finished")():b("pending_transfer")()}return!1},v=function(e){return function(){var t=m(e());return t.load().then(function(){b("error_account")()}),!1}},y=function(){return p.load().then(function(){b("pending_transfer")()}),!1};return{projectAccounts:r,projectTransfers:n,lProjectAccount:f,lProjectTransfer:w,setStage:b,nextStage:g,currentComponent:c,addErrorReason:v,acceptAccount:y,acceptAccountLoader:p,content:d,declineAccountLoader:m,loadCurrentStage:h,showTaxModal:a}},view:function(t,o){var r=_.first(t.projectAccounts()),n=_.first(t.projectTransfers()),i=t.lProjectAccount,a=t.lProjectTransfer;return e(".w-section.section",[t.showTaxModal()?e.component(Ro,{displayModal:t.showTaxModal,content:[Qo,{projectTransfer:n}]}):"",i()||a()?Ge.loader():e.component(t.currentComponent(),{projectTransfer:n,projectAccount:r,setStage:t.setStage,addErrorReason:t.addErrorReason,acceptAccount:t.acceptAccount,acceptAccountLoader:t.acceptAccountLoader,nextStage:t.nextStage,content:t.content(),dataToRedraw:{tax_link:{action:"onclick",actionSource:function(){t.showTaxModal.toggle(),e.redraw()}}}})])}}),ar={controller:function(e){var t=function(){FB&&FB.ui({method:e.messenger?"send":"share",link:e.url,href:e.url})};return{share:t}},view:function(t,o){var r=function(){return o.mobile?"w-hidden-main w-hidden-medium u-marginbottom-20 btn btn-medium btn-fb":o.big?"btn btn-fb btn-large u-marginbottom-20 w-button":o.medium?"btn "+(o.messenger?"btn-messenger":"btn-fb")+" btn-medium u-marginbottom-20 w-button":"btn btn-inline btn-medium btn-terciary u-marginright-20"};return e("button",{"class":r(),onclick:t.share},[e("span.fa",{"class":o.messenger?"fa-comment":"fa-facebook"}),o.messenger?" Messenger":" Facebook"])}},lr={controller:function(){return{displayNotification:Ge.toggleProp(!0,!1)}},view:function(t,o){return t.displayNotification()?e(".flash.w-clearfix.card.card-notification.u-radius.zindex-20",{"class":o.error?"card-error":""},[e('img.icon-close[src="/assets/catarse_bootstrap/x.png"][width="12"][alt="fechar"]',{onclick:t.displayNotification.toggle}),e(".fontsize-small",o.message)]):e("span")}},sr={controller:function(t){var o=e.prop(!1),r=function(e){var t=void 0,o=void 0;document.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(e),t.select()):window.getSelection&&(o=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),o.removeAllRanges(),o.addRange(t))},n=function(t,n){var i=void 0;n||!function(){var n=document.getElementById("copy-textarea");t.onclick=function(){r(n),i=document.execCommand("copy"),i?(o(!0),e.redraw()):n.blur()}}()};return{setClickHandler:n,showSuccess:o}},view:function(t,o){return e("#clipboard.w-row",[e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",e("textarea#copy-textarea.positive.text-field.w-input",{style:"margin-bottom:0;"},o.value)),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",e(".btn.btn-medium.btn-no-border.btn-terciary.fa.fa-clipboard.w-button",{config:t.setClickHandler})),t.showSuccess()?e.component(lr,{message:"Link copied"}):""])}},cr={view:function(t,o){var r=o.project;return e(".card.card-secondary.u-marginbottom-20.u-radius.w-clearfix",[e(".fontsize-base.fontweight-semibold.u-marginbottom-30.u-text-center","Invite your friends to support your campaign"),e(".w-row",[e(".w-sub-col.u-marginbottom-20.w-col.w-col-4",[e.component(ar,{url:Ge.projectFullPermalink(r)+"?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share_insights",medium:!0})]),e(".w-sub-col.u-marginbottom-20.w-col.w-col-4",[e.component(ar,{messenger:!0,url:Ge.projectFullPermalink(r)+"?ref=facebook&utm_source=facebook.com&utm_medium=messenger&utm_campaign=project_share_insights",medium:!0})]),e(".w-col.w-col-4",[e(".w-form",[e("form[data-name='Email Form 2'][id='email-form-2'][name='email-form-2']",[e.component(sr,{value:Ge.projectFullPermalink(r)+"?ref=project_link"})])])])])])}},dr=o.partial(Ge.i18nScope,"projects.insights"),ur={controller:function(r){var n=i.filtersVM({project_id:"eq"}),a=Ge.toggleProp(!1,!0),l=e.prop([]),s=e.prop([]),c=(e.prop([]),i.loaderWithToken),d=function(){try{var t=e.route.param("project_id");n.project_id(t)}catch(o){n.project_id(r.root.getAttribute("data-id"))}};"true"===Ge.paramByName("online_success")&&a.toggle(),d();var u=c($e.projectDetail.getRowOptions(n.parameters()));u.load().then(l);var m=c($e.projectContributionsPerDay.getRowOptions(n.parameters()));m.load().then(s);var p=[["state","Support","Rs Supported (% Of total)"]],f=function(t){return o.isEmpty(t)?[]:o.map(o.first(t).source,function(t){var o=[];return o.push(t.state_acronym||"Outro/other"),o.push(t.total_contributions),o.push([t.total_contributed,[e('input[type="hidden"][value="'+t.total_contributed+'"'),"Rs ",Ge.formatNumber(t.total_contributed,2,3),e("span.w-hidden-small.w-hidden-tiny"," ("+t.total_on_percentage.toFixed(2)+"%)")]]),p.push(o)})},w=c($e.projectContributionsPerLocation.getRowOptions(n.parameters()));w.load().then(f);var b=[[t.t("ref_table.header.origin",dr()),t.t("ref_table.header.contributions",dr()),t.t("ref_table.header.amount",dr())]],g=function(r){return o.isEmpty(r)?[]:o.map(o.first(r).source,function(o){var r=/(ctrse_[\D]*)/,n=r.exec(o.referral_link),i=[];return n&&(o.referral_link="_"===n[0].substr(-1)?n[0].substr(0,n[0].length-1):n[0]),i.push(o.referral_link?t.t("referral."+o.referral_link,dr({defaultValue:o.referral_link})):t.t("referral.others",dr())),i.push(o.total),i.push([o.total_amount,[e('input[type="hidden"][value="'+o.total_contributed+'"'),"Rs ",Ge.formatNumber(o.total_amount,2,3),e("span.w-hidden-small.w-hidden-tiny"," ("+o.total_on_percentage.toFixed(2)+"%)")]]),b.push(i)})},h=c($e.projectContributionsPerRef.getRowOptions(n.parameters()));return h.load().then(g),{l:u,lContributionsPerRef:h,lContributionsPerLocation:w,lContributionsPerDay:m,displayModal:a,filtersVM:n,projectDetails:l,contributionsPerDay:s,contributionsPerLocationTable:p,contributionsPerRefTable:b}},view:function(r){var n=o.first(r.projectDetails())||{user:{name:"Director"}};return r.l()||(n.user.name=n.user.name||"Director"),e(".project-insights",r.l()?Ge.loader():[n.is_owner_or_admin?e.component(Do,{project:e.prop(n)}):"",r.displayModal()?e.component(Ro,{displayModal:r.displayModal,content:[Fo]}):"",e(".w-container","successful"===n.state?e.component(ir,{project:e.prop(n)}):[e(".w-row.u-marginbottom-40",[e(".w-col.w-col-8.w-col-push-2",[e(".fontweight-semibold.fontsize-larger.lineheight-looser.u-marginbottom-10.u-text-center.dashboard-header",t.t("campaign_title",dr())),"online"===n.state?e.component(cr,{project:n}):"","draft"===n.state?e.component(No,{resource:n}):"",e("p."+n.state+"-project-text.u-text-center.fontsize-small.lineheight-loose",["flex"===n.mode&&o.isNull(n.expires_at)&&"draft"!==n.state?e("span",[t.t("finish_explanation",dr()),e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/213783503-tudo-sobre-Prazo-da-campanha"][target="_blank"]',t.t("know_more",dr()))]):e.trust(t.t("campaign."+n.mode+"."+n.state,dr({username:n.user.name,expires_at:Ge.momentify(n.zone_expires_at),sent_to_analysis_at:Ge.momentify(n.sent_to_analysis_at)})))])])])]),"draft"===n.state?e.component(Oo,{project:n}):"",n.is_published?[e(".divider"),e(".w-section.section-one-column.section.bg-gray.before-footer",[e(".w-container",[e.component(Io,{project:e.prop(n)}),e(".w-row",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[r.lContributionsPerDay()?Ge.loader():e.component(Bo,{collection:r.contributionsPerDay,label:t.t("amount_per_day_label",dr()),dataKey:"total_amount",xAxis:function(e){return Ge.momentify(e.paid_at)},emptyState:t.t("amount_per_day_empty",dr())})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[r.lContributionsPerDay()?Ge.loader():e.component(Bo,{collection:r.contributionsPerDay,label:t.t("contributions_per_day_label",dr()),dataKey:"total",xAxis:function(e){return Ge.momentify(e.paid_at)},emptyState:t.t("contributions_per_day_empty",dr())})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e(".project-contributions-per-ref",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",[t.t("ref_origin_title",dr())]),r.lContributionsPerRef()?Ge.loader():o.isEmpty(o.rest(r.contributionsPerRefTable))?e(".card.u-radius.medium.u-marginbottom-60",e(".w-row.u-text-center.u-margintop-40.u-marginbottom-40",e(".w-col.w-col-8.w-col-push-2",e("p.fontsize-base",t.t("contributions_per_ref_empty",dr()))))):e.component(Uo,{table:r.contributionsPerRefTable,defaultSortIndex:-2})])])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e(".project-contributions-per-ref",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",t.t("location_origin_title",dr())),r.lContributionsPerLocation()?Ge.loader():o.isEmpty(o.rest(r.contributionsPerLocationTable))?e(".card.u-radius.medium.u-marginbottom-60",e(".w-row.u-text-center.u-margintop-40.u-marginbottom-40",e(".w-col.w-col-8.w-col-push-2",e("p.fontsize-base",t.t("contributions_per_location_empty",dr()))))):e.component(Uo,{
table:r.contributionsPerLocationTable,defaultSortIndex:-2})])])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e.component(Yo,{resource:n})])])])]),"online"!==n.state||!n.is_admin_role&&0!=n.pledged?"":e.component(Lo,{project:n})]:""])}},mr={controller:function(t){var o=function(){Ge.scrollTop(),t.showPreview(!1)},r=function(r){r.preventDefault();var n={title:t.title(),comment_html:t.comment_html(),reward_id:t.reward_id>=1?t.reward_id:null,recipients:t.reward_id>=1?"reward":"-1"==t.reward_id?"public":"backers"};return e.request({method:"POST",url:"/projects/"+t.project_id+"/posts.json",data:{project_post:n,project:t.project_id},config:Ge.setCsrfToken}).then(function(){t.showSuccess(!0),t.comment_html(""),t.title(""),o(),e.redraw()})["catch"](function(o){t.errors("Error sending message."),t.showError(!0),e.redraw()})};return{sendNotification:r,togglePreview:o}},view:function(t,o){var r=o.comment_html(),n=o.title(),i=o.reward_id>1?e(".fontsize-small.u-marginbottom-30",["The news above will be sent by email to the ",e("span.fontweight-semibold",o.rewardText)," And it will stay ",e("span.fontweight-semibold","Visible on the platform only for these supporters.")]):"-1"==o.reward_id?e(".fontsize-small.u-marginbottom-30",["The news above will be  ",e("span.fontweight-semibold","sent by email to everyone")," and will be ",e("span.fontweight-semibold","publicly visible "),"on the platform."]):e(".fontsize-small.u-marginbottom-30",[e("span"," The news above will be  "),e("span.fontweight-semibold","sent by email to all supporters"),e("span"," and it will stay "),e("span.fontweight-semibold","visible only to those on the platform.")]);return e("div",[e(".dashboard-header.u-text-center",e(".w-container",e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e(".fontsize-larger.fontweight-semibold.lineheight-tight","Review your news before submitting!")),e(".w-col.w-col-3")]))),e(".section",[e(".w-container",e(".card.u-marginbottom-60.u-radius.w-row",[e(".w-col.w-col-1"),e(".u-marginbottom-30.u-margintop-30.w-col.w-col-10.w-hidden-small.w-hidden-tiny",[e(".fontcolor-secondary.fontsize-small.u-text-center","16/01/2017"),e(".fontsize-larger.fontweight-semibold.u-marginbottom-30.u-text-center",n),e(".fontsize-base",e.trust(r))]),e(".w-col.w-col-1")])),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",i),e(".w-col.w-col-3")]),e(".u-marginbottom-20.w-row",[e(".w-col.w-col-3"),e("._w-sub-col.w-col.w-col-4",e("button.btn.btn-large",{onclick:t.sendNotification},[e("span.fa.fa-paper-plane","")," ",e.trust("&nbsp;"),"To send"])),e(".w-col.w-col-2",e("button.btn.btn-large.btn-terciary",{onclick:t.togglePreview},"To edit")),e(".w-col.w-col-3")])])])}},pr={controller:function(t){var r=void 0,n=e.prop(!1),a=e.prop(!1),l=e.prop(!1),s=e.prop(!1),c=e.prop(!1),d=e.prop(),u=i.loaderWithToken,m=e.prop(""),p={title:e.prop(""),comment_html:e.prop(""),reward_id:e.prop("-1")},f=i.filtersVM({project_id:"eq"}),w=function(){return _()?h()?(Ge.scrollTop(),n(!0)):(m("Mensagem n√£o pode ficar em branco."),l(!0)):(m("T√≠tulo n√£o pode ficar em branco."),l(!0)),!1},b=t.root.getAttribute("data-id"),g=e.prop([]),h=function(){var e=String(p.comment_html());return 0==e.length&&c(!0),!c()},_=function(){var e=String(p.title());return 0==e.length&&s(!0),!s()},v=function(e){var t=o.find(Yt.rewards(),function(t){return t.id==e});return"Apoiadores da recompensa R$"+t.minimum_value+" - "+(t.description.substring(0,70)+"...")},y=function(e){if("public"==e.recipients)return"Todo mundo (apoiadores e n√£o apoiadores)";if("backers"==e.recipients)return"Todos os apoiadores";var t=o.find(Yt.rewards(),function(t){return t.id==e.reward_id});return t?v(t.id):"..."},k=e.prop(-1),x=function(t){return function(){return k(t.id),e.redraw(!0),r(),!1}},j=function(e,t){t||(r=function(){return e.submit()})};$e.projectPostDetail.pageSize(!1),f.project_id(b);var z=i.loaderWithToken($e.projectPostDetail.getPageOptions(o.extend(f.parameters(),{order:"created_at.desc"}))),C=u($e.projectDetail.getRowOptions(f.parameters()));return z.load().then(d),Yt.fetchRewards(b),C.load().then(g),{listVM:z,l:C,projectPosts:d,showRecipientes:y,fields:p,showPreview:n,togglePreview:w,project_id:b,deletePost:x,rewardText:v,errors:m,showSuccess:a,titleHasError:s,commentHasError:c,showError:l,setPostDeletionForm:j,toDeletePost:k,projectDetails:g}},view:function(t){var r=o.first(t.projectDetails()),n=o.filter(Yt.rewards(),function(e){return e.paid_count>0});return r?e(".project-posts",r.is_owner_or_admin?e.component(Do,{project:e.prop(r)}):"",t.showPreview()?e.component(mr,{showError:t.showError,showSuccess:t.showSuccess,errors:t.errors,showPreview:t.showPreview,project_id:t.project_id,comment_html:t.fields.comment_html,title:t.fields.title,reward_id:t.fields.reward_id(),rewardText:t.fields.reward_id()>=1?t.rewardText(t.fields.reward_id()):null}):[t.showSuccess()?e.component(lr,{message:"Message sent successfully"}):"",t.showError()?e.component(lr,{message:t.errors(),error:!0}):"",e(".dashboard-header.u-text-center",e(".w-container",e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e(".fontsize-larger.fontweight-semibold.lineheight-tight","Submit a news story to your supporters")),e(".w-col.w-col-3")]))),e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",[e(".card.card-terciary.medium.u-marginbottom-80.w-form",[e("form",[e("label.field-label.fontweight-semibold","Recipients"),e("select.positive.text-field.w-select",{onchange:e.withAttr("value",t.fields.reward_id)},[e("option[value='-1']",{selected:!0},"Everyone (supporters and non-supporters)"),e("option[value='0']","All supporters"),o.map(n,function(o){return e("option[value='"+o.id+"']",t.rewardText(o.id))})]),e("label.field-label.fontweight-semibold","Title"),e("input.positive.text-field.w-input[id='post_title'][maxlength='256'][type='text']",{name:"posts[title]",value:t.fields.title(),onfocus:function(){return t.titleHasError(!1)},"class":t.titleHasError()?"error":"",onchange:e.withAttr("value",t.fields.title)}),e("label.field-label.fontweight-semibold","Text"),e(".preview-container.u-marginbottom-40",{"class":t.commentHasError()?"error":"",onclick:function(){return t.commentHasError(!1)}},Ge.redactor("posts[comment_html]",t.fields.comment_html)),e(".u-marginbottom-20.w-row",[e(".w-col.w-col-3"),e("._w-sub-col.w-col.w-col-6",e("button.btn.btn-large",{onclick:t.togglePreview},"Preview")),e(".w-col.w-col-3")])])]),e(".fontsize-large.fontweight-semibold.u-marginbottom-40","News already sent"),e(".table-outer.u-marginbottom-60",[e(".fontsize-smaller.fontweight-semibold.header.table-row.w-row",[e(".table-col.w-col.w-col-5",e("div","Title")),e(".table-col.u-text-center.w-col.w-col-3",e("div","Sent")),e(".table-col.u-text-center.w-col.w-col-3",e("div","Open")),e(".table-col.w-col.w-col-1")]),t.projectPosts()?e(".fontsize-small.table-inner",[o.map(t.projectPosts(),function(o){return e(".table-row.w-row",[e(".table-col.w-col.w-col-5",[e("a.alt-link.fontsize-base[href='/projects/"+r.project_id+"/posts/"+o.id+"#posts'][target='_blank']",o.title),e(".fontcolor-secondary.fontsize-smallest",[e("span.fontweight-semibold","Sent in: "),Ge.momentify(o.created_at,"DD/MM/YYYY, h:mm A")]),e(".fontcolor-secondary.fontsize-smallest",[e("span.fontweight-semibold","Recipients: "),t.showRecipientes(o)])]),e(".table-col.u-text-center.w-col.w-col-3",e(".fontsize-base",o.delivered_count)),e(".table-col.u-text-center.w-col.w-col-3",e(".fontsize-base",o.open_count)),e(".table-col.w-col.w-col-1",e("button.btn.btn-no-border.btn-small.btn-terciary.fa.fa-lg.fa-trash",{onclick:t.deletePost(o)}))])}),e("form.w-hidden",{action:"/en/projects/"+r.project_id+"/posts/"+t.toDeletePost(),method:"POST",config:t.setPostDeletionForm},[e("input[name='utf8'][type='hidden'][value='‚úì']"),e("input[name='_method'][type='hidden'][value='delete']"),e("input[name='authenticity_token'][type='hidden'][value='"+Ge.authenticityToken()+"']")])]):Ge.loader()])]),e(".w-col.w-col-1")])))]):Ge.loader()}},fr=_.partial(Ge.i18nScope,"pages.jobs"),wr={view:function(o,r){return[e(".w-section.hero-jobs.hero-medium",[e(".w-containe.u-text-center",[e('img.icon-hero[src="/assets/logo-white.png"]'),e(".u-text-center.u-marginbottom-20.fontsize-largest",t.t("title",fr()))])]),e(".w-section.section",[e(".w-container.u-margintop-40",[e(".w-row",[e(".w-col.w-col-8.w-col-push-2.u-text-center",[e(".fontsize-large.u-marginbottom-30",t.t("info",fr())),e('a[href="/projects/new"].w-button.btn.btn-large.btn-inline',t.t("cta",fr()))])])])])]}},br={controller:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.prop([]),n=e.prop({});return $e.statistic.getRow().then(r),t.socket&&o.isFunction(t.socket.on)&&t.socket.on("new_paid_contributions",function(t){n(JSON.parse(t.payload)),$e.statistic.getRow().then(r),e.redraw()}),{pageStatistics:r,notificationData:n}},view:function(t){var r=t.notificationData();return e(".w-section.bg-stats.section.min-height-100",[e(".w-container.u-text-center",o.map(t.pageStatistics(),function(t){return[e('img.u-marginbottom-60[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/55ada5dd11b36a52616d97df_symbol-catarse.png"]'),e(".fontcolor-negative.u-marginbottom-40",[e(".fontsize-megajumbo.fontweight-semibold","Rs "+Ge.formatNumber(t.total_contributed,2,3)),e(".fontsize-large","Donated to campaigns published here")]),e(".fontcolor-negative.u-marginbottom-60",[e(".fontsize-megajumbo.fontweight-semibold",t.total_contributors),e(".fontsize-large","People have already supported at least 1 campaign in JVN")])]})),o.isEmpty(r)?"":e(".w-container",[e("div",[e(".card.u-radius.u-marginbottom-60.medium",[e(".w-row",[e(".w-col.w-col-4",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4",[e('img.thumb.u-round[src="'+Ge.useAvatarOrDefault(r.user_image)+'"]')]),e(".w-col.w-col-8.w-col-small-8",[e(".fontsize-large.lineheight-tight",r.user_name)])])]),e(".w-col.w-col-4.u-text-center.fontsize-base.u-margintop-20",[e("div","Just supported the")]),e(".w-col.w-col-4",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4",[e('img.thumb-project.u-radius[src="'+r.project_image+'"][width="75"]')]),e(".w-col.w-col-8.w-col-small-8",[e(".fontsize-large.lineheight-tight",r.project_name)])])])])])])]),e(".u-text-center.fontsize-large.u-marginbottom-10.fontcolor-negative",[e('a.link-hidden.fontcolor-negative[href="https://github.com/catarse"][target="_blank"]',[e("span.fa.fa-github",".")," Open Source with pride! "])])])}},gr={view:function(t,r){var n=r.filterBuilder,i=o.findWhere(n,{label:"payment_state"}),a=o.findWhere(n,{label:"reward_filter"}),l=o.findWhere(n,{label:"delivery_filter"}),s=o.findWhere(n,{component:tt});r.filterVM.project_id();return a.data.options=r.mapRewardsToOptions(),e(".w-section.dashboard-header",e(".w-container",[e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e(".fontsize-larger.fontweight-semibold.lineheight-looser.u-marginbottom-30.u-text-center","Support report")),e(".w-col.w-col-3")]),e(".w-form",[e("form",{onsubmit:r.submit},e(".w-row",[e(".w-col.w-col-8",e(".w-row",[e.component(i.component,i.data),e.component(a.component,a.data),e.component(l.component,l.data)])),e(".w-col.w-col-4",e(".u-margintop-20.w-row",[e.component(s.component,s.data)]))]))])]))}},hr={controller:function(e){var t=e.project(),r=function(t){return o.contains(e.selectedContributions(),t.id)},n=function(t){var n=$("input:checkbox").is(":checked");return e.selectedAny(n),r(t)?e.selectedContributions(o.without(e.selectedContributions(),t.id)):e.selectedContributions().push(t.id),!0},i=function(e){var o={online:{paid:"text-success.fa-circle",refunded:"text-error.fa-circle",pending_refund:"text-error.fa-circle",pending:"text-waiting.fa-circle",refused:"text-error.fa-circle"},failed:{paid:"text-error.fa-circle-o",refunded:"text-refunded.fa-circle",pending_refund:"text-refunded.fa-circle-o",pending:"text-refunded",refused:"text-refunded"},waiting_funds:{paid:"text-success.fa-circle",refunded:"text-error.fa-circle",pending_refund:"text-error.fa-circle",pending:"text-waiting.fa-circle",refused:"text-error.fa-circle"},successful:{paid:"text-success.fa-circle",refunded:"text-error.fa-circle",pending_refund:"text-error.fa-circle",pending:"text-waiting.fa-circle",refused:"text-error.fa-circle"}};return o[t.state][e]};return{stateClass:i,checked:r,selectContribution:n}},view:function(t,r){var n=r.contribution(),i=o.isEmpty(n.profile_img_thumbnail)?"/assets/catarse_bootstrap/user.jpg":n.profile_img_thumbnail,a=n.reward||{minimum_value:0,description:"No reward selected"};return e(".w-clearfix.card"+(t.checked(n)?".card-alert":""),[e(".w-row",[e(".w-col.w-col-1.w-col-small-1.w-col-tiny-1",e(".w-inline-block",e(".w-checkbox.w-clearfix",e("input.w-checkbox-input[type='checkbox']",{checked:t.checked(n),value:n.id,onclick:function(){return t.selectContribution(n)}})))),e(".w-col.w-col-11.w-col-small-11.w-col-tiny-11",e(".w-row",[e(".w-col.w-col-1.w-col-tiny-1",[e("img.user-avatar.u-marginbottom-10[src='"+i+"']")]),e(".w-col.w-col-11.w-col-tiny-11",[e(".w-row",[e(".w-col.w-col-3",[e(".fontcolor-secondary.fontsize-mini.fontweight-semibold",Ge.momentify(n.created_at,"DD/MM/YYYY, HH:mm")),e(".fontweight-semibold.fontsize-smaller.lineheight-tighter",n.user_name),e(".fontsize-smallest.lineheight-looser",[n.has_another?[e("a.link-hidden-light.badge.badge-light","+1 support ")]:"",n.anonymous?e("span.fa.fa-eye-slash.fontcolor-secondary",e('span.fontcolor-secondary[style="font-size:11px;"]'," Non-public support")):""]),e(".fontsize-smallest.lineheight-looser",n.email)]),e(".w-col.w-col-3",[e(".lineheight-tighter",[e("span.fa.fontsize-smallest."+t.stateClass(n.state))," ¬†¬†",e("span.fontsize-large","Rs "+Ge.formatNumber(n.value,2,3))])]),e(".w-col.w-col-3.w-hidden-small.w-hidden-tiny",[e("div","error"==n.delivery_status?e("span.badge.badge-attention.fontsize-smaller","Error sending"):"delivered"==n.delivery_status?e("span.badge.badge-success.fontsize-smaller","Sent"):"received"==n.delivery_status?e("span.fontsize-smaller.badge.badge-success",[e("span.fa.fa-check-circle","")," Received"]):""),e(".fontsize-smallest.fontweight-semibold","Reward:¬†Rs "+Ge.formatNumber(a.minimum_value,2,3)),e(".fontsize-smallest",a.description.substring(0,80)+"...")])])])]))])])}},_r=postgrest.filtersVM({full_text_index:"@@",state:"in",reward_id:"eq",delivery_status:"eq",project_id:"eq"}),vr=function(e){return(e||"").toString().trim()};_r.state(""),_r.order({id:"desc"}),_r.full_text_index.toFilter=function(){var e=vr(_r.full_text_index());return e&&l(e)||void 0},_r.getAllContributions=function(e){$e.projectContribution.pageSize(!1);var t=postgrest.loaderWithToken($e.projectContribution.getPageOptions(e.parameters())).load();return $e.projectContribution.pageSize(9),t},_r.updateStatus=function(t){return e.request({method:"PUT",url:"/projects/"+_r.project_id()+"/contributions/update_status.json",data:t,config:Ge.setCsrfToken})},_r.withNullParameters=function(){var e=postgrest.filtersVM({full_text_index:"@@",state:"in",reward_id:"is",delivery_status:"eq",project_id:"eq"});return e.full_text_index(_r.full_text_index()),e.order(_r.order()),e.state(_r.state()),e.reward_id(_r.reward_id()),e.delivery_status(_r.delivery_status()),e.project_id(_r.project_id()),e.parameters()};var yr={controller:function(t){var r=Ge.toggleProp(!1,!0),n=e.prop(!1),i=e.prop(!1),a=e.prop([]),l=function(){_r.getAllContributions(t.filterVM).then(function(e){var t;(t=a()).push.apply(t,tr(o.pluck(e,"id"))),n(!0)})},s=function(){a([]),n(!1)},c=function(t){var o={contributions:a(),delivery_status:t};_r.updateStatus(o).then(function(){i(!0),r.toggle(),e.redraw()})["catch"](function(t){e.redraw()})};return{showSuccess:i,selectAll:l,unselectAll:s,updateStatus:c,showSelectedMenu:r,selectedAny:n,selectedContributions:a}},view:function(t,r){var n=r.list;return e(".w-section.bg-gray.before-footer.section",[t.showSuccess()?e.component(lr,{message:"As informa√ß√µes foram atualizadas"}):"",e(".w-container",[e(".u-marginbottom-40",e(".w-row",[e(".u-text-center-small-only.w-col.w-col-2",e(".fontsize-base.u-marginbottom-10",[e("span.fontweight-semibold",n.isLoading()?"":n.total())," Supports"])),e(".w-col.w-col-6",[t.selectedAny()?e("button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button",{onclick:t.unselectAll},"Deselect All"):e("button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button",{onclick:t.selectAll},"Select All"),t.selectedAny()?e("._w-inline-block",[e("button.btn.btn-inline.btn-small.btn-terciary.w-button",{onclick:t.showSelectedMenu.toggle},["Mark ",e("span.w-hidden-tiny","delivery")," as"]),t.showSelectedMenu()?e(".card.dropdown-list.dropdown-list-medium.u-radius.zindex-10[id='transfer']",[e("a.dropdown-link.fontsize-smaller",{onclick:function(){return t.updateStatus("delivered")}},"Sent"),e("a.dropdown-link.fontsize-smaller",{onclick:function(){return t.updateStatus("error")}},"Error sending")]):""]):""]),e(".w-clearfix.w-col.w-col-4",e('a.alt-link.fontsize-small.lineheight-looser.u-right[href="/projects/'+r.project().project_id+'/download_reports"]',[e("span.fa.fa-download","")," Baixar relat√≥rios"]))])),o.map(n.collection(),function(o){var n=e.prop(o);return e.component(hr,{project:r.project,contribution:n,selectedContributions:t.selectedContributions,selectedAny:t.selectedAny})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-2.w-col-push-5",[n.isLoading()?Ge.loader():n.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:n.nextPage},"Load more")])])])])])}},kr=o.partial(Ge.i18nScope,"projects.contributions_report.legend_labels"),xr={controller:function(e){var o=function(e){return t.t(e,kr())};return{stages:{online:[{label:o("online.paid.label"),text:o("online.paid.text"),i_class:".fa.fa-circle.text-success"},{label:o("online.pending.label"),text:o("online.pending.text"),i_class:".fa.fa-circle.text-waiting"},{label:o("online.refunded.label"),text:o("online.refunded.text"),i_class:".fa.fa-circle.text-error"}],failed:[{label:o("failed.pending_refund.label"),text:o("failed.pending_refund.text"),i_class:".fa.fa-circle-o.text-refunded"},{label:o("failed.refunded.label"),text:o("failed.refunded.text"),i_class:".fa.fa-circle.text-refunded"},{label:o("failed.paid.label"),text:o("failed.paid.text"),i_class:".fa.fa-circle-o.text-error"}],successful:[{label:o("successful.paid.label"),text:o("successful.paid.text"),i_class:".fa.fa-circle.text-success"},{label:o("successful.refunded.label"),text:o("successful.refunded.text"),i_class:".fa.fa-circle.text-error"}]}}},view:function(t,r){var n=o.first(r.project()),i="waiting_funds"==n.state?"online":n.state;return e("div",[e(".modal-dialog-header",[e(".fontsize-large.u-text-center","Support Status")]),e(".modal-dialog-content",o.map(t.stages[i],function(t,o){return e(".u-marginbottom-20",[e(".fontsize-small.fontweight-semibold",[e("span"+t.i_class)," ¬†"+t.label]),e(".fontsize-smaller",e.trust(t.text))])}))])}},jr={controller:function(e){return{modalToggle:Ge.toggleProp(!1,!0)}},view:function(t,o){return e("span",[o.text,e.trust("&nbsp;"),e('a.fa.fa-question-circle.fontcolor-secondary[href="#"]',{onclick:t.modalToggle.toggle},""),t.modalToggle()?e.component(Ro,{displayModal:t.modalToggle,content:[xr,{project:o.project}]}):""])}},zr={controller:function(t){var r=i.paginationVM($e.projectContribution,"id.desc",{Prefer:"count=exact"}),n=_r,a=e.prop([{}]),l=e.prop([]),s=e.prop([]),c=function(e){var t=[{value:"",option:"All"}],o={online:[{value:"paid",option:"Confirmed"},{value:"pending",option:"Started"},{value:"refunded,chargeback,deleted,pending_refund",option:"Contested"}],waiting_funds:[{value:"paid",option:"Confirmed"},{value:"pending",option:"Started"},{value:"refunded,chargeback,deleted,pending_refund",option:"Contested"}],failed:[{value:"pending_refund",option:"Refund in progress"},{value:"refunded",option:"Refunded"},{value:"paid",option:"Refund not started"}],successful:[{value:"paid",option:"Confirmed"},{value:"refunded,chargeback,deleted,pending_refund",option:"Contested"}]};t=t.concat(o[e]||[]),s(t)},d=[{component:tt,data:{inputWrapperClass:".w-input.text-field",btnClass:".btn.btn-medium",vm:n.full_text_index,placeholder:"Search by name or email of the supporter"}},{label:"reward_filter",component:mt,data:{label:"Reward selected",name:"reward_id",vm:n.reward_id,wrapper_class:"._w-sub-col.w-col.w-col-4",options:[]}},{label:"delivery_filter",component:mt,data:{label:"Delivery status",name:"delivery_status",vm:n.delivery_status,wrapper_class:".w-col.w-col-4",options:[{value:"",option:"All"},{value:"undelivered",option:"Not sent"},{value:"delivered",option:"Sent"},{value:"error",option:"Error sending"},{value:"received",option:"Received"}]}},{label:"payment_state",component:mt,data:{custom_label:[jr,{text:"Support Status",project:a}],name:"state",vm:n.state,wrapper_class:"._w-sub-col.w-col.w-col-4",options:s}}],u=function(){return"null"===n.reward_id()?r.firstPage(n.withNullParameters()).then(null):r.firstPage(n.parameters()).then(null),!1};n.project_id(t.root.getAttribute("data-id"));var m=i.loaderWithToken($e.rewardDetail.getPageOptions({project_id:"eq."+n.project_id()})),p=i.loaderWithToken($e.projectDetail.getPageOptions({project_id:"eq."+n.project_id()}));m.load().then(l),p.load().then(function(e){a(e),c(o.first(e).state)});var f=function(){var e=[];return m()||(e=o.map(l(),function(e){return{value:e.id,option:"Rs "+Ge.formatNumber(e.minimum_value,2,3)+" - "+e.description.substring(0,20)}})),e.unshift({value:null,option:"No reward"}),e.unshift({value:"",option:"All"}),e};return r.collection().length||r.firstPage(n.parameters()),{listVM:r,filterVM:n,filterBuilder:d,submit:u,lReward:m,lProject:p,rewards:l,project:a,mapRewardsToOptions:f}},view:function(t,r){var n=t.listVM;return t.lProject()?Ge.loader():[e.component(Do,{project:e.prop(o.first(t.project()))}),e.component(gr,{submit:t.submit,filterBuilder:t.filterBuilder,form:t.filterVM.formDescriber,mapRewardsToOptions:t.mapRewardsToOptions,filterVM:t.filterVM}),e(".divider.u-margintop-30"),e.component(yr,{submit:t.submit,list:n,filterVM:t.filterVM,project:e.prop(o.first(t.project()))})]}},Cr={controller:function(e){return ko.init(e.project_id,e.project_user_id),ko},view:function(t){var o=t.currentProject;return o().is_owner_or_admin?e.component(Do,{project:o}):""}},Sr=_.partial(Ge.i18nScope,"layouts"),Pr={view:function(o){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.action||"/en/explore?ref=ctrse_explore_pgsearch",i=r.method||"GET";return e("#search.w-container.w-hidden-main.w-hidden-medium",[e(".w-row",[e(".w-col.w-col-10.u-marginbottom-20",[e(".w-form",[e("form#email-form",{action:n,method:i},[e(".w-row",[e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e('input[type="text"][name="pg_search"][placeholder='+t.t("header.search",Sr())+"]#pg_search_inside.w-input.text-field.negative.prefix")]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e("button.w-inline-block.btn.btn-dark.btn-attached.postfix",[e('img.header-lupa[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/54e44178b2135fce2b6cd235_lupa.png"]')])])])])])])])])}},Tr={view:function(t,o){var r=o.category;return e(".w-col.w-col-2.w-col-small-6.w-col-tiny-6",[e("a.w-inline-block.btn-category[href='#by_category_id/"+r.id+"']",[e("div",[r.name,e("span.badge.explore",r.online_projects)])])])}},Mr=(o.partial(Ge.i18nScope,"fb_connect"),o.partial(Ge.i18nScope,"fb_connect")),Ar={controller:function(e){return{largeBg:function(){return!o.isUndefined(e)&&(!o.isUndefined(e.largeBg)&&e.largeBg)}()}},view:function(o,r){return e(".w-section.section"+(o.largeBg?".bg-backs-carrosel.section-large":""),[e(".w-container",[e(".card.card-big",[e(".w-row",[e(".w-col.w-col-8",[e(".fontsize-largest.u-marginbottom-20",t.t("find_project",Mr())),e(".fontsize-small",t.t("with",Mr()))]),e(".w-col.w-col-4",[e('a.w-button.btn.btn-fb.btn-large.u-margintop-30.u-marginbottom-10[href="/connect-facebook"]',t.t("connect",Mr())),e(".fontsize-smallest.fontcolor-secondary.u-text-center",t.t("oath",Mr()))])])])])])}},Er=o.partial(Ge.i18nScope,"pages.explore"),Dr={controller:function(t){var r=i.filtersVM,n=Ht(),a=n.filters,l=Ge.paramByName("filter")||"all",s="all",c=e.prop(a[l]),d=function(e){c(a[e]),j()},u=function(){c(a[l]),n.setContextFilters(["finished","all","contributed_by_friends"])},m=Ge.getUser()||{},p=(m.id,m.has_fb_auth),f=function(t){return e.component(Mo,{el:".tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary",text:t,width:380})},w=function(){var t="",o="",r=!1;return"all"===c().keyName?(r=!0,t="Sorted by popularity ",o="Our popularity factor is a mix of JVN team`s selection with a value that is calculated by the speed of collection of the project"):"finished"===c().keyName?(r=!0,t="Sorted by Rs achieved ",o="The projects with the highest collection goal achieved are at the top"):"contributed_by_friends"===c().keyName&&(r=!0,t="Projects supported by friends ",o="Projects supported by friends"),r?e(".fontsize-smaller.fontcolor-secondary",[t,f(o)]):""},b=e.prop(!1),g=e.prop([]),h=e.prop(),_=function(e){return o.find(g(),function(t){return t.id===parseInt(e)})},v=o.compose(_,h),y=function(){return $e.category.getPageWithToken(r({}).order({name:"asc"}).parameters()).then(g)},k=function(e){return o.size(o.filter(e,function(e){return e.score>=1}))>=3},x=e.prop({collection:e.prop([]),isLoading:function(){return!0},isLastPage:function(){return!0}}),j=function(){var t=window.location.hash.match(/\#([^\/]*)\/?(\d+)?/),n=t&&t[2]&&_(t[2]),l=function(){var e=r({category_id:"eq"});return t&&t[1]&&a[t[1]]||n&&{title:n.name,filter:e.category_id(n.id)}},s=l()||c(),d=Ge.paramByName("pg_search"),u=function(){var t=i.loaderWithToken($e.projectSearch.postOptions({query:d})),o={collection:e.prop([]),isLoading:t,isLastPage:function(){return!0},nextPage:function(){return!1}};return t.load().then(o.collection),o},m=function(){var e=i.paginationVM($e.project),t=o.extend({},c().filter.parameters(),s.filter.order({open_for_contributions:"desc",state_order:"asc",state:"desc",score:"desc",pledged:"desc"}).parameters());return e.firstPage(t),e},p=function(){var e=i.paginationVM($e.finishedProject),t=o.extend({},c().filter.parameters(),s.filter.order({state_order:"asc",state:"desc",pledged:"desc"}).parameters());return e.firstPage(t),e};o.isString(d)&&d.length>0&&null===t?(b(!0),z("Search "+d),x(u())):"finished"===c().keyName?(b(!1),x(p())):(b(!1),z(s.title),x(o.isNull(t)||"finished"!=t[1]?m():p())),h(n&&n.id),C(t||o.isString(d)&&d.length>0?!1:!0)},z=e.prop(),C=Ge.toggleProp(!1,!0);return window.addEventListener("hashchange",function(){u(),j(),e.redraw()},!1),u(),$e.project.pageSize(9),y().then(j),t.filter&&c(a[t.filter]),c()||c(a[l]),{categories:g,changeFilter:d,fallbackFilter:s,projects:x,category:v,title:z,hint:w,filtersMap:a,currentFilter:c,projectFiltersVM:n,toggleCategories:C,isSearch:b,hasFBAuth:p,checkForMinScoredProjects:k}},view:function(r,n){var i=r.projects().collection(),a=i.length,l=[],s=r.currentFilter().keyName,c="contributed_by_friends"===s;return r.projects().isLoading()||!o.isEmpty(i)||r.isSearch()||c&&!r.hasFBAuth||(r.projectFiltersVM.removeContextFilter(r.currentFilter()),r.changeFilter(r.fallbackFilter)),e("#explore",{config:Ge.setPageTitle(t.t("header_html",Er()))},[e(".w-section.hero-search",[e.component(Pr),e(".w-container.u-marginbottom-10",[e(".u-text-center.u-marginbottom-40",[e('a#explore-open.link-hidden-white.fontweight-light.fontsize-larger[href="javascript:void(0);"]',{onclick:function(){return r.toggleCategories.toggle()}},[t.t("header_html",Er()),e("span#explore-btn.fa.fa-angle-down"+(r.toggleCategories()?".opened":""),"")])]),e("#categories.category-slider"+(r.toggleCategories()?".opened":""),[e(".w-row.u-marginbottom-30",[o.map(r.categories(),function(t){return e.component(Tr,{category:t})})])])])]),e(".w-section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-9.w-col-small-8.w-col-tiny-8",[e(".fontsize-larger",r.title()),r.hint()]),e(".w-col.w-col-3.w-col-small-4.w-col-tiny-4",r.isSearch()?"":e("select.w-select.text-field.positive",{onchange:e.withAttr("value",r.changeFilter)},o.map(r.projectFiltersVM.getContextFilters(),function(t,o){var n=(r.projects(),r.currentFilter()==t);return e('option[value="'+t.keyName+'"]',{selected:n},t.nicename)})))])])]),c&&o.isEmpty(i)?r.hasFBAuth?"":e.component(Ar):"",e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-row",o.map(i,function(t,n){var d="small",u="ctrse_explore";return r.isSearch()?u="ctrse_explore_pgsearch":c?u="ctrse_explore_friends":"all"===s&&t.score>=1&&(0===n?(d="big",u="ctrse_explore_featured_big",l=[a-1,a-2]):1===n||2===n?r.checkForMinScoredProjects(i)?(d="medium",u="ctrse_explore_featured_medium",l=[]):(d="big",u="ctrse_explore_featured_big",l=[a-1]):u="ctrse_explore_featured"),o.indexOf(l,n)>-1&&!r.projects().isLastPage()?"":e.component(zo,{project:t,ref:u,type:d,showFriends:c})})),r.projects().isLoading()?Ge.loader():o.isEmpty(i)&&r.hasFBAuth?e(".fontsize-base.w-col.w-col-12","No design to show."):""])])]),e(".w-section.u-marginbottom-80",[e(".w-container",[e(".w-row",[e(".w-col.w-col-2.w-col-push-5",[r.projects().isLastPage()||r.projects().isLoading()||o.isEmpty(i)?"":e("a.btn.btn-medium.btn-terciary[href='#loadMore']",{onclick:function(){return r.projects().nextPage(),!1}},"Load more")])])])]),e(".w-section.section-large.before-footer.u-margintop-80.bg-gray.divider",[e(".w-container.u-text-center",[e("img.u-marginbottom-20.icon-hero",{src:"https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/56f4414d3a0fcc0124ec9a24_icon-launch-explore.png"}),e("h2.fontsize-larger.u-marginbottom-60","Launch your campaign on JVN!"),e(".w-row",[e(".w-col.w-col-4.w-col-push-4",[e("a.w-button.btn.btn-large",{href:"/start?ref=ctrse_explore"},"Learn how")])])])])])}},Rr=_.partial(Ge.i18nScope,"layouts"),Nr={view:function(o,r){return e("span#menu-search",[e(".w-form.w-hidden-small.w-hidden-tiny.header-search[id='discover-form-wrapper']",[e("form.discover-form[accept-charset='UTF-8'][action='/en/explore?ref=ctrse_header'][id='search-form'][method='get']",[e("div",{style:{display:"none"}},e("input[name='utf8'][type='hidden'][value='‚úì']")),e("input.w-input.text-field.prefix.search-input[autocomplete='off'][id='pg_search'][name='pg_search'][placeholder='"+t.t("header.search",Rr())+"'][type='text']")]),e(".search-pre-result.w-hidden[data-searchpath='/en/auto_complete_projects']",[e(".result",e(".u-text-center",e("img[alt='Loader'][src='/assets/catarse_bootstrap/loader.gif']"))),e("a.btn.btn-small.btn-terciary.see-more-projects[href='javascript:void(0);']"," more")])]),e("a.w-inline-block.w-hidden-small.w-hidden-tiny.btn.btn-dark.btn-attached.postfix[href='#'][id='pg_search_submit']",e("img.header-lupa[alt='Magnifying glass'][data-pin-nopin='true'][src='/assets/catarse_bootstrap/lupa.png']"))])}},Fr=o.partial(Ge.i18nScope,"layouts"),Ir={controller:function(t){var r=e.prop(),n=e.prop([]),i=e.prop({}),a=t.user.user_id,l=function(){var e=i().public_name||i().name;return e&&!o.isEmpty(e)?o.first(e.split(" ")):""};return co.fetchUser(a,!0,i),{contributedProjects:r,latestProjects:n,userDetails:i,userName:l,toggleMenu:Ge.toggleProp(!1,!0)}},view:function(o,r){var n=o.userDetails();return e(".w-dropdown.user-profile",[e("a.w-dropdown-toggle.dropdown-toggle[href='javascript:void()'][id='user-menu']",{onclick:o.toggleMenu.toggle},[e(".user-name-menu",o.userName()),e("img.user-avatar[alt='Thumbnail - "+n.name+"'][height='40'][src='"+Ge.useAvatarOrDefault(n.profile_img_thumbnail)+"'][width='40']")]),o.toggleMenu()?e("nav.w-dropdown-list.dropdown-list.user-menu.w--open[id='user-menu-dropdown']",{style:"display:block;"},[e(".w-row",[e(".w-col.w-col-12",[e(".fontweight-semibold.fontsize-smaller.u-marginbottom-10",t.t("user.my_history",Fr())),e("ul.w-list-unstyled.u-marginbottom-20",[e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/en/users/"+n.id+"/edit#contributions']",t.t("user.support_history",Fr()))),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/en/users/"+n.id+"/edit#projects']",t.t("user.projects_created",Fr()))),e("li.w-hidden-main.w-hidden-medium.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/en/users/"+n.id+"/edit#projects']",t.t("user.projects_created",Fr())))]),e(".fontweight-semibold.fontsize-smaller.u-marginbottom-10",t.t("user.settings",Fr())),e("ul.w-list-unstyled.u-marginbottom-20",[e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/en/users/"+n.id+"/edit#about_me']","Public Profile")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/en/users/"+n.id+"/edit#notifications']",t.t("user.notifications",Fr())))]),r.user.is_admin_role?e(".fontweight-semibold.fontsize-smaller.u-marginbottom-10","Admin"):"",r.user.is_admin_role?e("ul.w-list-unstyled.u-marginbottom-20",[e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/en/new-admin#/users']",t.t("user.users",Fr()))),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/en/new-admin']",t.t("user.support",Fr()))),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/en/admin/financials']",t.t("user.financial_rel",Fr()))),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/en/admin/projects']",t.t("user.admin_projects",Fr()))),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/en/dbhero']","Dataclips"))]):"",e("a.alt-link[href='/en/logout']",t.t("user.logout",Fr()))])])]):""]);
}},qr=o.partial(Ge.i18nScope,"layouts"),Or={controller:function(t){var o=Ge.getUser(),r=function(){return(t.menuTransparency?"overlayer":"")+" "+(t.withAlert?"with-global-alert":"")},n=function(){return t.absoluteHome?{href:Ge.rootUrl()}:{config:e.route}};return{user:o,menuCss:r,homeAttrs:n}},view:function(o,r){return e("header.main-header",{"class":o.menuCss()},[e(".w-row",[e(".w-clearfix.w-col.w-col-8.w-col-small-8.w-col-tiny-8",[e("a.header-logo.w-inline-block[href='/?ref=ctrse_header'][title='JVN']",o.homeAttrs(),e("img[alt='Logo big'][src='/assets/catarse_bootstrap/logo_big.png']")),r.menuShort?"":e("div#menu-components",[e("a.w-hidden-small.w-hidden-tiny.header-link.w-nav-link[href='/start?ref=ctrse_header']",{config:e.route},t.t("header.submit",qr())),e("a.w-hidden-small.w-hidden-tiny.header-link.w-nav-link[href='/explore?ref=ctrse_header']",{config:e.route},"Explore"),e.component(Nr)])]),e(".text-align-right.w-col.w-col-4.w-col-small-4.w-col-tiny-4",[o.user?e.component(Ir,{user:o.user}):e("a.w-nav-link.header-link.w-nav-link.btn-edit.u-right[href='/en/login?ref=ctrse_header']",t.t("header.signin",qr()))])]),r.menuShort?"":e(".header-controls-mobile.w-hidden-main.w-hidden-medium",[e("a.header-link.w-nav-link[href='/en/start?ref=ctrse_header']",{onclick:function(){return e.route("/start")}},t.t("header.submit",qr())),e("a.header-link.w-nav-link[href='/en/explore?ref=ctrse_header']",{onclick:function(){return e.route("/explore")}},"Explore")])])}},Vr=function(){var e=t.translations[t.currentLocale()].projects.home,o=e.banners;return{banners:o}},Lr={controller:function(t){var o=void 0,r=e.prop(0),n=e.prop(1600),i=t.sliderTime||6500,a=function(){r(r()>0?r()-1:t.slides.length-1)},l=function(){r(r()<t.slides.length-1?r()+1:0)},s=function(){o=setInterval(function(){l(),e.redraw()},i)},c=function(){clearInterval(o),s()},d=function(t,r,i){r||(n(Math.max(document.documentElement.clientWidth,window.innerWidth||0)),e.redraw()),i.onunload=function(){return clearInterval(o)}};return s(),{config:d,selectedSlideIdx:r,translationSize:n,decrementSlide:a,incrementSlide:l,resetSliderTimer:c}},view:function(t,r){var n=r.slideClass||"",i=r.wrapperClass||"",a=r.effect||"slide",l=function(e,o){e(o),t.resetSliderTimer(),r.onchange&&r.onchange()},s=function(e,o){var r="transform: "+o+"; -webkit-transform: "+o+"; -ms-transform:"+o,n=e===t.selectedSlideIdx()?"opacity: 1; visibility: visible;":"opacity: 0; visibility: hidden;";return"fade"===a?n:r};return e(".w-slider."+i,{config:t.config},[e(".fontsize-larger",r.title),e(".w-slider-mask",[o.map(r.slides,function(o,r){var i=(r-t.selectedSlideIdx())*t.translationSize(),a="translate3d("+i+"px, 0, 0)";return e(".slide.w-slide."+n,{style:s(r,a)+" "+o.customStyle},[e(".w-container",[e(".w-row",[e(".w-col.w-col-8.w-col-push-2",o.content)])])])}),e("#slide-prev.w-slider-arrow-left.w-hidden-small.w-hidden-tiny",{onclick:function(){return l(t.decrementSlide)}},[e(".w-icon-slider-left.fa.fa-lg.fa-angle-left.fontcolor-terciary")]),e("#slide-next.w-slider-arrow-right.w-hidden-small.w-hidden-tiny",{onclick:function(){return l(t.incrementSlide)}},[e(".w-icon-slider-right.fa.fa-lg.fa-angle-right.fontcolor-terciary")]),e(".w-slider-nav.w-slider-nav-invert.w-round.slide-nav",o(r.slides.length).times(function(o){return e(".slide-bullet.w-slider-dot"+(t.selectedSlideIdx()===o?".w-active":""),{onclick:function(){return l(t.selectedSlideIdx,o)}})}))])])}},Br={getBlogPosts:function(){var t=e.deferred(),r=o.first(document.getElementsByTagName("body")).getAttribute("data-blog");return r?t.resolve(JSON.parse(r)):e.request({method:"GET",url:"/posts"}).then(t.resolve)["catch"](t.reject),t.promise}},Ur={controller:function(t){var o=e.prop([]),r=e.prop(!1);return Br.getBlogPosts().then(o)["catch"](r),{posts:o,error:r}},view:function(t,r){return e("section.section-large.bg-gray.before-footer[id='blog']",e(".w-container",[e(".u-text-center",[e("a[href='https://medium.com/@myjvnepal'][target='blank']",e("img.u-marginbottom-10[alt='Icon blog'][src='/assets/icon-blog.png']")),e(".fontsize-large.u-marginbottom-60.text-success",e("a.link-hidden-success[href='https://medium.com/@myjvnepal'][target='__blank']","JVN Blogs"))]),e(".w-row",o.map(t.posts(),function(t){return e(".w-col.w-col-4.col-blog-post",[e('a.link-hidden.fontweight-semibold.fontsize-base.u-marginbottom-10[href="'+t[2][1]+"\"][target='__blank']",t[0][1])])})),t.error()?e(".w-row",e(".w-col.w-col-12.u-text-center","Error loading posts...")):""]))}},Yr=_.partial(Ge.i18nScope,"layouts.footer"),Wr={view:function(){return e("footer.main-footer.main-footer-neg",[e("section.w-container",e(".w-row",[e(".w-col.w-col-9",e(".w-row",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.w-hidden-tiny",[e(".footer-full-signature-text.fontsize-small",t.t("titles.contact",Yr())),e("a.link-footer[href='#?ref=ctrse_footer']",[t.t("links.how_it_works",Yr()),e.trust("&nbsp;")]),e("a.link-footer[href='/team?ref=ctrse_footer']",[t.t("links.team",Yr()),e.trust(" &lt;"),"3"]),e("a.link-footer[href='http://facebook.com/JVNepal'][target='blank']"," Facebook"),e("a.link-footer[href='https://github.com/sushant12/catarse'][target='blank']"," Github"),e("a.link-footer[href='https://medium.com/@myjvnepal'][target='blank']"," Blog"),e("a.link-footer[href='/jobs']",t.t("links.jobs",Yr()))]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.footer-full-firstcolumn",[e(".footer-full-signature-text.fontsize-small",t.t("titles.about",Yr())),e("a.link-footer[href='#'][target=\"_BLANK\"]",t.t("links.contact",Yr())),e("a.link-footer[href='#/']",t.t("links.help_support",Yr())),e("a.link-footer[href='/en/terms-of-use']",t.t("links.terms",Yr())),e("a.link-footer[href='/en/privacy-policy']",t.t("links.privacy",Yr()))]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.footer-full-lastcolumn",[e(".footer-full-signature-text.fontsize-small",t.t("titles.sitemap",Yr())),e("a.w-hidden-small.w-hidden-tiny.link-footer[href='/en/start?ref=ctrse_footer']",t.t("links.submit",Yr())),e("a.link-footer[href='/en/explore?ref=ctrse_footer']",t.t("links.discover",Yr())),e("a.w-hidden-main.w-hidden-medium.w-hidden-small.link-footer[href='http://blog.catarse.me?ref=ctrse_footer']"," Blog"),e("a.w-hidden-main.w-hidden-medium.w-hidden-small.link-footer[href='#']",t.t("links.contact",Yr())),e("a.w-hidden-tiny.link-footer[href='/en/explore?filter=score&ref=ctrse_footer']",t.t("links.score",Yr())),e("a.w-hidden-tiny.link-footer[href='/en/explore?filter=online&ref=ctrse_footer']",t.t("links.online",Yr())),e("a.w-hidden-tiny.link-footer[href='/en/explore?filter=finished&ref=ctrse_footer']",t.t("links.finished",Yr()))])])),e(".w-col.w-col-3.column-social-media-footer",[e(".footer-full-signature-text.fontsize-small",t.t("titles.newsletter",Yr())),e(".w-form",e("form[accept-charset='UTF-8'][action='"+Ge.getMailchimpUrl()+"'][id='mailee-form'][method='post']",[e(".w-form.footer-newsletter",e("input.w-input.text-field.prefix[id='EMAIL'][label='email'][name='EMAIL'][placeholder='"+t.t("texts.email",Yr())+"'][type='email']")),e('button.w-inline-block.btn.btn-edit.postfix.btn-attached[style="padding:0;"]',e("img.footer-news-icon[alt='Icon newsletter'][src='/assets/catarse_bootstrap/icon-newsletter.png']"))])),e(".footer-full-signature-text.fontsize-small",t.t("titles.social",Yr())),e(".w-widget.w-widget-facebook.u-marginbottom-20",e(".facebook",e(".fb-like[data-colorscheme='dark'][data-href='http://facebook.com/JVNepal'][data-layout='button_count'][data-send='false'][data-show-faces='false'][data-title=''][data-width='260']"))),e(".u-margintop-30",[e(".footer-full-signature-text.fontsize-small","Change language"),e("[id='google_translate_element']")])])])),e(".w-container",e(".footer-full-copyleft",[e("img.u-marginbottom-20[alt='Logo footer'][src='/assets/logo-footer.png']"),e(".lineheight-loose",e("a.link-footer-inline[href='https://github.com/sushant12/catarse'][target='blank']",t.t("texts.copyleft",Yr())+(" | "+(new Date).getFullYear()+" | Open Source")))]))])}},Hr=o.partial(Ge.i18nScope,"projects.home"),Jr={controller:function(t){var r=o.partial(o.sample,o,6),n=i.loaderWithToken,a=$e.project,l=Ht().filters,s=i.filtersVM({user_id:"eq"}),c=i.paginationVM($e.userFriend,"user_id.desc",{Prefer:"count=exact"}),d=Ge.getUser()||{},u=d.has_fb_auth,m=Vr();a.pageSize(20),s.user_id(d.user_id),u&&!c.collection().length&&c.firstPage(s.parameters());var p=o.map(["score","contributed_by_friends"],function(t){var i=l[t],s=n(a.getPageOptions(o.extend({},{order:"score.desc"},i.filter.parameters()))),c=e.prop([]);return s.load().then(o.compose(c,r)),{title:i.nicename,hash:"score"===t?"all":t,collection:c,loader:s,showFriends:"contributed_by_friends"===t}});return{collections:p,slidesContent:m.banners,hasFBAuth:u}},view:function(r){var n=function(){return o.map(r.slidesContent,function(t){var o="background-image: url("+t.image+");",r=e(".w-container.u-text-center",[e(".w-row.u-marginbottom-40",[e("h1.fontcolor-negative.fontsize-megajumbo.u-marginbottom-20",t.title),e("h2.fontcolor-negative.fontsize-large",e.trust(t.subtitle))]),e("a.btn.btn-large.u-marginbottom-10.btn-inline",{href:t.link},t.cta)]);return{content:r,customStyle:o}})};return e("#projects-home-component",{config:Ge.setPageTitle(t.t("header_html",Hr()))},[e.component(Lr,{slides:n(),effect:"fade",slideClass:"hero-slide start",wrapperClass:"hero-full hero-full-slide",sliderTime:1e4}),o.map(r.collections,function(t){return e.component(So,{collection:t,title:t.title,ref:"home_"+("all"===t.hash?"score":t.hash),showFriends:t.showFriends})}),r.hasFBAuth?"":e.component(Ar,{largeBg:!0}),e.component(Ur)])}},Xr={controller:function(){return{displayEmbed:Ge.toggleProp(!1,!0)}},view:function(t,o){return e(".pop-share",{style:"display: block;"},[e(".w-hidden-main.w-hidden-medium.w-clearfix",[e("a.btn.btn-small.btn-terciary.btn-inline.u-right",{onclick:o.displayShareBox.toggle},"Close"),e(".fontsize-small.fontweight-semibold.u-marginbottom-30","Share this project")]),e(".w-widget.w-widget-twitter.w-hidden-small.w-hidden-tiny.share-block",[e('iframe[allowtransparency="true"][width="120px"][height="22px"][frameborder="0"][scrolling="no"][src="//platform.twitter.com/widgets/tweet_button.8d007ddfc184e6776be76fe9e5e52d69.en.html#_=1442425984936&count=horizontal&dnt=false&id=twitter-widget-1&lang=en&original_referer=https%3A%2F%2Fwww.myjvn.com%2Fpt%2F'+o.project().permalink+"&size=m&text=Confira%20o%20projeto%20"+o.project().name+"%20no%20%40catarse&type=share&url=https%3A%2F%2Fwww.catarse.me%2Fpt%2F"+o.project().permalink+'%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share&via=catarse"]')]),e('a.w-hidden-small.widget-embed.w-hidden-tiny.fontsize-small.link-hidden.fontcolor-secondary[href="js:void(0);"]',{onclick:t.displayEmbed.toggle},"< embed >"),t.displayEmbed()?e(".embed-expanded.u-margintop-30",[e(".fontsize-small.fontweight-semibold.u-marginbottom-20","Insert a widget on your site"),e(".w-form",[e('input.w-input[type="text"][value="<iframe frameborder="0" height="340px" src="https://www.myjvn.com/en/projects/'+o.project().project_id+'/embed" width="300px" scrolling="no"></iframe>"]')]),e(".card-embed",[e('iframe[frameborder="0"][height="350px"][src="/projects/'+o.project().project_id+'/embed"][width="300px"][scrolling="no"]')])]):"",o.project().permalink?e.component(ar,{mobile:!0,url:"http://www.myjvn.com/"+o.project().permalink+"?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share"}):"",e('a.w-hidden-main.w-hidden-medium.btn.btn-medium.btn-tweet.u-marginbottom-20[href="https://twitter.com/intent/tweet?text=Acabei%20de%20apoiar%20o%20projeto%20'+o.project().name+"%20https://www.myjvn.com/"+o.project().permalink+'%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share"][target="_blank"]',[e("span.fa.fa-twitter")," Tweet"]),e('a.w-hidden-main.w-hidden-medium.btn.btn-medium[data-action="share/whatsapp/share"]',{href:"whatsapp://send?text="+encodeURIComponent("https://www.myjvn.com/"+o.project().permalink+"/?ref=whatsapp&utm_source=whatsapp&utm_medium=social&utm_campaign=project_share")},[e("span.fa.fa-whatsapp")," Whatsapp"])])}},Kr={view:function(t,o){var r=o.project,n=r().address||{state_acronym:"",city:""};return _.isNull(n)?"":e('a.btn.btn-inline.btn-small.btn-transparent.link-hidden-light.u-marginbottom-10[href="/en/explore?pg_search='+n.state_acronym+'"]',{onclick:Ge.analytics.event({cat:"project_view",act:"project_location_link",lbl:n.city+" "+n.state_acronym,project:r()})},[e("span.fa.fa-map-marker")," "+n.city+", "+n.state_acronym])}},Gr={view:function(t,o){var r=o.project;return r?e('a.btn.btn-inline.btn-small.btn-transparent.link-hidden-light[href="/en/explore#by_category_id/'+r().category_id+'"]',{onclick:Ge.analytics.event({cat:"project_view",act:"project_category_link",lbl:r().category_name,project:r()})},[e("span.fa.fa-tag")," ",r().category_name]):""}},$r={controller:function(){return{displayShareBox:Ge.toggleProp(!1,!0)}},view:function(t,o){var r=o.project;return e("#project-highlight",[r().video_embed_url?e(".w-embed.w-video.project-video",{style:"min-height: 240px;"},[e('iframe.embedly-embed[itemprop="video"][src="'+r().video_embed_url+'"][frameborder="0"][allowFullScreen]')]):e(".project-image",{style:"background-image:url('"+(r().original_image||r().project_img)+"');"}),e(".w-hidden-small.w-hidden-tiny",[e.component(Kr,{project:r}),e.component(Gr,{project:r})]),e(".project-blurb",r().headline),e(".project-share.w-hidden-small.w-hidden-tiny",e(".u-marginbottom-30.u-text-center-small-only",[e(".w-inline-block.fontcolor-secondary.fontsize-smaller.u-marginright-20","To share:"),r().permalink?e.component(ar,{url:"http://www.myjvn.com/"+r().permalink+"?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share"}):"",r().permalink?e.component(ar,{messenger:!0,url:"http://www.myjvn.com/"+r().permalink+"?ref=facebook&utm_source=facebook.com&utm_medium=messenger&utm_campaign=project_share"}):"",e("button#more-share.btn.btn-inline.btn-medium.btn-terciary",{style:{transition:"all 0.5s ease 0s"},onclick:t.displayShareBox.toggle},["¬∑¬∑¬∑"," More"]),t.displayShareBox()?e(Xr,{project:r,displayShareBox:t.displayShareBox}):""]))])}},Qr={view:function(t,r){var n=r.project(),i=n.mode,a="aon"===i?"/assets/aon-badge.png":"/assets/flex-badge.png",l="aon"===i?"All-or-nothing Campaign ":"Flexible Campaign ",s=o.isNull(n.goal)?"not defined":Ge.formatNumber(n.goal),c=function(t){return e.component(Mo,{el:t,text:"aon"===i?"You will only receive the resources if you reach or exceed the goal until "+Ge.momentify(n.zone_expires_at,"DD/MM/YYYY")+".":"The director will receive all the resources when he closes the campaign, even if he has not reached this goal.",width:280})};return e("#"+i+".w-row",[e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[o.isEmpty(n)?"":e('img[src="'+a+"\"][width='30']")]),e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e(".fontsize-base.fontweight-semibold","Goal Rs "+Ge.selfOrEmpty(s,"--")),e(".w-inline-block.fontsize-smallest._w-inline-block",[o.isEmpty(n)?"":l,c("span.w-inline-block.tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary")])])])}},Zr={controller:function(t){var o=e.prop(!1),r=t.project,n=i.filtersVM({project_id:"eq"}),a="reminder",l=e.prop(!1),s=function(){if(!Ge.getUser())return Ge.storeAction(a,r().project_id),Ge.navigateToDevise();var t=r().in_reminder?$e.projectReminder.deleteOptions(n.parameters()):$e.projectReminder.postOptions({project_id:r().project_id});o=i.loaderWithToken(t),o.load().then(function(){r().in_reminder=!r().in_reminder,r().in_reminder?(l(!0),setTimeout(function(){l(!1),e.redraw()},5e3)):l(!1)})};return Ge.callStoredAction(a)==r().project_id&&s(),n.project_id(r().project_id),{l:o,submitReminder:s,popNotification:l}},view:function(t,o){var r="button"===o.type?"":".u-text-center.u-marginbottom-30",n="button"===o.type?"w-button btn btn-terciary btn-no-border":"btn-link link-hidden fontsize-large",i=(o.hideTextOnMobile||!1,o.project),a=Ge.analytics.event({cat:"project_view",act:"project_floatingreminder_click",project:i()},t.submitReminder);return e("#project-reminder"+r,[e("a.btn.btn-small.btn-terciary.w-hidden-main.w-hidden-medium[data-ix='popshare'][href='#']",{onclick:a},i().in_reminder?[e("span.fa.fa-heart"),"Active Reminder"]:[e("span.fa.fa-heart-o")," Remember Me Forgot your password?"]),e('button[class="w-hidden-small w-hidden-tiny '+n+" "+(i().in_reminder?"link-hidden-success":"fontcolor-secondary")+' fontweight-semibold"]',{onclick:a},[t.l()?Ge.loader():e(i().in_reminder?"span.fa.fa-heart":"span.fa.fa-heart-o")]),t.popNotification()?e.component(lr,{message:"OK! We`ll email you a reminder 48 hours before the end of the campaign"}):""])}},en={controller:function(t){var o=e.prop(!1),r=e.prop(!1),n=t,i=e.prop(!1),a=Ge.getUser()||{name:"",email:""},l=e.prop(a.public_name),s=e.prop(a.email),c=e.prop(""),d=function(){if(o())return!1;i(!0),c(c().split("\n").join("<br />"));var e=Ge.getCurrentProject(),t=$e.directMessage.postOptions({from_name:l(),from_email:s(),user_id:Ge.getUser().user_id,content:c(),project_id:e?e.project_id:null,to_user_id:n().id});return o=postgrest.loaderWithToken(t),o.load().then(r(!0)),i(!1),!1};return{sendMessage:d,submitDisabled:i,sendSuccess:r,userDetails:t,from_name:l,from_email:s,content:c,l:o}},view:function(t,r){var n=e(".modal-dialog-content.u-text-center",[e(".fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40"),e("p.fontsize-large","Your message was successfully sent to "+t.userDetails().name+". You will receive a copy in your email and you can follow the conversation there!")]),i=[e(".modal-dialog-content",[e(".w-form",[e("form",{onsubmit:Ge.validate().submit([{prop:t.from_name,rule:"text"},{prop:t.from_email,rule:"email"},{prop:t.content,rule:"text"}],t.sendMessage)},[e(".w-row",[e(".w-col.w-col-6.w-sub-col",[e("label.fontsize-smaller","Your Name"),e("input.w-input.text-field[value='"+t.from_name()+"'][type='text'][required='required']",{onchange:e.withAttr("value",t.from_name),"class":Ge.validate().hasError(t.from_name)?"error":""})]),e(".w-col.w-col-6",[e("label.fontsize-smaller","Your Email"),e("input.w-input.text-field[value='"+t.from_email()+"'][type='text'][required='required']",{onchange:e.withAttr("value",t.from_email),"class":Ge.validate().hasError(t.from_email)?"error":""})])]),e("label","Message"),e("textarea.w-input.text-field.height-small[required='required']",{onchange:e.withAttr("value",t.content),"class":Ge.validate().hasError(t.content)?"error":""}),e(".u-marginbottom-10.fontsize-smallest.fontcolor-terciary","You will receive a copy of this message in your email."),e(".w-row",Ge.validationErrors().length?o.map(Ge.validationErrors(),function(t){return e("span.fontsize-smallest.text-error",[e("span.fa.fa-exclamation-triangle")," "+t.message,e("br")])}):""),e(".modal-dialog-nav-bottom",e(".w-row",e(".w-col.w-col-6.w-col-push-3",t.l()?Ge.loader():e('input.w-button.btn.btn-large[type="submit"][value="Send message"]',{disabled:t.submitDisabled()}))))])])])];return e("div",[e(".modal-dialog-header",e(".fontsize-large.u-text-center","Send message")),t.sendSuccess()?n:i])}},tn={controller:function(t){var o=e.prop(t.following||!1),r=i.filtersVM({follow_id:"eq"}),n=e.prop(!1),a=e.prop(!1),l=$e.userFollow.postOptions({follow_id:t.follow_id}),s=function(){return r.follow_id(t.follow_id),$e.userFollow.deleteOptions(r.parameters())}(),c=function(){var e=i.loaderWithToken(l);n(!0),e.load().then(function(){o(!0),n(!1)})},d=function(){var e=i.loaderWithToken(s);n(!0),e.load().then(function(){o(!1),n(!1)})};return{following:o,follow:c,unfollow:d,loading:n,hover:a}},view:function(t,o){if(Ge.userSignedIn()&&Ge.getUserID()!=o.follow_id){var r=o.disabledClass||".w-button.btn.btn-medium.btn-terciary.u-margintop-20",n=o.enabledClass||".w-button.btn.btn-medium.u-margintop-20";return t.loading()?Ge.loader():t.following()?e("a"+n,{onclick:t.unfollow,onmouseover:function(){return t.hover(!0)},onmouseout:function(){return t.hover(!1)}},t.hover()?"Unfollow":"Following"):e("a"+r,{onclick:t.follow},"Follow")}return e("")}},on={controller:function(e){return{displayModal:Ge.toggleProp(!1,!0)}},view:function(t,r){var n=r.project,i=[en,r.userDetails],a=r.userDetails();return e("#user-card",o.isEmpty(a)?"Loading...":e(".u-marginbottom-30.u-text-center-small-only",[t.displayModal()?e.component(Ro,{displayModal:t.displayModal,content:i}):"",e(".w-row",[e(".w-col.w-col-4",[e('img.thumb.u-marginbottom-30.u-round[width="100"][itemprop="image"][src="'+a.profile_img_thumbnail+'"]')]),e(".w-col.w-col-8",[e('.fontsize-small.link-hidden.fontweight-semibold.u-marginbottom-10.lineheight-tight[itemprop="name"]',[e('a.link-hidden[href="/users/'+a.id+'"]',{config:e.route,onclick:function(){e.route("/users/"+a.id,{user_id:a.id}),Ge.analytics.event({cat:"project_view",act:"project_creator_link",lbl:a.id,project:n()})}},a.public_name||a.name)]),e(".fontsize-smallest",[Ge.pluralize(a.total_published_projects," Created"," Created"),e.trust("&nbsp;&nbsp;|&nbsp;&nbsp;"),Ge.pluralize(a.total_contributed_projects," Backed"," Backed")]),e("ul.w-hidden-tiny.w-hidden-small.w-list-unstyled.fontsize-smaller.fontweight-semibold.u-margintop-20.u-marginbottom-20",[o.isEmpty(a.facebook_link)?"":e("li",[e('a.link-hidden[itemprop="url"][href="'+a.facebook_link+'"][target="_blank"]',{onclick:Ge.analytics.event({cat:"project_view",act:"project_creator_fb",lbl:a.facebook_link,project:n()})},"Facebook Profile")]),o.isEmpty(a.twitter_username)?"":e("li",[e('a.link-hidden[itemprop="url"][href="https://twitter.com/'+a.twitter_username+'"][target="_blank"]',{onclick:Ge.analytics.event({cat:"project_view",act:"project_creator_twitter",lbl:a.twitter_username,project:n()})},"Twitter Profile")]),o.map(a.links,function(t){var r=Ge.parseUrl(t.link);return o.isEmpty(r.hostname)?"":e("li",[e('a.link-hidden[itemprop="url"][href="'+t.link+'"][target="_blank"]',{onclick:Ge.analytics.event({cat:"project_view",act:"project_creator_otherlinks",lbl:t.link,project:n()})},r.hostname)])})]),o.isEmpty(a)?"":[e(tn,{enabledClass:"a.w-button.btn.btn-terciary.btn-small..u-marginbottom-10",disabledClass:"a.w-button.btn.btn-terciary.btn-small.u-marginbottom-10",follow_id:a.id,following:a.following_this_user}),e("a.w-button.btn.btn-terciary.btn-small[href='javascript:void(0);']",{onclick:Ge.analytics.event({cat:"project_view",act:"project_creator_sendmsg",lbl:a.id,project:n()},t.displayModal.toggle)},"Send message")],r.project().is_admin_role?e("p",a.email):""])])]))}},rn=o.partial(Ge.i18nScope,"projects.project_sidebar"),nn={controller:function(e){var t=e.project,o=function(e,o){o||!function(){var o=void 0,r=0,n=0,i=0,a=t().pledged/t().progress,l=t().total_contributors/t().progress,s=document.getElementById("progressBar"),c=document.getElementById("pledged"),d=document.getElementById("contributors"),u=function(){o=setInterval(m,28)},m=function(){r<=parseInt(t().progress)?(s.style.width=r+"%",c.innerText="Rs "+Ge.formatNumber(n),d.innerText=parseInt(i)+" people",e.innerText=r+"%",n+=a,i+=l,r+=1):clearInterval(o)};setTimeout(function(){u()},1800)}()};return{animateProgress:o,displayShareBox:Ge.toggleProp(!1,!0)}},view:function(r,n){var i=n.project,a=i().elapsed_time,l=i().remaining_time,s=function(){var e={waiting_funds:"card-waiting",successful:"card-success",failed:"card-error",draft:"card-dark",in_analysis:"card-dark",approved:"card-dark"};return e[i().state]?"card u-radius zindex-10 "+e[i().state]:""},c=function(){var e={approved:t.t("display_status.approved",rn()),online:Ge.existy(i().zone_expires_at)&&i().open_for_contributions?t.t("display_status.online",rn({date:Ge.momentify(i().zone_expires_at)})):"",failed:t.t("display_status.failed",rn({date:Ge.momentify(i().zone_expires_at),goal:i().goal})),rejected:t.t("display_status.rejected",rn()),in_analysis:t.t("display_status.in_analysis",rn()),successful:t.t("display_status.successful",rn({date:Ge.momentify(i().zone_expires_at)})),waiting_funds:t.t("display_status.waiting_funds",rn()),draft:t.t("display_status.draft",rn())};return e[i().state]};return e("#project-sidebar.aside",[e(".project-stats",[e(".project-stats-inner",[e(".project-stats-info",[e(".u-marginbottom-20",[e("#pledged.fontsize-largest.fontweight-semibold.u-text-center-small-only","Rs "+(i().pledged?Ge.formatNumber(i().pledged):"0")),e(".fontsize-small.u-text-center-small-only",[t.t("contributors_call",rn()),e("span#contributors.fontweight-semibold",t.t("contributors_count",rn({count:i().total_contributors}))),!i().expires_at&&a?" in "+t.t("datetime.distance_in_words.x_"+a.unit,{count:a.total},rn()):""])]),e(".meter",[e("#progressBar.meter-fill",{style:{width:i().progress+"%"}})]),e(".w-row.u-margintop-10",[e(".w-col.w-col-5.w-col-small-6.w-col-tiny-6",[e(".fontsize-small.fontweight-semibold.lineheight-tighter",(i().progress?parseInt(i().progress):"0")+"%")]),e(".w-col.w-col-7.w-col-small-6.w-col-tiny-6.w-clearfix",[e(".u-right.fontsize-small.lineheight-tighter",l&&l.total?[e("span.fontweight-semibold",l.total),t.t("remaining_time."+l.unit,rn({count:l.total}))]:"")])])]),e(".w-row",[e.component(Qr,{project:i})])]),i().open_for_contributions?e(".back-project-btn-div",[e(".back-project--btn-row",[e('a#contribute_project_form.btn.btn-large.u-marginbottom-20[href="javascript:void(0);"]',{onclick:Ge.analytics.event({cat:"contribution_create",act:"contribution_button_click",project:i()},function(){return Ge.navigateTo("/projects/"+i().project_id+"/contributions/new")})},t.t("submit",rn()))]),e(".back-project-btn-row-right",e.component(Zr,{project:i,type:"link"}))]):"",e(".friend-backed-card.project-page",[!o.isUndefined(i())&&i().contributed_by_friends?e.component(xo,{project:i()}):""]),e('div[class="fontsize-smaller u-marginbottom-30 '+s()+'"]',c())]),e(".project-share.w-hidden-main.w-hidden-medium",[e.component(Kr,{project:i}),e.component(Gr,{project:i}),e(".u-marginbottom-30.u-text-center-small-only",e("button.btn.btn-inline.btn-medium.btn-terciary",{onclick:r.displayShareBox.toggle},"Share this project")),r.displayShareBox()?e(Xr,{project:i,displayShareBox:r.displayShareBox}):""]),e(".user-c",e.component(on,{userDetails:n.userDetails,project:i}))])}},an={controller:function(e){var t=e.contribution,r=e.rewardDetails,n=o.findWhere(r(),{id:t.reward_id});return{contribution:t,chosenReward:n}},view:function(t,r){var n=r.contribution;return e(".user-contribution-detail",[e(".w-col.w-col-4",[e(".fontsize-smallest.lineheight-tight.fontweight-semibold.u-marginbottom-10","Value of support:"),e(".fontsize-large","Rs"+n.value)]),e(".w-col.w-col-4",e.component(yt,{item:n})),e(".w-col.w-col-4",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10","Reward:"),e(".fontsize-smallest.lineheight-tight.u-marginbottom-20",o.isUndefined(t.chosenReward)?"No reward selected.":t.chosenReward.description),e(".fontsize-smallest.lineheight-looser",o.isUndefined(t.chosenReward)?"":[e("span.fontweight-semibold","Estimated delivery: "),Ge.momentify(t.chosenReward.deliver_at,"MMM/YYYY")])])])}},ln=m.prop({}),sn=function(e,t,o){var r=i.filtersVM({user_id:"eq",project_id:"eq",state:"in"});r.user_id(e),r.project_id(t),r.state(o);var n=i.loaderWithToken($e.userContribution.getPageOptions(r.parameters()));return n.load()},cn=function(){var e=document.getElementById("application"),t=e&&e.getAttribute("data-contribution");return!!t&&(ln(JSON.parse(t)),m.redraw(!0),ln)},dn=function(e){return o.contains(["paid","pending_refund","refunded"],e.state)},un=function(e){return dn(e)},mn=function(e){return"BoletoBancario"==e.payment_method&&e.waiting_payment},pn=function(e){return"BoletoBancario"==e.payment_method&&"pending"==e.state&&"online"==e.project_state&&!e.reward_sold_out&&!e.waiting_payment},fn={getCurrentContribution:cn,canShowReceipt:un,canGenerateSlip:pn,canShowSlip:mn,getUserProjectContributions:sn},wn={controller:function(e){var t=e.project,r=Ge.getUser();return Ge.isProjectPage()&&r&&!o.isUndefined(t())&&fn.getUserProjectContributions(r.user_id,t().project_id,["paid","refunded","pending_refund"]).then(e.projectContributions),{projectContributions:e.projectContributions,showContributions:Ge.toggleProp(!1,!0)}},view:function(t,r){var n=r.project,i=r.rewardDetails;return o.isUndefined(n())?e(""):e("#project-header",[e(".w-section.section-product."+n().mode),e(".w-section.page-header.u-text-center",[e(".w-container",[e('h1.fontsize-larger.fontweight-semibold.project-name[itemprop="name"]',Ge.selfOrEmpty(n().name||n().project_name)),e('h2.fontsize-base.lineheight-looser[itemprop="author"]',["by ",n().user?n().user.public_name:n().owner_public_name?n().owner_name:""]),o.isEmpty(t.projectContributions())?"":e(".card.card-terciary.u-radius.u-margintop-20",[e(".fontsize-small.u-text-center",[e("span.fa.fa-thumbs-up")," You are a supporter of this project! ",e("a.alt-link[href='javascript:void(0);']",{onclick:t.showContributions.toggle},"Details")]),t.showContributions()?e(".card.u-margintop-20",e(".w-row",o.map(t.projectContributions(),function(t){return e.component(an,{contribution:t,rewardDetails:i})}))):""])])]),e(".w-section.project-main",[e(".w-container",[e(".w-row.project-main",[e(".w-col.w-col-8.project-highlight",e.component($r,{project:n})),e(".w-col.w-col-4",e.component(nn,{project:n,userDetails:r.userDetails}))])])])])}},bn={controller:function(t){var o=e.prop(!1),r=e.prop(-1),n=function(t){return function(){var n=t.getBoundingClientRect();window.scrollY<=r()&&(r(-1),o(!1),e.redraw()),(n.top<0||window.scrollY>r()&&r()>0)&&(o()||(r(window.scrollY),o(!0),e.redraw()))}},i=function(e,t){if(!t){var o=n(e);window.addEventListener("scroll",o)}};return{navDisplay:i,isFixed:o}},view:function(t,o){var r=o.project,n=o.rewardDetails,i=!t.isFixed()||r().is_owner_or_admin?".w-section.project-nav":".w-section.project-nav.project-nav-fixed";return e("nav-wrapper",r()?[e(i,{config:t.navDisplay},[e(".w-container",[e(".w-row",[e(".w-col.w-col-8",[_.isEmpty(n())?e('a[id="rewards-link"][class="w-hidden-main w-hidden-medium dashboard-nav-link mf '+(Ge.hashMatch("#contribution_suggestions")?"selected":"")+'"][href="/'+r().permalink+'#contribution_suggestions"]',{style:"float: left;",onclick:Ge.analytics.event({cat:"project_view",act:"project_contribsuggestions_view",project:r()})},"Suggested Values"):e('a[id="rewards-link"][class="w-hidden-main w-hidden-medium dashboard-nav-link mf  '+(Ge.hashMatch("#rewards")?"selected":"")+'"][href="/'+r().permalink+'#rewards"]',{style:"float: left;",onclick:Ge.analytics.event({cat:"project_view",act:"project_rewards_view",project:r()})},"Rewards"),e('a[id="about-link"][class="dashboard-nav-link mf '+(Ge.hashMatch("#about")||Ge.hashMatch("")?"selected":"")+'"][href="#about"]',{style:"float: left;",onclick:Ge.analytics.event({cat:"project_view",act:"project_about_view",project:r()})},"About"),e('a[id="posts-link"][class="dashboard-nav-link mf '+(Ge.hashMatch("#posts")?"selected":"")+'"][href="/'+r().permalink+'#posts"]',{style:"float: left;",onclick:Ge.analytics.event({cat:"project_view",act:"project_posts_view",project:r()})},["News ",e("span.badge",r()?r().posts_count:"")]),e('a[id="contributions-link"][class="w-hidden-small w-hidden-tiny dashboard-nav-link mf '+(Ge.hashMatch("#contributions")?"selected":"")+'"][href="#contributions"]',{style:"float: left;",onclick:Ge.analytics.event({cat:"project_view",act:"project_contributions_view",project:r()})},["Supporters ",e("span.badge.w-hidden-small.w-hidden-tiny",r()?r().total_contributors:"-")]),e('a[id="comments-link"][class="dashboard-nav-link mf '+(Ge.hashMatch("#comments")?"selected":"")+'"][href="#comments"]',{style:"float: left;",onclick:Ge.analytics.event({cat:"project_view",act:"project_comments_view",project:r()})},["Comments ",r()?e('fb:comments-count[href="http://www.myjvn.com/'+r().permalink+'"][class="badge project-fb-comment w-hidden-small w-hidden-tiny"][style="display: inline"]',e.trust("&nbsp;")):"-"])]),r()?e(".w-col.w-col-4.w-hidden-small.w-hidden-tiny",r().open_for_contributions?[e(".w-row.project-nav-back-button",[e(".w-col.w-col-6.w-col-medium-8",[e('a.w-button.btn[href="/projects/'+r().project_id+'/contributions/new"]',{
onclick:Ge.analytics.event({cat:"contribution_create",act:"contribution_floatingbtn_click",project:r()})},"Support this project")]),e(".w-col.w-col-6.w-col-medium-4",{onclick:Ge.analytics.event({cat:"project_view",act:"project_floatingreminder_click",project:r()})},[e.component(Zr,{project:r,type:"button",hideTextOnMobile:!0})])])]:""):""])])]),t.isFixed()&&!r().is_owner_or_admin?e(".w-section.project-nav"):""]:"")}},gn={controller:function(e){var t="selectedReward",o=Yt,r=function(e,t){return!t&&e.focus()},n=function(){var e=Ge.monetaryToFloat(o.contributionValue);return e<o.selectedReward().minimum_value?o.error("The support amount for this reward must be at least Rs"+o.selectedReward().minimum_value):(o.error(""),Ge.navigateTo("/projects/"+ko.currentProject().project_id+"/contributions/fallback_create?contribution%5Breward_id%5D="+o.selectedReward().id+"&contribution%5Bvalue%5D="+e)),!1};if(Ge.getStoredObject(t)){var i=Ge.getStoredObject(t),a=i.value,l=i.reward;Ge.removeStoredObject(t),o.selectedReward(l),o.contributionValue(Ge.applyMonetaryMask(a+",00")),n()}return{applyMask:o.applyMask,error:o.error,submitContribution:n,openedReward:o.selectedReward,selectReward:o.selectReward,contributionValue:o.contributionValue,setInput:r}},view:function(t,r){var n=r.project()||{open_for_contributions:!1};return e("#rewards.u-marginbottom-30",o.map(r.rewardDetails(),function(r){return e('div[class="'+(Ge.rewardSouldOut(r)?"card-gone":"card-reward "+(n.open_for_contributions?"clickable":""))+' card card-secondary u-marginbottom-10"]',{onclick:Ge.analytics.event({cat:"contribution_create",act:"contribution_reward_click",lbl:r.minimum_value,project:n,extraData:{reward_id:r.id,reward_value:r.minimum_value}},t.selectReward(r))},[r.minimum_value>=100?e(".tag-circle-installment",[e(".fontsize-smallest.fontweight-semibold.lineheight-tightest","3x"),e(".fontsize-mini.lineheight-tightest","s/ interest")]):"",e(".u-marginbottom-20",[e(".fontsize-base.fontweight-semibold","For Rs "+Ge.formatNumber(r.minimum_value)+" or more"),e(".fontsize-smaller.fontweight-semibold",Ge.pluralize(r.paid_count," apoio"," apoios")),r.maximum_contributions>0?[r.waiting_payment_count>0?e(".maximum_contributions.in_time_to_confirm.clearfix",[e(".pending.fontsize-smallest.fontcolor-secondary",Ge.pluralize(r.waiting_payment_count," Support in confirmation period"," Support in confirmation period...."))]):"",Ge.rewardSouldOut(r)?e(".u-margintop-10",[e("span.badge.badge-gone.fontsize-smaller","Out of stock")]):e(".u-margintop-10",[e("span.badge.badge-attention.fontsize-smaller",[e("span.fontweight-bold","Limitada"),n.open_for_contributions?" ("+Ge.rewardRemaning(r)+" in "+r.maximum_contributions+" Available)":""])])]:""]),e(".fontsize-smaller.u-margintop-20",e.trust(Ge.simpleFormat(Ge.strip(r.description)))),o.isEmpty(r.deliver_at)?"":e(".fontsize-smaller",[e("b","Estimated Delivery: "),Ge.momentify(r.deliver_at,"MMM/YYYY")]),n.open_for_contributions&&!Ge.rewardSouldOut(r)?[t.openedReward().id===r.id?e(".w-form",[e("form.u-margintop-30",{onsubmit:t.submitContribution},[e(".divider.u-marginbottom-20"),e(".fontcolor-secondary.u-marginbottom-10","Value of support"),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".back-reward-input-reward.placeholder","Rs")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e('input.w-input.back-reward-input-reward[type="tel"]',{config:t.setInput,onkeyup:e.withAttr("value",t.applyMask),value:t.contributionValue()}))]),e('input.w-button.btn.btn-medium[type="submit"][value="Continue >"]'),t.error().length>0?e(".text-error",[e("br"),e("span.fa.fa-exclamation-triangle")," "+t.error()]):""])]):""]:""])}))}},hn={view:function(t,r){var n=r.project(),i=function(e){return"/projects/"+n.project_id+"/contributions/new?amount="+e},a=[10,25,50,100];return e("#suggestions",o.map(a,function(t){return n?e('a[href="'+i(t)+'"].card-reward.card-big.card-secondary.u-marginbottom-20',[e(".fontsize-larger","Rs¬†"+t)]):""}))}},_n={controller:function(t){var r=(e.prop([]),e.prop([])),n=i.paginationVM($e.contributor),a=i.filtersVM({project_id:"eq"}),l=i.filtersVM({project_id:"eq"}),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]],r=0;return o.map(e,function(e,o){t[r].length>=3&&(r+=1,t[r]=[]),t[r].push(e)}),t},c=e.prop({});l.project_id(t.project().project_id),a.project_id(t.project().project_id),n.collection().length||n.firstPage(l.parameters());var d=i.loader($e.projectContributionsPerDay.getRowOptions(a.parameters()));d.load().then(r);var u=[["state","Backed","Rs backed (% Of total)"]],m=function(t){return o.isEmpty(t)?[]:o.map(o.first(t).source,function(t){var o=[];return o.push(t.state_acronym||"Outro/other"),o.push(t.total_contributions),o.push([t.total_contributed,[e('input[type="hidden"][value="'+t.total_contributed+'"'),"Rs ",Ge.formatNumber(t.total_contributed,2,3),e("span.w-hidden-small.w-hidden-tiny"," ("+t.total_on_percentage.toFixed(2)+"%)")]]),u.push(o)})},p=i.loader($e.projectContributionsPerLocation.getRowOptions(a.parameters()));p.load().then(m);var f=i.loader($e.projectContributiorsStat.getRowOptions(a.parameters()));return f.load().then(function(e){return c(o.first(e))}),{listVM:n,filterVM:l,groupedCollection:s,lContributionsStats:f,contributionsPerLocationTable:u,lContributionsPerLocation:p,contributionsPerDay:r,lContributionsPerDay:d,contributionsStats:c}},view:function(t,r){var n=t.listVM,i=t.contributionsStats(),a=t.groupedCollection(n.collection());return e("#project_contributions",e("#contributions_top",[e(".section.w-section",e(".w-container",e(".w-row",t.lContributionsStats()?Ge.loader():o.isEmpty(i)?"":[e(".u-marginbottom-20.u-text-center-small-only.w-col.w-col-6",[e(".fontsize-megajumbo",i.total),e(".fontsize-large","People support this project")]),e(".w-col.w-col-6",e(".card.card-terciary.u-radius",e(".w-row",[e(".u-marginbottom-20.w-col.w-col-6.w-col-small-6",[e(".fontweight-semibold.u-marginbottom-10","New supporters"),e(".fontsize-largest.u-marginbottom-10",Math.floor(i.new_percent)+"%"),e(".fontsize-smallest","Supporters who had never supported a project in JVN")]),e(".w-col.w-col-6.w-col-small-6",[e(".divider.u-marginbottom-20.w-hidden-main.w-hidden-medium.w-hidden-small"),e(".fontweight-semibold.u-marginbottom-10","Recurring supporters"),e(".fontsize-largest.u-marginbottom-10",Math.ceil(i.returning_percent)+"%"),e(".fontsize-smallest","Supporters who had already supported a project in JVN")])])))]))),e(".divider.w-section"),e(".section.w-section",e(".w-container",[e(".fontsize-large.fontweight-semibold.u-marginbottom-40.u-text-center","Supporters"),e(".project-contributions.w-clearfix",o.map(a,function(t,n){return e(".w-row",o.map(t,function(t){return e(".project-contribution-item.w-col.w-col-4",[e(".card.card-backer.u-marginbottom-20.u-radius.u-text-center",[e('a[href="/users/'+t.user_id+'"][style="display: block;"]',{onclick:Ge.analytics.event({cat:"project_view",act:"project_backer_link",lbl:t.user_id,project:r.project()})},[e('img.thumb.u-marginbottom-10.u-round[src="'+(o.isEmpty(t.data.profile_img_thumbnail)?"/assets/catarse_bootstrap/user.jpg":t.data.profile_img_thumbnail)+'"]')]),e('a.fontsize-base.fontweight-semibold.lineheigh-tight.link-hidden-dark[href="/users/'+t.user_id+'"]',{onclick:Ge.analytics.event({cat:"project_view",act:"project_backer_link",lbl:t.user_id,project:r.project()})},t.data.public_name||t.data.name),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",t.data.city+","+t.data.state),e(".fontsize-smaller",[e("span.fontweight-semibold",t.data.total_contributed_projects)," Backed ¬†| ¬†",e("span.fontweight-semibold",t.data.total_published_projects)," Created"]),e(".btn-bottom-card.w-row",[e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3"),e(".w-col.w-col-6.w-col-small-4.w-col-tiny-6",[e(tn,{follow_id:t.user_id,following:t.is_follow})]),e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3")])])])}))})),e(".w-row.u-marginbottom-40.u-margintop-20",[e(".w-col.w-col-2.w-col-push-5",[n.isLoading()?Ge.loader():n.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:n.nextPage},"Load more")])])]))]),e(".before-footer.bg-gray.section.w-section",e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[t.lContributionsPerDay()?Ge.loader():e.component(Bo,{collection:t.contributionsPerDay,label:"Rs Collected per day",dataKey:"total_amount",xAxis:function(e){return Ge.momentify(e.paid_at)},emptyState:"Unaccounted support"})])]),e(".w-row",e(".w-col.w-col-12.u-text-center",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center","Where does the support come from?"),t.lContributionsPerLocation()?Ge.loader():o.isEmpty(o.rest(t.contributionsPerLocationTable))?"":e.component(Uo,{table:t.contributionsPerLocationTable,defaultSortIndex:-2})]))])))}},vn={controller:function(t){var o=Ge.toggleProp(!1,!0),r=e.prop(!1),n=e.prop(!1),a=Ge.getUser()||{},l=e.prop(a.email),s=e.prop(""),c=e.prop(""),d=e.prop(!1),u="report",m=ko.currentProject(),p=m&&Ge.callStoredAction(u)==m.project_id,f=function(){return _.isEmpty(a)?(Ge.storeAction(u,m.project_id),Ge.navigateToDevise()):void o.toggle()},w=function(){n(!0);var e=$e.projectReport.postOptions({email:l(),details:s(),reason:c(),project_id:m.project_id});return d=i.loaderWithToken(e),d.load().then(r(!0)),n(!1),!1},b=function(e,t){!t&&p&&Ge.animateScrollTo(e)};return!_.isEmpty(a)&&p&&o(!0),{checkScroll:b,checkLogin:f,displayForm:o,sendSuccess:r,submitDisabled:n,sendReport:w,user:a,email:l,details:s,reason:c}},view:function(t,o){t.user;return e(".card.card-terciary.u-radius",[e(".fontsize-small.u-marginbottom-20",["This project disrespects",e.trust("&nbsp;"),e("a.alt-link[href='http://suporte.catarse.me/hc/pt-br/articles/202387638'][target='_blank']","our rules? ")]),t.sendSuccess()?e(".w-form",e("p","Thank you! Your report has been received.")):[e(".a.w-button.btn.btn-medium.btn-terciary.btn-inline[href='javascript:void(0);']",{onclick:t.checkLogin},"Report this project"),t.displayForm()?e("#report-form.u-margintop-30",e(".w-form",e("form",{onsubmit:t.sendReport,config:t.checkScroll},[e(".fontsize-small.fontweight-semibold.u-marginbottom-10","Why are you denouncing this project?"),e("select.w-select.text-field.positive[required='required']",{onchange:e.withAttr("value",t.reason)},[e("option[value='']","Select a reason"),e("option[value='Intellectual Property infringement']","Intellectual Property infringement"),e("option[value='Slander, libel, defamation or discrimination']","Slander, libel, defamation or discrimination"),e("option[value='Prohibited project scope']","Prohibited project scope"),e("option[value='Forbidden Rewards']","Forbidden Rewards"),e("option[value='Explicit free sex scenes']","Explicit free sex scenes"),e("option[value='SPAM abuse']","SPAM abuse"),e("option[value='Others']","Others")]),e("textarea.w-input.text-field.positive.u-marginbottom-30",{placeholder:"Please give more details to help us identify the problem",onchange:e.withAttr("value",t.details)}),e("input.w-button.btn.btn-medium.btn-inline.btn-dark[type='submit'][value='Send Complaint']",{disabled:t.submitDisabled()})]))):""]])}},yn={view:function(t,o){var r=o.project()||{},n=function(){var e=moment(r.zone_online_date).diff(moment(r.zone_expires_at)),t=moment.duration(e);return-Math.ceil(t.asDays())},i=function(){return r.is_published&&Ge.existy(r.zone_expires_at)?e(".funding-period",[e(".fontsize-small.fontweight-semibold.u-text-center-small-only","Campaign period"),e(".fontsize-small.u-text-center-small-only",Ge.momentify(r.zone_online_date)+" - "+Ge.momentify(r.zone_expires_at)+" ("+n()+" days)")]):""};return e("#project-about",[e(".project-about.w-col.w-col-8",{config:Ge.UIHelper()},[e("p.fontsize-base",[e("strong","The project")]),e('.fontsize-base[itemprop="about"]',e.trust(Ge.selfOrEmpty(r.about_html,"..."))),r.budget?[e("p.fontsize-base.fontweight-semibold","Budget"),e("p.fontsize-base",e.trust(r.budget))]:"",e.component(vn)]),e(".w-col.w-col-4.w-hidden-small.w-hidden-tiny",_.isEmpty(o.rewardDetails())?[e(".fontsize-base.fontweight-semibold.u-marginbottom-30","Suggestions for support"),e.component(hn,{project:o.project}),i()]:[e(".fontsize-base.fontweight-semibold.u-marginbottom-30","Rewards"),e.component(gn,{project:o.project,rewardDetails:o.rewardDetails}),i()])])}},kn={controller:function(){var e=function(e,t){return function(e,t){t||Ge.fbParse()}};return{loadComments:e}},view:function(t,o){var r=o.project();return e(".w-row",[e(".w-col.w-col-7",e('.fb-comments[data-href="http://www.myjvn.com/'+r.permalink+'"][data-num-posts=50][data-width="610"]',{config:t.loadComments()})),e(".w-col.w-col-5",e.component(vn))])}},xn=o.partial(Ge.i18nScope,"projects.posts"),jn={controller:function(e){var t=i.paginationVM($e.projectPostDetail),r=i.filtersVM({project_id:"eq",id:"eq"}),n=function(t,r){!r&&o.isNumber(e.post_id)&&(console.log("Will scroll to posts"),Ge.animateScrollTo(t))};return r.project_id(e.project().project_id),o.isNumber(e.post_id)&&r.id(e.post_id),t.collection().length||t.firstPage(r.parameters()),{listVM:t,filterVM:r,scrollTo:n}},view:function(r,n){var i=r.listVM,a=n.project()||{};return e("#posts.project-posts.w-section",{config:r.scrollTo},[e(".w-container.u-margintop-20",[a.is_owner_or_admin?[i.isLoading()?"":o.isEmpty(i.collection())?e(".w-hidden-small.w-hidden-tiny",[e(".fontsize-base.u-marginbottom-30.u-margintop-20","All news published in JVN is sent directly to the email of who has already supported his campaign and is also available for viewing on the site. You can choose to leave it public, or visible only to your supporters here on this tab.")]):""]:"",o.map(i.collection(),function(t){return e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",[e(".post",[e(".u-marginbottom-60 .w-clearfix",[e(".fontsize-small.fontcolor-secondary.u-text-center",Ge.momentify(t.created_at)),e("p.fontweight-semibold.fontsize-larger.u-text-center.u-marginbottom-30",[e('a.link-hidden[href="/projects/'+t.project_id+"/posts/"+t.id+'#posts"]',t.title)]),o.isEmpty(t.comment_html)?e(".fontsize-base","Exclusive post for supporters."):e(".fontsize-base",e.trust(t.comment_html))]),e(".divider.u-marginbottom-60")])]),e(".w-col.w-col-1")])}),e(".w-row",[o.isUndefined(n.post_id)?i.isLoading()?e(".w-col.w-col-2.w-col-push-5",Ge.loader()):0===i.collection().length&&0===n.projectContributions().length?a.is_owner_or_admin?"":e(".w-col.w-col-10.w-col-push-1",e("p.fontsize-base",e.trust(t.t("empty",xn({project_user_name:n.userDetails().name,project_id:a.project_id}))))):e(".w-col.w-col-2.w-col-push-5",i.isLastPage()?0===i.collection().length?"No news.":"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:i.nextPage},"Load more")):""])])])}},zn={controller:function(t){var r=e.prop(window.location.hash),n=function(n){var i={project:n,post_id:t.post_id},a={"#rewards":e(".w-col.w-col-12",e.component(gn,o.extend({},{rewardDetails:t.rewardDetails},i))),"#contribution_suggestions":e.component(hn,i),"#contributions":e.component(_n,i),"#about":e.component(yn,o.extend({},{rewardDetails:t.rewardDetails},i)),"#comments":e.component(kn,i),"#posts":e.component(jn,o.extend({},{projectContributions:t.projectContributions,userDetails:t.userDetails},i))};return o.isNumber(t.post_id)&&!window.location.hash&&(window.location.hash="posts"),r(window.location.hash),o.isEmpty(r())||"#_=_"===r()||"#preview"===r()?a["#about"]:a[r()]};return Ge.redrawHashChange(),{displayTabContent:n,hash:r}},view:function(t,o){return e('section.section[itemtype="http://schema.org/CreativeWork"]',[e(""+("#contributions"!==t.hash()?".w-container":".about-tab-content"),[e(".w-row",o.project()?t.displayTabContent(o.project):Ge.loader())])])}},Cn={controller:function(e){var t=e.project_id,r=e.project_user_id;return Ge.analytics.event({cat:"project_view",act:"project_page_view",project:{id:t,user_id:r}}),Ge.analytics.windowScroll({cat:"project_view",act:"project_page_scroll",project:{id:t,user_id:r}}),t&&!o.isNaN(Number(t))?ko.init(t,r):ko.getCurrentProject(),ko},view:function(t,o){var r=t.currentProject;return e(".project-show",{config:t.setProjectPageTitle()},[e.component(wn,{project:r,rewardDetails:t.rewardDetails,userDetails:t.userDetails,projectContributions:t.projectContributions}),e.component(bn,{project:r,rewardDetails:t.rewardDetails}),e.component(zn,{project:r,post_id:o.post_id,rewardDetails:t.rewardDetails,userDetails:t.userDetails,projectContributions:t.projectContributions}),r()&&r().is_owner_or_admin?e.component(Do,{project:r}):""])}},Sn={view:function(t,o){var r=o.user,n=o.hideDetails,i=co.displayImage(r),a=co.displayCover(r);return e(".hero-"+(n?"small":"half"),[e(".w-container.content-hero-profile",e(".w-row.u-text-center",e(".w-col.w-col-8.w-col-push-2",[n?"":e(".u-marginbottom-20",e(".avatar_wrapper",e("img.thumb.big.u-round[alt='User'][src='"+i+"']"))),e(".fontsize-larger.fontweight-semibold.u-marginbottom-20",r.public_name||r.name),n?"":e(".w-hidden-small.w-hidden-tiny.u-marginbottom-40.fontsize-base",["Joined on "+Ge.momentify(r.created_at,"MMMM YYYY"),e("br"),0==r.total_contributed_projects?"Has not yet backed any campaigns":"Backed "+Ge.pluralize(r.total_contributed_projects," campaign"," campaigns"),r.total_published_projects>0?" And already created "+Ge.pluralize(r.total_published_projects," campaign"," campaigns"):""])]))),e(".hero-profile",{style:"background-image:url('"+a+"');"})])}},Pn={view:function(t,o){return e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle",e("span"," "+o.message))}},Tn={view:function(t,o){var r=o.collection,n=o.cssClass;return e(".w-col.w-col-2"+n,[r.isLoading()?Ge.loader():r.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:r.nextPage},"Load more")])}},Mn={controller:function(t){var o=(e.prop(),t.userId),r=t.showDraft||!1,n=e.prop(!1),a=i.paginationVM($e.project),l=e.prop(!0),s=i.filtersVM({project_user_id:"eq",state:"in"}),c=["online","waiting_funds","successful","failed"];return r&&c.push("draft"),s.state(c).project_user_id(o).order({updated_at:"desc"}),$e.project.pageSize(9),a.firstPage(s.parameters()).then(function(){l(!1)})["catch"](function(t){n(!0),l(!1),e.redraw()}),{projects:a,loader:l,error:n}},view:function(t,r){var n=t.projects.collection();return e(".content[id='created-tab']",t.error()?e.component(Pn,{message:"Error loading projects."}):t.loader()?Ge.loader():[o.isEmpty(n)?e(".w-container",e(".u-margintop-30.u-text-center.w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".fontsize-large.u-marginbottom-30","It`s Time To Fund Your Idea"),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e("a.btn.btn-large[href='/start']","GET STARTED FOR FREE")),e(".w-col.w-col-3")])]),e(".w-col.w-col-3")])):o.map(n,function(t){return e.component(zo,{project:t,ref:"user_contributed",showFriends:!1})}),o.isEmpty(n)?"":e(".w-row.u-marginbottom-40.u-margintop-30",[e(Tn,{collection:t.projects,cssClass:".w-col-push-5"})])])}},An={controller:function(t){var r=e.prop(),n=t.userId,a=i.paginationVM($e.project),l=e.prop(!1),s=e.prop(!0),c=i.filtersVM({project_id:"in"});return co.getPublicUserContributedProjects(n,null).then(function(e){r(e),o.isEmpty(r())?s(!1):(c.project_id(o.pluck(r(),"project_id")).order({online_date:"desc"}),$e.project.pageSize(9),a.firstPage(c.parameters()).then(function(){s(!1)}))})["catch"](function(t){l(!0),s(!1),e.redraw()}),{projects:a,error:l,loader:s}},view:function(t,r){var n=t.projects.collection();return t.error()?e.component(Pn,{message:"Error loading projects."}):t.loader()?Ge.loader():e(".content[id='contributed-tab']",[o.isEmpty(n)?e(".w-container",e(".u-margintop-30.u-text-center.w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".fontsize-large.u-marginbottom-30","No campaigns backed yet")]),e(".w-col.w-col-3")])):o.map(n,function(t){return e.component(zo,{project:t,ref:"user_contributed",showFriends:!1})}),o.isEmpty(n)?"":e(".w-row.u-marginbottom-40.u-margintop-30",[e(Tn,{collection:t.projects,cssClass:".w-col-push-5"})])])}},En={controller:function(t){var o=e.prop({}),r=t.userId;return co.fetchUser(r,!0,o),{userDetails:o,displayModal:Ge.toggleProp(!1,!0)}},view:function(t){var r=t.userDetails(),n=[en,t.userDetails],i=co.displayImage(r);return e("#user-card",e(".card.card-user.u-radius.u-marginbottom-30[itemprop='author']",[e(".w-row",[e(".w-col.w-col-4.w.col-small-4.w-col-tiny-4.w-clearfix",e("img.thumb.u-round[itemprop='image'][src='"+i+"'][width='100']")),e(".w-col.w-col-8.w-col-small-8.w-col-tiny-8",[e(".fontsize-small.fontweight-semibold.lineheight-tighter[itemprop='name']",e('a.link-hidden[href="/users/'+r.id+'"]',r.public_name||r.name)),e(".fontsize-smallest.lineheight-looser[itemprop='address']",r.address_city),e(".fontsize-smallest",Ge.pluralize(r.total_published_projects," campaign"," campaigns")+" Created"),e(".fontsize-smallest","Backed "+Ge.pluralize(r.total_contributed_projects," campaign"," campaigns"))])]),e(".project-author-contacts",[e("ul.w-list-unstyled.fontsize-smaller.fontweight-semibold",[o.isEmpty(r.facebook_link)?"":e("li",[e('a.link-hidden[itemprop="url"][href="'+r.facebook_link+'"][target="_blank"]',"Facebook Profile")]),o.isEmpty(r.twitter_username)?"":e("li",[e('a.link-hidden[itemprop="url"][href="https://twitter.com/'+r.twitter_username+'"][target="_blank"]',"Twitter Profile")]),o.map(r.links,function(t){return e("li",[e('a.link-hidden[itemprop="url"][href="'+t.link+'"][target="_blank"]',t.link)])})])]),t.displayModal()?e.component(Ro,{displayModal:t.displayModal,content:n}):"",e(tn,{follow_id:r.id,following:r.follwing_this_user,enabledClass:".btn.btn-medium.btn-message.u-marginbottom-10",disabledClass:".btn.btn-medium.btn-message.u-marginbottom-10"}),o.isEmpty(r.email)?"":e("a.btn.btn-medium.btn-message[href='javascript:void(0);']",{onclick:t.displayModal.toggle},"Send Message")]))}},Dn={controller:function(t){var o=e.prop({}),r=e.prop(!0),n=e.prop(!1),i=t.userId;return co.fetchUser(i,!0,o).then(function(){r(!1)})["catch"](function(t){n(!0),r(!1),e.redraw()}),{userDetails:o,error:n,loader:r}},view:function(t,o){var r=t.userDetails();return t.error()?e.component(Pn,{message:"Error loading data."}):t.loader()?Ge.loader():e(".content[id='about-tab']",e(".w-container[id='about-content']",e(".w-row",[e(".w-col.w-col-8",e(".fontsize-base",r.about_html?e.trust(r.about_html):"")),e(".w-col.w-col-4",r.id?e.component(En,{userId:r.id}):Ge.loader)])))}},Rn={controller:function(t){var r=e.prop({}),n=t.user_id.split("-")[0],i=e.prop(window.location.hash),a=function(t){var r={"#created":e.component(Mn,{userId:t.id}),"#contributed":e.component(An,{userId:t.id}),"#about":e.component(Dn,{userId:t.id})};return i(window.location.hash),o.isEmpty(i())||"#_=_"===i()?t.total_published_projects>0?(i("#created"),r["#created"]):t.total_contributed_projects>0?(i("#contributed"),r["#contributed"]):(i("#about"),r["#about"]):r[i()]};return Ge.redrawHashChange(),co.fetchUser(n,!0,r),{displayTabContent:a,hash:i,userDetails:r}},view:function(t,r){var n=t.userDetails();return e("div",[e.component(Sn,{user:n}),e("nav.project-nav.u-text-center.u-marginbottom-30.profile",{style:{"z-index":"10",position:"relative"}},e(".w-container[data-anchor='created']",[o.isEmpty(n)?Ge.loader():n.is_owner_or_admin?e("a.dashboard-nav-link.dashboard[href='/en/users/"+n.id+"/edit']",{config:e.route,onclick:function(){e.route("/users/edit/"+n.id,{user_id:n.id})}},[e("span.fa.fa-cog"),e.trust("&nbsp;")," Edit Profile"]):"",e("a[data-target='#contributed-tab'][href='#contributed'][id='contributed_link'][class='dashboard-nav-link "+("#contributed"===t.hash()?"selected":"")+"']",["Backed ",e.trust("&nbsp;"),e("span.badge",n.total_contributed_projects)]),e("a[data-target='#created-tab'][href='#created'][id='created_link'][class='dashboard-nav-link "+("#created"===t.hash()?"selected":"")+"']",["Created ",e.trust("&nbsp;"),e("span.badge",n.total_published_projects)]),e("a[data-target='#about-tab'][href='#about'][id='about_link'][class='dashboard-nav-link "+("#about"===t.hash()?"selected":"")+"']","About")])),e("section.section",e(".w-container",e(".w-row",n.id?t.displayTabContent(n):Ge.loader())))])}},Nn={controller:function(t){var r=void 0,n=t.user,i={password:e.prop(""),current_password:e.prop(""),uploaded_image:e.prop(co.displayImage(n)),cover_image:e.prop(n.profile_cover_image),email:e.prop(""),permalink:e.prop(n.permalink),public_name:e.prop(n.public_name),facebook_link:e.prop(n.facebook_link),twitter:e.prop(n.twitter_username),links:e.prop(n.links||[]),about_html:e.prop(n.about_html||""),email_confirmation:e.prop("")},a=e.prop(!1),l=e.prop(!1),s=Ge.toggleProp(!1,!0),c=e.prop(!1),d=e.prop(!1),u=e.prop(),m=e.prop(!1),p=e.prop(!1),f=e.prop([]),w=function(){u(f().join("<br/>"))},b=function(){co.fetchUser(t.userId,!1).then(function(e){var t=o.first(e);i.uploaded_image(co.displayImage(t)),i.cover_image(t.profile_cover_image),i.permalink(t.permalink),i.public_name(t.public_name),i.facebook_link(t.facebook_link),i.twitter(t.twitter_username),i.links(t.links),i.about_html(t.about_html)})},g=function(){var r=window.document.getElementById("user_uploaded_image"),a=window.document.getElementById("user_cover_image"),l=new FormData;return l.append("uploaded_image",r.files[0]),t.hideCoverImg||l.append("cover_image",a.files[0]),p(!0),e.redraw(),e.request({method:"POST",url:"/users/"+n.id+"/upload_image.json",data:l,config:Ge.setCsrfToken,serialize:function(e){return e}}).then(function(e){i.uploaded_image(e.uploaded_image),i.cover_image(e.cover_image),p(!1)})["catch"](function(e){o.isArray(e.errors)?f(f().concat(e.errors)):u("Erro ao atualizar informa√ß√µes."),w(),d(!0),p(!1)})},h=function(){var t={current_password:i.current_password(),password:i.password(),email:i.email(),permalink:i.permalink(),public_name:i.public_name(),facebook_link:i.facebook_link(),twitter:i.twitter(),about_html:i.about_html(),links_attributes:k()};return m(!0),g(),e.request({method:"PUT",url:"/users/"+n.id+".json",data:{user:t},config:Ge.setCsrfToken}).then(function(){c(!0),b(),m(!1),e.redraw()})["catch"](function(t){o.isArray(t.errors)?f(f().concat(t.errors)):u("Erro ao atualizar informa√ß√µes."),w(),d(!0),m(!1),e.redraw()})},_=[],v=function(){return i.links().push({link:""})},y=function(e,t){return function(){return i.links()[t]._destroy=!0,!1}},k=function(){return o.reduce(i.links(),function(e,t,o){return e[o.toString()]=t,e},{})},x=function(){return l(i.email()!==i.email_confirmation()),!l()},j=function(){var e=String(i.password());return e.length>0&&e.length<=5&&a(!0),!a()},z=function(e,t){t||(r=function(){return e.submit()})},C=function(){return window.confirm("Tem certeza que deseja desativar a sua conta?")&&r(),!1},S=function(e){return e.preventDefault(),x()?j()?h():(u("Nova senha est√° incorreta."),d(!0)):(u("Confirma√ß√£o de email est√° incorreta."),d(!0)),!1};return setTimeout(e.redraw,0),{removeLinks:_,removeLink:y,addLink:v,fields:i,loading:m,showSuccess:c,showError:d,errors:u,uploading:p,onSubmit:S,emailHasError:l,showEmailForm:s,validateEmailConfirmation:x,passwordHasError:a,validatePassword:j,deleteAccount:C,setDeleteForm:z}},view:function(t,r){var n=r.user||{},i=t.fields;return e("#about-tab.content",[!t.showSuccess()||t.loading()||t.uploading()?"":e.component(lr,{message:"Your information has been updated"}),!t.showError()||t.loading()||t.uploading()?"":e.component(lr,{message:e.trust(t.errors()),error:!0}),e("form.simple_form.w-form",{onsubmit:t.onSubmit},[e('input[name="utf8"][type="hidden"][value="‚úì"]'),e('input[name="_method"][type="hidden"][value="patch"]'),e('input[name="authenticity_token"][type="hidden"][value='+Ge.authenticityToken()+"]"),e("div",e(".w-container",e(".w-row",e(".w-col.w-col-10.w-col-push-1",[n.is_admin?e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","Address"),e("label.field-label.fontsize-smallest.fontcolor-secondary","Your public profile may have a custom URL. Choose an easy to save!    ")]),e(".w-col.w-col-7",e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",e('input.string.optional.w-input.text-field.text-field.positive.prefix[id="user_permalink"][type="text"]',{name:"user[permalink]",value:i.permalink(),onchange:e.withAttr("value",i.permalink)})),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.text-field.postfix.no-hover",e(".fontcolor-secondary.fontsize-smaller","  .myjvn.com/"))]))]):"",e(".w-row.u-marginbottom-30.card.card-terciary",[e(".fontsize-base.fontweight-semibold","Email"),e(".fontsize-small.u-marginbottom-30","Keep this email up to date as it is the communication channel between you, the JVN team and the team of campaigns you have supported. "),e(".fontsize-base.u-marginbottom-40",[e("span.fontweight-semibold.card.u-radius",n.email),e("a.alt-link.fontsize-small.u-marginleft-10[href='javascript:void(0);'][id='update_email']",{onclick:function(){t.showEmailForm.toggle()}},"Change email")]),e((t.showEmailForm()?"":".w-hidden")+".u-marginbottom-20.w-row[id='email_update_form']",[e(".w-col.w-col-6.w-sub-col",[e("label.field-label.fontweight-semibold","New Email"),e("input.w-input.text-field.positive[id='new_email'][name='new_email'][type='email']",{"class":t.emailHasError()?"error":"",value:i.email(),onfocus:function(){return t.emailHasError(!1)},onchange:e.withAttr("value",i.email)})]),e(".w-col.w-col-6",[e("label.field-label.fontweight-semibold","Confirm Email"),e("input.string.required.w-input.text-field.w-input.text-field.positive[id='new_email_confirmation'][name='user[email]'][type='text']",{"class":t.emailHasError()?"error":"",value:i.email_confirmation(),onfocus:function(){return t.emailHasError(!1)},onblur:t.validateEmailConfirmation,onchange:e.withAttr("value",i.email_confirmation)})]),t.emailHasError()?e(Pn,{message:"Email confirmation is incorrect."}):""])]),e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Name"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  This is the name that users will see in your profile. It can not be changed after a campaign has been supported or published.")]),e(".w-col.w-col-7",e('input.string.optional.w-input.text-field.positive[id="user_public_name"][type="text"]',{name:"user[public_name]",value:i.public_name(),onchange:e.withAttr("value",i.public_name)}))]),e(".w-form",[e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Profile Picture"),e("label.field-label.fontsize-smallest.fontcolor-secondary"," This image will be used as your profile picture (PNG, JPG size 280x280).")]),e(".w-col.w-col-4.w-sub-col",e(".input.file.optional.user_uploaded_image.field_with_hint",[e("label.field-label"),e("span.hint",e('img[alt="User avatar"][src="'+i.uploaded_image()+'"]')),e('input.file.optional.w-input.text-field[id="user_uploaded_image"][type="file"]',{name:"user[uploaded_image]"})]))]),r.hideCoverImg?"":e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Profile Cover Image"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  This image will be used as the background of your public profile header (PNG or JPG). If you do not submit any images here, we will use your profile image as an alternative.")]),e(".w-col.w-col-4.w-sub-col",e(".input.file.optional.user_cover_image",[e("label.field-label"),e("span.hint",n.profile_cover_image?e("img",{src:i.cover_image()}):""),e('input.file.optional.w-input.text-field[id="user_cover_image"][type="file"]',{name:"user[cover_image]"})]))])]),e(".w-row",e(".w-col",e(".card.card-terciary.u-marginbottom-30",[e("label.field-label.fontweight-semibold","About"),e("label.field-label.fontsize-smallest.fontcolor-secondary.u-marginbottom-20","Talk about yourself and try to provide the most relevant information so visitors can get to know you better."),e(".w-form",e(".preview-container.u-marginbottom-40",Ge.redactor("user[about_html]",i.about_html)))]))),e(".w-form.card.card-terciary.u-marginbottom-30",[e(".w-row.u-marginbottom-10",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Facebook Profile"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  Paste your profile link")]),e(".w-col.w-col-7",e('input.string.optional.w-input.text-field.positive[type="text"]',{
name:"user[facebook_link]",value:i.facebook_link(),onchange:e.withAttr("value",i.facebook_link)}))]),e(".w-row.u-marginbottom-10",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Twitter Profile"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  Paste your profile link")]),e(".w-col.w-col-7",e('input.string.optional.w-input.text-field.positive[type="text"]',{name:"user[twitter]",value:i.twitter(),onchange:e.withAttr("value",i.twitter)}))])]),e(".w-form.card.card-terciary.u-marginbottom-30",e(".w-row.u-marginbottom-10",[e(".w-col.w-col-5.w-sub-col",[e('label.field-label.fontweight-semibold[for="name-8"]'," Internet Presence"),e('label.field-label.fontsize-smallest.fontcolor-secondary[for="name-8"]'," Include links to help other users get to know you better. ")]),e(".w-col.w-col-7",[e(".w-row",[i.links()&&i.links().length<=0?"":e(".link",o.map(i.links(),function(o,r){var n=o._destroy;return e("div",{key:r,"class":n?"w-hidden":"none"},[e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",e('input.string.w-input.text-field.w-input.text-field][type="text"][value="'+o.link+'"]',{"class":""===o.link?"positive":"optional",name:"user[links_attributes]["+r+"][link]",onchange:e.withAttr("value",function(e){return i.links()[r].link=e})})),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e("a.btn.btn-small.btn-terciary.fa.fa-lg.fa-trash.btn-no-border",{onclick:t.removeLink(o.id,r)})])])}))]),e(".w-row",[e(".w-col.w-col-6.w-col-push-6",e("a.btn.btn-small.btn-terciary",{onclick:t.addLink},e("span.translation_missing","Add Link")))])])])),r.hidePasswordChange?"":e(".w-form.card.card-terciary.u-marginbottom-30",e(".w-row.u-marginbottom-10",[e(".fontsize-base.fontweight-semibold","Change my password"),e(".fontsize-small.u-marginbottom-20","In order for the password to be changed you must confirm your current password."),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-6.w-sub-col",[e("label.field-label.fontweight-semibold"," Current Password"),e("input.password.optional.w-input.text-field.w-input.text-field.positive[id='user_current_password'][name='user[current_password]'][type='password']",{value:i.current_password(),onchange:e.withAttr("value",i.current_password)})]),e(".w-col.w-col-6",[e("label.field-label.fontweight-semibold"," New Password"),e("input.password.optional.w-input.text-field.w-input.text-field.positive[id='user_password'][name='user[password]'][type='password']",{"class":t.passwordHasError()?"error":"",value:i.password(),onfocus:function(){return t.passwordHasError(!1)},onblur:t.validatePassword,onchange:e.withAttr("value",i.password)}),t.passwordHasError()?e(Pn,{message:"Your new password must be at least 6 characters long."}):""])])])),r.hideDisableAcc?"":e(".w-form.card.card-terciary.u-marginbottom-30",e(".w-row.u-marginbottom-10",[e(".fontweight-semibold.fontsize-smaller","Disable my account"),e(".fontsize-smallest","All your support will be converted into anonymous backups, your data will no longer be visible, you will automatically exit the system and your account will be permanently disabled."),e("a.alt-link.fontsize-smaller[href='/en/users/"+n.id+"'][rel='nofollow']",{onclick:t.deleteAccount},"Disable my JVN account"),e("form.w-hidden",{action:"/en/users/"+n.id,method:"post",config:t.setDeleteForm},[e("input[name='authenticity_token'][type='hidden'][value='"+Ge.authenticityToken()+"']"),e("input[name='_method'][type='hidden'][value='delete']")])]))])))),e("div",e(".w-container"+(r.useFloatBtn?".w-section.save-draft-btn-section":""),e(".w-row",[e(".w-col.w-col-4.w-col-push-4",[e('input[id="anchor"][name="anchor"][type="hidden"][value="about_me"]'),t.loading()||t.uploading()?Ge.loader():e('input.btn.btn.btn-large[name="commit"][type="submit"][value="Save"]',{onclick:t.onSubmit})]),e(".w-col.w-col-4")])))])])}},Fn=o.partial(Ge.i18nScope,"payment.state"),In={controller:function(e){var t=function(e,t){co.confirmDelivery(e,t).then(t.delivery_status="received")};return{toggleAnonymous:co.toggleAnonymous,confirmDelivery:t}},view:function(t,r){var n=r.collection,i=r.pagination,a=r.title;return o.isEmpty(n)?e("div",""):e(".section-one-column.u-marginbottom-30",[e(".fontsize-large.fontweight-semibold.u-marginbottom-30.u-text-center",a),e(".w-row.w-hidden-small.w-hidden-tiny.card.card-secondary",[e(".w-col.w-col-3",e(".fontsize-small.fontweight-semibold","Projects I supported")),e(".w-col.w-col-2",e(".fontsize-small.fontweight-semibold","Value of support")),e(".w-col.w-col-3",e(".fontsize-small.fontweight-semibold","Support Status")),e(".w-col.w-col-4",e(".fontsize-small.fontweight-semibold","Reward"))]),o.map(n,function(o){return e(".w-row.card",[e(".w-col.w-col-3",e(".w-row",[e(".w-col.w-col-4.u-marginbottom-10",e("a[href='/"+o.permalink+"']",e("img.thumb-project.u-radius[alt='"+o.project_name+"'][src='"+o.project_image+"'][width='50']"))),e(".w-col.w-col-8",e(".fontsize-small.fontweight-semibold",e("a.alt-link[href='/"+o.permalink+"']",o.project_name)))])),e(".w-col.w-col-2.u-marginbottom-10",e(".fontsize-base.inline-block",[e("span.w-hidden-main.w-hidden-medium.fontweight-semibold","Value of support")," Rs "+o.value])),e(".w-col.w-col-3.u-marginbottom-10",[e(".w-hidden-main.w-hidden-medium.fontsize-smallest.fontweight-semibold","Status"),e(".fontsize-smaller.fontweight-semibold",[e(".lineheight-tighter"),e("span.fa.fa-circle.fontsize-smallest."+("paid"==o.state?"text-success":"pending"==o.state?"text-waiting":"text-error"),e.trust("&nbsp;")),I18n.t(o.state,Fn({date:Ge.momentify(o[o.state+"_at"])}))]),e(".fontsize-smallest",o.installments>1?o.installments+" x R$ "+o.installment_value+" ":"","BoletoBancario"==o.payment_method?"Boleto Banc√°rio":"Cart√£o de Cr√©dito"),fn.canShowReceipt(o)?e("a.btn.btn-inline.btn-small.u-margintop-10.btn-terciary[href='https://www.myjvn.com/en/projects/"+o.project_id+"/contributions/"+o.contribution_id+"/receipt'][target='__blank']","View Receipt"):"",fn.canShowSlip(o)?e("a.btn.btn-inline.btn-small.u-margintop-10[href='"+o.gateway_data.boleto_url+"'][target='__blank']","Print Ticket"):"",fn.canGenerateSlip(o)?e("a.btn.btn-inline.btn-small.u-margintop-10[href='https://www.myjvn.com/en/projects/"+o.project_id+"/contributions/"+o.contribution_id+"/second_slip'][target='__blank']","Generate 2nd via"):"",e(".w-checkbox.fontsize-smallest.fontcolor-secondary.u-margintop-10",[e("input.w-checkbox-input[id='anonymous'][name='anonymous'][type='checkbox']"+(o.anonymous?"[checked='checked']":"")+"[value='1']",{onclick:function(){return t.toggleAnonymous(o.project_id,o)}}),e("label.w-form-label","I want my support not to be public")])]),e(".w-col.w-col-3",e(".fontsize-smallest",[e("span.w-hidden-main.w-hidden-medium.fontweight-semibold","Reward"),o.reward_id?e.trust(Ge.simpleFormat(o.reward_description)):" You have not selected a reward"]),e(".fontsize-smallest.lineheight-looser",[e("span.fontweight-semibold","Estimated delivery: "),Ge.momentify(o.deliver_at,"MMMM/YYYY")])),e(".u-text-center.w-col.w-col-1",{onclick:function(){return t.confirmDelivery(o.project_id,o)}},[e(".fontsize-smallest",e("a.checkbox-big"+("received"==o.delivery_status?".checkbox--selected.fa.fa-check.fa-lg":""),"")),e(".fontcolor-secondary.fontsize-smallest.lineheight-looser","Recebi!")])])}),e(".w-row.u-marginbottom-40.u-margintop-30",[e(Tn,{collection:i,cssClass:".w-col-push-5"})])])}},qn={controller:function(t){var o=t.userId,r=(i.paginationVM($e.project),i.paginationVM($e.userContribution)),n=i.paginationVM($e.userContribution),a=i.paginationVM($e.userContribution),l=e.prop(!1),s=e.prop(!0),c=function(){l(!0),s(!1),e.redraw()},d=i.filtersVM({user_id:"eq",state:"in",project_state:"in"});return $e.userContribution.pageSize(9),d.user_id(o).order({created_at:"desc"}).state(["refunded","pending_refund","paid","refused","pending"]),d.project_state(["online","waiting_funds"]),r.firstPage(d.parameters()).then(function(){s(!1)})["catch"](c),d.project_state(["successful"]),n.firstPage(d.parameters()).then(function(){s(!1)})["catch"](c),d.project_state(["failed"]),a.firstPage(d.parameters()).then(function(){s(!1)})["catch"](c),{onlinePages:r,successfulPages:n,failedPages:a,error:l,loader:s}},view:function(t,r){var n=t.onlinePages.collection(),i=t.successfulPages.collection(),a=t.failedPages.collection();return e(".content[id='private-contributed-tab']",t.error()?e.component(Pn,{message:"Error loading projects."}):t.loader()?Ge.loader():o.isEmpty(n)&&o.isEmpty(i)&&o.isEmpty(a)?e(".w-container",e(".w-row.u-margintop-30.u-text-center",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".fontsize-large.u-marginbottom-30",["You Have Not Backed Any Campaign"]),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e("a.btn.btn-large[href='/en/explore']",{config:e.route,onclick:function(){e.route("/explore")}},"SUPPORT NOW!")),e(".w-col.w-col-3")])]),e(".w-col.w-col-3")])):[e.component(In,{title:"Projects in progress",collection:n,pagination:t.onlinePages}),e.component(In,{title:"Successful Projects",collection:i,pagination:t.successfulPages}),e.component(In,{title:"Non-funded projects",collection:a,pagination:t.failedPages})])}},On={controller:function(t){var r=t.user,n={owner_document:e.prop(r.owner_document),country_id:e.prop(r.address.country_id),street:e.prop(r.address.street),number:e.prop(r.address.number),city:e.prop(r.address.city),zipcode:e.prop(r.address.zipcode),complement:e.prop(r.address.complement),neighbourhood:e.prop(r.address.neighbourhood),state:e.prop(r.address.state),phonenumber:e.prop(r.address.phonenumber),name:e.prop(r.name)},a=t.userId,l=e.prop(""),s=e.prop(),c=e.prop(),d=e.prop(!0),u=e.prop(!1),m=e.prop(!1),p=i.loader($e.country.getPageOptions()),f=i.loader($e.state.getPageOptions()),w=o.partial(Ge.mask,"(99) 9999-99999"),b=o.partial(Ge.mask,"999.999.999-99"),g=o.partial(Ge.mask,"99.999.999/9999-99"),h=o.partial(Ge.mask,"99999-999"),_=e.prop(!1),v=function(e){Ge.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",Ge.authenticityToken())},y=function(t){var r={country_id:n.country_id(),address_street:n.street(),address_number:n.number(),address_city:n.city(),address_zip_code:n.zipcode(),address_complement:n.complement(),address_state:n.state(),address_neighbourhood:n.neighbourhood(),phone_number:n.phonenumber(),owner_document:n.owner_document(),name:n.name()};return e.request({method:"PUT",url:"/users/"+t+".json",data:{user:r},config:v}).then(function(){u(!0),e.redraw()})["catch"](function(t){l(o.isArray(t.errors)?t.errors.join("<br>"):"Error updating information."),m(!0),e.redraw()})},k=function(){var e=n.owner_document(),t=String(e).replace(/[\.|\-|\/]*/g,"");return e.length>14?Ge.validateCnpj(e):e.length>0?Ge.validateCpf(t):void 0},x=function(){return k()?y(a):(l("Invalid CPF/CNPJ"),m(!0)),!1},j=o.compose(n.zipcode,h),z=o.compose(n.phonenumber,w),C=function(e){e.length>14?(_(!0),n.owner_document(g(e))):(_(!1),n.owner_document(b(e)))};return p.load().then(s),f.load().then(c),{applyDocumentMask:C,applyZipcodeMask:j,applyPhoneMask:z,countries:s,states:c,fields:n,loader:d,showSuccess:u,showError:m,user:r,onSubmit:x,error:l}},view:function(t,r){var n=(t.user,t.fields);return e("[id='settings-tab']",[t.showSuccess()?e.component(lr,{message:"Your information has been updated"}):"",t.showError()?e.component(lr,{message:e.trust(t.error()),error:!0}):"",e("form.w-form",{onsubmit:t.onSubmit},[e("div",[e(".w-container",e(".w-col.w-col-10.w-col-push-1",e(".w-form.card.card-terciary.u-marginbottom-20",[e(".fontsize-base.fontweight-semibold"),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-6.w-sub-col",e("input.string.optional.w-input.text-field.w-input.text-field.positive[id='user_name'][name='user[name]'][type='text']",{value:n.name(),onchange:e.withAttr("value",n.name)})),e(".w-col.w-col-6")]),e(".fontsize-base.fontweight-semibold","CPF / CNPJ"),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-6.w-sub-col",e("input.string.tel.optional.w-input.text-field.w-input.text-field.positive[data-validate-cpf-cnpj='true'][id='user_cpf'][name='user[cpf]'][type='tel']",{value:n.owner_document(),onchange:e.withAttr("value",t.applyDocumentMask),onkeyup:e.withAttr("value",t.applyDocumentMask)})),e(".w-col.w-col-6")]),e(".divider.u-marginbottom-20"),e(".fontsize-base.fontweight-semibold","Address"),e(".fontsize-small.u-marginbottom-20","This is the address you were informed when making your last support. If you have changed your address, change here and, if you are waiting for some reward, notify the director of the project supported by email."),e(".w-row",[e(".input.select.optional.user_country.w-col.w-col-6.w-sub-col",[e("label.field-label","Parents"),e("select.select.optional.w-input.text-field.w-select.positive[id='user_country_id'][name='user[country_id]']",{onchange:e.withAttr("value",n.country_id)},[e("option[value='']"),o.isEmpty(t.countries())?"":o.map(t.countries(),function(t){return e("option"+(t.id==n.country_id()?'[selected="selected"]':""),{value:t.id},t.name)})])]),e(".w-col.w-col-6")]),e(".w-row",[e(".input.string.optional.user_address_street.w-col.w-col-6.w-sub-col",[e("label.field-label","Address"),e("input.string.optional.w-input.text-field.w-input.text-field.positive[data-required-in-brazil='true'][id='user_address_street'][name='user[address_street]'][type='text']",{value:n.street(),onchange:e.withAttr("value",n.street)}),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_address_street']"," translation missing: pt.simple_form.validation_texts.user.address_street")]),e(".w-col.w-col-6",e(".w-row",[e(".input.tel.optional.user_address_number.w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("label.field-label","Number"),e("input.string.tel.optional.w-input.text-field.w-input.text-field.positive[id='user_address_number'][name='user[address_number]'][type='tel']",{value:n.number(),onchange:e.withAttr("value",n.number)}),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_address_number']"," translation missing: pt.simple_form.validation_texts.user.address_number")]),e(".input.string.optional.user_address_complement.w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("label.field-label","Complement"),e("input.string.optional.w-input.text-field.w-input.text-field.positive[id='user_address_complement'][name='user[address_complement]'][type='text']",{value:n.complement(),onchange:e.withAttr("value",n.complement)})])]))]),e(".w-row",[e(".input.string.optional.user_address_neighbourhood.w-col.w-col-6.w-sub-col",[e("label.field-label","Neighborhood"),e("input.string.optional.w-input.text-field.w-input.text-field.positive[id='user_address_neighbourhood'][name='user[address_neighbourhood]'][type='text']",{value:n.neighbourhood(),onchange:e.withAttr("value",n.neighbourhood)})]),e(".input.string.optional.user_address_city.w-col.w-col-6",[e("label.field-label","City"),e("input.string.optional.w-input.text-field.w-input.text-field.positive[data-required-in-brazil='true'][id='user_address_city'][name='user[address_city]'][type='text']",{value:n.city(),onchange:e.withAttr("value",n.city)}),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_address_city']"," translation missing: pt.simple_form.validation_texts.user.address_city")])]),e(".w-row",[e(".input.select.optional.user_address_state.w-col.w-col-6.w-sub-col",[e("label.field-label","state"),e("select.select.optional.w-input.text-field.w-select.text-field.positive[data-required-in-brazil='true'][id='user_address_state'][name='user[address_state]']",{onchange:e.withAttr("value",n.state)},[e("option[value='']"),o.isEmpty(t.states())?"":o.map(t.states(),function(t){return e("option[value='"+t.acronym+"']"+(t.acronym==n.state()?'[selected="selected"]':""),{value:t.acronym},t.name)}),e("option[value='Other / Other']","Other / Other")]),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_address_state']"," translation missing: pt.simple_form.validation_texts.user.address_state")]),e(".w-col.w-col-6",e(".w-row",[e(".input.tel.optional.user_address_zip_code.w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("label.field-label","CEP"),e("input.string.tel.optional.w-input.text-field.w-input.text-field.positive[data-fixed-mask='99999-999'][data-required-in-brazil='true'][id='user_address_zip_code'][name='user[address_zip_code]'][type='tel']",{value:n.zipcode(),onchange:e.withAttr("value",n.zipcode)}),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_address_zip_code']"," translation missing: pt.simple_form.validation_texts.user.address_zip_code")]),e(".input.tel.optional.user_phone_number.w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("label.field-label","Phone"),e("input.string.tel.optional.w-input.text-field.w-input.text-field.positive[data-fixed-mask='(99) 9999-99999'][data-required-in-brazil='true'][id='user_phone_number'][name='user[phone_number]'][type='tel']",{value:n.phonenumber(),onchange:e.withAttr("value",n.phonenumber),onkeyup:e.withAttr("value",function(e){return t.applyPhoneMask(e)})})])]))])]))),e("div",e(".w-container",e(".w-row",[e(".w-col.w-col-4.w-col-push-4",e("input.btn.btn.btn-large[name='commit'][type='submit'][value='Save']")),e(".w-col.w-col-4")])))])])])}},Vn={controller:function(t){$e.bank.pageSize(!1);var r=void 0,n=t.user,a=e.prop({}),l={owner_name:e.prop(""),agency:e.prop(""),bank_id:e.prop(""),agency_digit:e.prop(""),account:e.prop(""),account_digit:e.prop(""),owner_document:e.prop(""),bank_account_id:e.prop("")},s=t.userId,c=e.prop(""),d=e.prop(!1),u=e.prop(!0),m=e.prop(""),p=e.prop("-1"),f=e.prop(),w=e.prop(),b=function(){c(!0),u(!1),e.redraw()},g=i.loader($e.bank.getPageOptions()),h=e.prop(!1),_=Ge.toggleProp(!1,!0),v=e.prop(!1),y=function(e){Ge.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",Ge.authenticityToken())},k=function(t){var o=confirm("are you sure?");return!!o&&e.request({method:"DELETE",url:"/users/"+n.id+"/credit_cards/"+t,config:y}).then(function(){location.reload()})["catch"](b)},x=[{id:"51",code:"001",name:"Banco do Brasil S.A."},{id:"131",code:"341",name:"Ita√∫ Unibanco S.A."},{id:"122",code:"104",name:"Caixa Econ√¥mica Federal"},{id:"104",code:"033",name:"Banco Santander  (Brasil)  S.A."},{id:"127",code:"399",name:"HSBC Bank Brasil S.A. - Banco M√∫ltiplo"},{id:"23",code:"237",name:"Banco Bradesco S.A."}],j=e.prop(-1),z=function(t){return function(){return j(t),e.redraw(!0),r(),!1}},C=function(t){var r={owner_name:l.owner_name(),owner_document:l.owner_document(),bank_id:p(),input_bank_number:m(),agency_digit:l.agency_digit(),agency:l.agency(),account:l.account(),account_digit:l.account_digit()};return l.bank_account_id()&&(r.id=l.bank_account_id().toString()),e.request({method:"PUT",url:"/users/"+t+".json",data:{user:{bank_account_attributes:r}},config:y}).then(function(){h(!0),e.redraw()})["catch"](function(t){c(o.isArray(t.errors)?t.errors.join("<br>"):"Error updating information."),d(!0),e.redraw()})},S=function(){return C(s),!1},P=function(e,t){t||(r=function(){return e.submit()})};return co.getUserBankAccount(s).then(function(e){o.isEmpty(o.first(e))||(a(o.first(e)),l.owner_document(a().owner_document),l.owner_name(a().owner_name),l.bank_account_id(a().bank_account_id),l.account(a().account),l.account_digit(a().account_digit),l.agency(a().agency),l.agency_digit(a().agency_digit),l.bank_id(a().bank_id),p(a().bank_id))})["catch"](b),co.getUserCreditCards(s).then(w)["catch"](b),g.load().then(f)["catch"](b),{creditCards:w,deleteCard:z,toDeleteCard:j,setCardDeletionForm:P,bankAccount:a,confirmDelete:k,bankInput:m,banks:f,showError:d,showOtherBanks:_,fields:l,showOtherBanksInput:v,loader:u,bankCode:p,onSubmit:S,showSuccess:h,popularBanks:x,user:n,error:c}},view:function(t,r){var n=r.user,i=t.fields,a=t.bankAccount();return e("[id='billing-tab']",[t.showSuccess()?e.component(lr,{message:"Your information has been updated"}):"",t.showError()?e.component(lr,{message:e.trust(t.error()),error:!0}):"",e(".w-row",e(".w-col.w-col-10.w-col-push-1",[e(".w-form.card.card-terciary.u-marginbottom-20",[e(".fontsize-base.fontweight-semibold","Credit cards"),e(".fontsize-small.u-marginbottom-20",["If any project you have supported ",e("b","With credit card")," Is not successful, we will refund you",e("b","Automatically")," In the card used to make the support. "]),e(".divider.u-marginbottom-20"),e(".w-row.w-hidden-tiny.card",[e(".w-col.w-col-5.w-col-small-5",e(".fontsize-small.fontweight-semibold","Card")),e(".w-col.w-col-5.w-col-small-5",e(".fontweight-semibold.fontsize-small","Operator")),e(".w-col.w-col-2.w-col-small-2")]),o.map(t.creditCards(),function(o){return e(".w-row.card",[e(".w-col.w-col-5.w-col-small-5",e(".fontsize-small.fontweight-semibold",["XXXX XXXX XXXX",e.trust("&nbsp;"),o.last_digits])),e(".w-col.w-col-5.w-col-small-5",e(".fontsize-small.fontweight-semibold.u-marginbottom-10",o.card_brand.toUpperCase())),e(".w-col.w-col-2.w-col-small-2",e("a.btn.btn-terciary.btn-small[rel='nofollow']",{onclick:t.deleteCard(o.id)},"To remove"))])}),e("form.w-hidden",{action:"/en/users/"+n.id+"/credit_cards/"+t.toDeleteCard(),method:"POST",config:t.setCardDeletionForm},[e("input[name='utf8'][type='hidden'][value='‚úì']"),e("input[name='_method'][type='hidden'][value='delete']"),e("input[name='authenticity_token'][type='hidden'][value='"+Ge.authenticityToken()+"']")])]),e("form.simple_form.refund_bank_account_form",{onsubmit:t.onSubmit},[e("input[id='anchor'][name='anchor'][type='hidden'][value='billing']"),e(".w-form.card.card-terciary",[e(".fontsize-base.fontweight-semibold","Bank data"),e(".fontsize-small.u-marginbottom-20",["If any project you have supported ",e("b","With Boleto Bancaria")," Is not successful, we will refund your payment ",e("b","Automatically")," In the account indicated below."]),e(".divider.u-marginbottom-20"),e(".w-row",[e(".w-col.w-col-6.w-sub-col",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_owner_name']","Cardholder Name"),e("input.string.required.w-input.text-field.positive[id='user_bank_account_attributes_owner_name'][type='text']",{value:i.owner_name(),name:"user[bank_account_attributes][owner_name]",onchange:e.withAttr("value",i.owner_name)})]),e(".w-col.w-col-6",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_owner_document']","CPF / CNPJ of the holder"),e("input.string.tel.required.w-input.text-field.positive[data-validate-cpf-cnpj='true'][id='user_bank_account_attributes_owner_document'][type='tel'][validation_text='true']",{value:i.owner_document(),name:"user[bank_account_attributes][owner_document]",onchange:e.withAttr("value",i.owner_document)})])]),e(".w-row",[e(".w-col.w-col-6.w-sub-col"+(t.showOtherBanksInput()?".w-hidden":"")+"[id='bank_select']",e(".input.select.required.user_bank_account_bank_id",[e("label.field-label","Bank"),e("select.select.required.w-input.text-field.bank-select.positive[id='user_bank_account_attributes_bank_id']",{name:"user[bank_account_attributes][bank_id]",onchange:function(o){e.withAttr("value",t.bankCode)(o),t.showOtherBanksInput("0"==t.bankCode())}},[e("option[value='']",{selected:""===i.bank_id()}),o.map(t.popularBanks,function(t){return i.bank_id()!=t.id?e("option[value='"+t.id+"']",{selected:i.bank_id()==t.id},t.code+" . "+t.name):""}),""===i.bank_id()||o.find(t.popularBanks,function(e){return e.id===i.bank_id()})?"":e("option[value='"+i.bank_id()+"']",{selected:!0},a.bank_code+" . "+a.bank_name),e("option[value='0']","Other")]),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_bank_account_attributes_bank_id']"," Select a bank")])),t.showOtherBanksInput()?e(".w-col.w-col-6.w-sub-col",e(".w-row.u-marginbottom-20[id='bank_search']",e(".w-col.w-col-12",[e(".input.string.optional.user_bank_account_input_bank_number",[e("label.field-label","Bank Number (3 numbers)"),e("input.string.optional.w-input.text-field.bank_account_input_bank_number[id='user_bank_account_attributes_input_bank_number'][maxlength='3'][size='3'][type='text']",{name:"user[bank_account_attributes][input_bank_number]",value:t.bankInput(),onchange:e.withAttr("value",t.bankInput)}),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_bank_account_attributes_input_bank_number']","Invalid bank number")]),e("a.w-hidden-small.w-hidden-tiny.alt-link.fontsize-smaller[href='javascript:void(0);'][id='show_bank_list']",{onclick:t.showOtherBanks.toggle},["Search by name  ",e.trust("&nbsp;"),e.trust("&gt;")]),e("a.w-hidden-main.w-hidden-medium.alt-link.fontsize-smaller[href='javascript:void(0);'][id='show_bank_list']",{onclick:t.showOtherBanks.toggle},["Search by name  ",e.trust("&nbsp;"),e.trust("&gt;")])]))):"",t.showOtherBanks()?e(".w-row[id='bank_search_list']",e(".w-col.w-col-12",e(".select-bank-list[data-ix='height-0-on-load']",{style:{height:"395px"}},e(".card.card-terciary",[e(".fontsize-small.fontweight-semibold.u-marginbottom-10.u-text-center","Select your bank below"),e(".fontsize-smaller",[e(".w-row.card.card-secondary.fontweight-semibold",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e("div","Number")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("div","Name"))]),o.isEmpty(t.banks())?"":o.map(t.banks(),function(o){return e(".w-row.card.fontsize-smallest",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e("a.link-hidden.bank-resource-link[data-code='"+o.code+"'][data-id='"+o.id+"'][href='javascript:void(0)']",{onclick:function(){t.bankInput(o.code),t.showOtherBanks.toggle()}},o.code)),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("a.link-hidden.bank-resource-link[data-code='"+o.code+"'][data-id='"+o.id+"'][href='javascript:void(0)']",{onclick:function(){t.bankInput(o.code),t.showOtherBanks.toggle()}},o.code+" . "+o.name))])})])])))):"",e(".w-col.w-col-6",e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_agency']","Agency"),e("input.string.required.w-input.text-field.positive[id='user_bank_account_attributes_agency'][type='text']",{value:i.agency(),name:"user[bank_account_attributes][agency]",onchange:e.withAttr("value",i.agency)})]),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("label.text.optional.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_agency_digit']","Agency digit"),e("input.string.optional.w-input.text-field.positive[id='user_bank_account_attributes_agency_digit'][type='text']",{value:i.agency_digit(),name:"user[bank_account_attributes][agency_digit]",onchange:e.withAttr("value",i.agency_digit)})])]))]),e(".w-row",[e(".w-col.w-col-6.w-sub-col",[e("label.field-label.fontweight-semibold","Account Type"),e("p.fontsize-smaller.u-marginbottom-20","We only accept checking account")]),e(".w-col.w-col-6",e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_account']","Account No."),e("input.string.required.w-input.text-field.positive[id='user_bank_account_attributes_account'][type='text']",{value:i.account(),onchange:e.withAttr("value",i.account),name:"user[bank_account_attributes][account]"})]),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_account_digit']","Account Digit"),e("input.string.required.w-input.text-field.positive[id='user_bank_account_attributes_account_digit'][type='text']",{value:i.account_digit(),onchange:e.withAttr("value",i.account_digit),name:"user[bank_account_attributes][account_digit]"})])]))]),a.bank_account_id?e("input[id='user_bank_account_attributes_id'][type='hidden']",{name:"user[bank_account_attributes][id]",value:i.bank_account_id()}):""]),e(".u-margintop-30",e(".w-container",e(".w-row",e(".w-col.w-col-4.w-col-push-4",e("input.btn.btn-large[name='commit'][type='submit'][value='To save']")))))])]))])}},Ln={controller:function(t){var o=e.prop(),r=e.prop(),n=t.userId,i=Ge.toggleProp(!1,!0),a=e.prop(!1);return co.getUserProjectReminders(n).then(r)["catch"](function(t){a(!0),e.redraw()}),co.getUserContributedProjects(n,null).then(o)["catch"](function(t){a(!0),e.redraw()}),{projects:o,showNotifications:i,projectReminders:r,error:a}},view:function(t,r){var n=r.user,i=t.projects(),a=t.projectReminders();return e("[id='notifications-tab']",t.error()?e.component(Pn,{message:"Error loading page."}):e("form.simple_form.edit_user[accept-charset='UTF-8'][action='/en/users/"+n.id+"'][method='post'][novalidate='novalidate']",[e("input[name='utf8'][type='hidden'][value='‚úì']"),e("input[name='_method'][type='hidden'][value='patch']"),e("input[name='authenticity_token'][type='hidden'][value='"+Ge.authenticityToken()+"']"),e("input[id='anchor'][name='anchor'][type='hidden'][value='notifications']"),e(".w-container",[e(".w-row",e(".w-col.w-col-10.w-col-push-1",e(".w-form.card.card-terciary",[e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Newsletters:")),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[newsletter]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(n.newsletter?"[checked='checked']":"")+"[id='user_newsletter'][name=user[newsletter]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-base.fontweight-semibold[for='checkbox']"," JVN Newsletter (weekly)"),e("div",["Featured Projects and Blog Posts",e.trust("&nbsp;")])]))]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Projects you have supported:")),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[subscribed_to_project_posts]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(n.subscribed_to_project_posts?"[checked='checked']":"")+"[id='user_subscribed_to_project_posts'][name=user[subscribed_to_project_posts]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-base.fontweight-semibold"," I want to receive project updates"),e(".u-marginbottom-20",e("a.alt-link[href='javascript:void(0);']",{onclick:t.showNotifications.toggle}," Manage notifications from "+n.total_contributed_projects+" projects")),t.showNotifications()?e("ul.w-list-unstyled.u-radius.card.card-secondary[id='notifications-box']",[o.isEmpty(i)?"":o.map(i,function(t){return e("li",e(".w-checkbox.w-clearfix",[e("input[id='unsubscribes_"+t.project_id+"'][type='hidden'][value='']",{name:"unsubscribes["+t.project_id+"]"}),e("input.w-checkbox-input"+(t.unsubscribed?"":"[checked='checked']")+"[type='checkbox'][value='1'][id='user_unsubscribes_"+t.project_id+"']",{name:"unsubscribes["+t.project_id+"]"}),e("label.w-form-label.fontsize-small",t.project_name)]))})]):""]))]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Social:")),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[subscribed_to_friends_contributions]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(n.subscribed_to_friends_contributions?"[checked='checked']":"")+"[id='user_subscribed_to_friends_contributions'][name=user[subscribed_to_friends_contributions]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-small","A friend supported or launched a project")])),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[subscribed_to_new_followers]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(n.subscribed_to_new_followers?"[checked='checked']":"")+"[id='user_subscribed_to_new_followers'][name=user[subscribed_to_new_followers]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-small","A friend started following me.")]))]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Project Reminders:")),e(".w-col.w-col-8",[o.isEmpty(a)?"":o.map(a,function(t){
return e(".w-checkbox.w-clearfix",[e("input[id='user_reminders_"+t.project_id+"'][type='hidden'][value='false']",{name:"user[reminders]["+t.project_id+"]"}),e("input.w-checkbox-input[checked='checked'][type='checkbox'][value='1'][id='user_reminders_"+t.project_id+"']",{name:"user[reminders]["+t.project_id+"]"}),e("label.w-form-label.fontsize-small",t.project_name)])})])])]))),e(".u-margintop-30",e(".w-container",e(".w-row",e(".w-col.w-col-4.w-col-push-4",e("input.btn.btn-large[id='save'][name='commit'][type='submit'][value='Save']")))))])]))}},Bn={controller:function(t){var r=e.prop({}),n=t.user_id.split("-")[0],i=e.prop(window.location.hash),a=function(t){var r={"#projects":e(Mn,{userId:n,showDraft:!0}),"#contributions":e(qn,{userId:n,user:t}),"#about_me":e(Nn,{userId:n,user:t}),"#settings":e(On,{userId:n,user:t}),"#notifications":e(Ln,{userId:n,user:t}),"#billing":e(Vn,{userId:n,user:t})};return i(window.location.hash),o.isEmpty(i())||"#_=_"===i()?(i("#contributions"),r["#contributions"]):r[i()]};return Ge.redrawHashChange(),co.fetchUser(n,!0,r),{displayTabContent:a,hash:i,userDetails:r}},view:function(t,r){var n=t.userDetails();return e("div",[e(Or,{menuTransparency:!0}),e(Sn,{user:n,hideDetails:!0}),o.isEmpty(n)?"":[e("nav.dashboard-nav.u-text-center",{style:{"z-index":"10",position:"relative"}},e(".w-container",[e("a.dashboard-nav-link"+("#contributions"===t.hash()?".selected":"")+"[data-target='#dashboard_contributions'][href='#contributions'][id='dashboard_contributions_link']","Backed"),e("a.dashboard-nav-link"+("#projects"===t.hash()?".selected":"")+"[data-target='#dashboard_projects'][href='#projects'][id='dashboard_projects_link']","Created"),e("a.dashboard-nav-link"+("#about_me"===t.hash()?".selected":"")+"[data-target='#dashboard_about_me'][href='#about_me'][id='dashboard_about_me_link']","About You"),e("a.dashboard-nav-link"+("#notifications"===t.hash()?".selected":"")+"[data-target='#dashboard_notifications'][href='#notifications'][id='dashboard_notifications_link']","Notifications"),e("a.dashboard-nav-link.u-right-big-only[href='/en/users/"+n.id+"']",{config:e.route,onclick:function(){e.route("/users/"+n.id,{user_id:n.id})}},"Go to the public profile")])),e("section.section",e(".w-container",e(".w-row",n.id?t.displayTabContent(n):Ge.loader())))]])}},Un=o.partial(Ge.i18nScope,"projects.contributions.edit.errors"),Yn=o.partial(Ge.i18nScope,"projects.contributions.edit_international.errors"),Wn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"aon",a=e.prop({}),l=e.prop(!1),s=e.prop(!1),c=function(e){Ge.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",Ge.authenticityToken())},d={completeName:e.prop(""),anonymous:e.prop(),countries:e.prop(),userCountryId:e.prop(),zipCode:e.prop(""),street:e.prop(""),number:e.prop(""),addressComplement:e.prop(""),neighbourhood:e.prop(""),city:e.prop(""),states:e.prop([]),userState:e.prop(),ownerDocument:e.prop(""),phone:e.prop(""),errors:e.prop([])},u={name:e.prop(""),number:e.prop(""),expMonth:e.prop(""),expYear:e.prop(""),save:e.prop(!1),cvv:e.prop(""),errors:e.prop([]),cardOwnerDocument:e.prop("")},m=function(e){var t=o.first(e),r=t.address.country_id||o.findWhere(d.countries(),{name:"Brasil"}).id;d.completeName(t.name),d.city(t.address.city),d.zipCode(t.address.zipcode),d.street(t.address.street),d.number(t.address.number),d.addressComplement(t.address.complement),d.userState(t.address.state),d.userCountryId(r),d.ownerDocument(t.owner_document),d.phone(t.address.phonenumber),d.neighbourhood(t.address.neighbourhood),u.cardOwnerDocument(t.owner_document)},p=function(){return[[null,"Month"],[1,"01 - January"],[2,"02 - Feburary"],[3,"03 - March"],[4,"04 - April"],[5,"05 - May"],[6,"06 - June"],[7,"07 - July"],[8,"08 - August"],[9,"09 - September"],[10,"10 - October"],[11,"11 - November"],[12,"12 - December"]]},f=function(){for(var e=r().year(),t=["Year"],o=e;o<=e+25;o++)t.push(o);return t},w=function(){return!o.isEmpty(d.countries())&&d.userCountryId()!=o.findWhere(d.countries(),{name:"Brasil"}).id},b=function(e){return w()?Yn(e):Un(e)},g=function(){return w()?{locale:"en"}:{locale:"en"}},h=function(){return t.translations[t.currentLocale()].projects.faq[n]},_=Ge.getUser()||{},v=i.loader($e.country.getPageOptions()),y=i.loader($e.state.getPageOptions()),k=function(e){return o.map(e,function(e){var r=d[e]();Ge.existy(r)&&!o.isEmpty(String(r).trim())||d.errors().push({field:e,message:t.t("validation.empty_field",b())})})},x=function(){var e=d.ownerDocument(),t=String(e).replace(/[\.|\-|\/]*/g,""),o=!1,r="";e.length>14?(o=Ge.validateCnpj(e),r="invalid CNPJ."):(o=Ge.validateCpf(t),r="invalid CPF."),o||d.errors().push({field:"ownerDocument",message:r})},j=function(){(o.isEmpty(d.userState())||"null"===d.userState())&&d.errors().push({field:"userState",message:t.t("validation.state",b())})},z=function(){var e=d.phone(),o=String(e).replace(/[\(|\)|\-|\s]*/g,""),r={field:"phone",message:t.t("validation.phone",b())};if(o.length<10)d.errors().push(r);else{var n=Number(o.charAt(2));n>=2&&n<=9||d.errors().push(r)}},C=function(){return d.errors([]),k(["completeName","zipCode","street","userState","city","userCountryId"]),w()||(k(["phone","number","neighbourhood","ownerDocument","userState"]),j(),x(),z()),o.isEmpty(d.errors())},S=function(t){var o=e.prop();return e.request({method:"GET",config:c,url:"/payment/pagarme/"+t+"/slip_data"}).then(o),o},P=function(o,r,n,i,a){e.request({method:"post",url:"/payment/pagarme/"+o+"/pay_slip.json",dataType:"json"}).then(function(l){"failed"==l.payment_status?n(t.t("submission.slip_submission",b())):l.boleto_url&&(a(!0),window.location.href="/projects/"+r+"/contributions/"+o),i(!1),e.redraw()})["catch"](function(o){n(t.t("submission.slip_submission",b())),i(!1),a(!1),e.redraw()})},T=function(o,r,n,i,a){n(!1),e.redraw(),C()?I(o,r).then(function(){P(o,r,n,i,a)})["catch"](function(){i(!1),n(t.t("submission.slip_validation",b())),e.redraw()}):(i(!1),n(t.t("submission.slip_validation",b())),e.redraw())},M=e.prop([]),A=function(t){var r={id:-1};return e.request({method:"GET",config:c,url:"/users/"+t+"/credit_cards"}).then(function(e){return o.isArray(e)?e.push(r):e=[],M(e)})},E=function(e){if(window.SimilityScript&&Ge.getSimilityCustomer()){var t=Ge.getUser()||{},o={customer_id:Ge.getSimilityCustomer(),session_id:e,user_id:t.user_id},r=new window.SimilityScript(o);r.execute()}},D=function(t,o){return E(o),e.request({method:"POST",url:"/payment/pagarme/"+o+"/pay_credit_card",data:t,config:c})},R=function(e,t,o){var r={card_id:e.card_key,payment_card_installments:t};return D(r,o)},N=function(){var e=new window.PagarMe.creditCard;return e.cardHolderName=u.name(),e.cardExpirationMonth=u.expMonth(),e.cardExpirationYear=u.expYear(),e.cardNumber=u.number(),e.cardCVV=u.cvv(),e},F=function(r,n){var i=e.deferred();return e.request({method:"GET",url:"/payment/pagarme/"+r+"/get_encryption_key",config:c}).then(function(e){window.PagarMe.encryption_key=e.key;var a=N(),l=a.fieldErrors();o.keys(l).length>0?i.reject({message:t.t("submission.card_invalid",b())}):a.generateHash(function(e){var t={card_hash:e,save_card:u.save().toString(),payment_card_installments:n};D(t,r).then(i.resolve)["catch"](i.reject)})})["catch"](function(e){o.isEmpty(e.message)?i.reject({message:t.t("submission.encryption_error",b())}):i.reject(e)}),i.promise},I=function(t,o){var r={anonymous:d.anonymous(),country_id:d.userCountryId(),payer_name:d.completeName(),payer_document:d.ownerDocument(),address_street:d.street(),address_number:d.number(),address_complement:d.addressComplement(),address_neighbourhood:d.neighbourhood(),address_zip_code:d.zipCode(),address_city:d.city(),address_state:d.userState(),address_phone_number:d.phone(),card_owner_document:u.cardOwnerDocument()};return e.request({method:"PUT",url:"/projects/"+o+"/contributions/"+t+".json",data:{contribution:r},config:c})},q=function(o,r,n){return function(i){if("failed"===i.payment_status){var a=i.message||t.t("submission.payment_failed",b());s(!1),l(t.t("submission.error",b({message:a}))),e.redraw(),o.reject()}else window.location.href="/projects/"+r+"/contributions/"+n}},O=function(o){return function(r){var n=r.message||t.t("submission.payment_failed",b());s(!1),l(t.t("submission.error",b({message:n}))),e.redraw(),o.reject()}},V=function(e,t,o,r,n){return function(){return t().id&&t().id!==-1?R(t(),n(),o).then(q(e,r,o))["catch"](O(e)):F(o,n).then(q(e,r,o))["catch"](O(e))}},L=function(t,o,r,n){var i=e.deferred();return C()?(s(!0),l(!1),e.redraw(),I(r,n).then(V(i,t,r,n,o))["catch"](function(){s(!1),i.reject()})):(s(!1),i.reject()),i.promise},B=function(e){return function(){var t=(d.errors(),o.findWhere(d.errors(),{field:e})),r=o.compose(d.errors,o.without);return r(d.errors(),t)}},U=function(e){return function(){var t=(d.errors(),o.findWhere(u.errors(),{field:e})),r=o.compose(u.errors,o.without);return r(u.errors(),t)}},Y=e.prop([{value:10,number:1}]),W=function(t){return e.request({method:"GET",url:"/payment/pagarme/"+t+"/get_installment",config:Ge.setCsrfToken}).then(Y)},H=o.partial(Ge.mask,"9999 9999 9999 9999"),J=o.compose(u.number,H);return v.load().then(function(e){var t=d.userCountryId()||o.findWhere(e,{name:"Brasil"}).id;d.countries(o.sortBy(e,"name_en")),d.userCountryId(t)}),y.load().then(function(e){d.states().push({acronym:null,name:"state"}),o.map(e,function(e){return d.states().push(e)})}),co.fetchUser(_.user_id,!1).then(m),{fields:d,validate:C,isInternational:w,resetFieldError:B,getSlipPaymentDate:S,paySlip:T,installments:Y,getInstallments:W,savedCreditCards:M,getSavedCreditCards:A,applyCreditCardMask:J,creditCardFields:u,resetCreditCardFieldError:U,expMonthOptions:p,expYearOptions:f,sendPayment:L,submissionError:l,isLoading:s,pagarme:a,locale:g,faq:h,similityExecute:E}},Hn=_.partial(Ge.i18nScope,"projects.faq"),Jn={controller:function(o){var r=o.mode,n=o.faq.questions,i=e.prop(-1),a=e.prop({name:"..."}),l=function(){return o.vm.isInternational()?"international."+r:""+r},s=function(e){return function(){return i(e===i()?-1:e)}},c=function(){var e={};return _.each(n,function(o,r){_.extend(e,er({},r+1,{question:t.t(l()+".questions."+r+".question",Hn()),answer:t.t(l()+".questions."+r+".answer",Hn({userLink:"/users/"+a().id,userName:a().name}))}))}),e};return co.fetchUser(o.projectUserId,!1).then(function(e){return a(_.first(e))}),{scopedQuestions:c,selectQuestion:s,selectedQuestion:i,tKey:l}},view:function(o,r){return e(".faq-box.w-hidden-small.w-hidden-tiny.card.u-radius",[e(".w-row.u-marginbottom-30",[e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",e("img[width='30']",{src:"aon"===r.mode?"/assets/aon-badge.png":"/assets/flex-badge.png"})),e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",e(".w-inline-block.fontsize-smallest.w-inline-block.fontcolor-secondary",t.t(o.tKey()+".description",Hn())))]),e(".u-marginbottom-20.fontsize-small.fontweight-semibold",t.t(""+(r.vm.isInternational()?"international_title":"title"),Hn())),e("ul.w-list-unstyled",_.map(o.scopedQuestions(),function(t,r){return[e("li#faq_question_"+r+".fontsize-smaller.alt-link.list-question",{onclick:o.selectQuestion(r)},e("span",[e("span.faq-box-arrow")," "+t.question])),e("li.list-answer",{"class":o.selectedQuestion()===r?"list-answer-opened":""},e("p#faq_answer_"+r+".fontsize-smaller",e.trust(t.answer)))]}))])}},Xn=(_.partial(Ge.i18nScope,"projects.contributions.edit.errors"),{controller:function(t){var o=t.vm,r=o.getSlipPaymentDate(t.contribution_id),n=e.prop(!1),i=e.prop(!1),a=e.prop(!1),l=function(){return n(!0),e.redraw(),o.paySlip(t.contribution_id,t.project_id,i,n,a),!1};return{buildSlip:l,slipPaymentDate:r,loading:n,completed:a,error:i}},view:function(t,o){return e(".w-row",e(".w-col.w-col-12",e(".u-margintop-30.u-marginbottom-60.u-radius.card-big.card",[e(".fontsize-small.u-marginbottom-20",t.slipPaymentDate()?"This bank slip expires on "+Ge.momentify(t.slipPaymentDate().slip_expiration_date)+".":"Loading..."),e(".fontsize-small.u-marginbottom-40","In generating the ticket, the director is already counting on his support. Pay through the internet due date, lottery houses, ATMs or bank branch."),e(".w-row",e(".w-col.w-col-8.w-col-push-2",[t.loading()?Ge.loader():t.completed()?"":e("input.btn.btn-large.u-marginbottom-20",{onclick:t.buildSlip,value:"Print Ticket",type:"submit"}),t.error()?e.component(Pn,{message:t.error()}):"",e(".fontsize-smallest.u-text-center.u-marginbottom-30",["By supporting, you agree with the ",e("a.alt-link[href='/en/terms-of-use']","Terms of use "),"e ",e("a.alt-link[href='/en/privacy-policy']","privacy policy")])]))])))}}),Kn=/(\d{1,4})/g,Gn=[].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1},$n=[{type:"elo",patterns:[401178,401179,431274,438935,451416,457393,457631,457632,504175,506699,5067,509,627780,636297,636368,650,6516,6550],format:Kn,length:[16],cvvLength:[3],luhn:!0},{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:Kn,length:[12,13,14,15,16,17,18,19],cvvLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:Kn,length:[16],cvvLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:Kn,length:[16],cvvLength:[3],luhn:!0},{type:"visa",patterns:[4],format:Kn,length:[13,16],cvvLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:Kn,length:[16],cvvLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvvLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvvLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:Kn,length:[16],cvvLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:Kn,length:[16,17,18,19],cvvLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:Kn,length:[16],cvvLength:[3],luhn:!0}],Qn=function(e){var t;return e?(null!=(t=li(e))?t.type:void 0)||null:null},Zn=function(e){var t=void 0,o=void 0,r=void 0;for(o=0,r=$n.length;o<r;o++)if(t=$n[o],t.type===e)return t},ei=function(e,t){var o=void 0,r=void 0,n=void 0;return o=e.currentTarget,n=o.value,r=Qn(n)||"unknown",t(r)},ti=function(e,t){var o,r;if(o=e.currentTarget,r=o.value,8===e.which&&(null==o.selectionStart||o.selectionStart===r.length))return/\d\s$/.test(r)?(e.preventDefault(),setTimeout(function(){return o.value=t(r.replace(/\d\s$/,""))})):/\s\d?$/.test(r)?(e.preventDefault(),setTimeout(function(){return o.value=t(r.replace(/\d$/,""))})):void 0},oi=function(e){var t,o,r,n,i,a,l,s;for(null==e&&(e=""),r="ÔºêÔºëÔºíÔºìÔºîÔºïÔºñÔºóÔºòÔºô",n="0123456789",s="",t=e.split(""),i=0,l=t.length;i<l;i++)o=t[i],a=r.indexOf(o),a>-1&&(o=n[a]),s+=o;return s},ri=function(e,t,o){var r,n,i,a,l,s,c;try{n=t.selectionStart}catch(l){a=l,n=null}if(s=t.value,t.value=o(e),null!==n&&t===document.activeElement)return n===s.length&&(n=e.length),s!==e&&(c=s.slice(n-1,+n+1||9e9),r=e.slice(n-1,+n+1||9e9),i=e[n],/\d/.test(i)&&c===i+" "&&r===" "+i&&(n+=1)),t.selectionStart=n,t.selectionEnd=n},ni=function(e,t){var o=e.currentTarget;return setTimeout(function(){var e;return e=o.value,e=oi(e),e=ii(e),ri(e,o,t)})},ii=function(e){var t=void 0,r=void 0,n=void 0,i=void 0;return e=e.replace(/\D/g,""),(t=li(e))?(i=t.length[t.length.length-1],e=e.slice(0,i),t.format.global?null!=(n=e.match(t.format))?n.join(" "):void 0:(r=t.format.exec(e),null!=r?(r.shift(),r=o.filter(r,function(e){return e}),r.join(" ")):void 0)):e},ai=function(e,t){var o=void 0,r=void 0,n=void 0,i=void 0,a=void 0,l=void 0,s=void 0;if(n=String.fromCharCode(e.which),/^\d+$/.test(n)&&(o=e.currentTarget,s=o.value,r=li(s+n),i=(s.replace(/\D/g,"")+n).length,l=16,r&&(l=r.length[r.length.length-1]),!(i>=l||null!=o.selectionStart&&o.selectionStart!==s.length)))return a=r&&"amex"===r.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,a.test(s)?(e.preventDefault(),setTimeout(function(){return o.value=t(s+" "+n)})):a.test(s+n)?(e.preventDefault(),setTimeout(function(){return o.value=t(s+n+" ")})):void 0},li=function(e){var t=void 0,o=void 0,r=void 0,n=void 0,i=void 0,a=void 0,l=void 0,s=void 0;for(e=(e+"").replace(/\D/g,""),o=0,n=$n.length;o<n;o++)for(t=$n[o],s=t.patterns,r=0,i=s.length;r<i;r++)if(l=s[r],a=l+"",e.substr(0,a.length)===a)return t},si=function(e){var t=void 0;return null!=e.selectionStart&&e.selectionStart!==e.selectionEnd||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},ci=function(e){var t=void 0;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))))},di=function(e){var t=void 0,o=void 0,r=void 0,n=void 0;if(t=e.currentTarget,r=String.fromCharCode(e.which),/^\d+$/.test(r)&&!si(t))return n=(t.value+r).replace(/\D/g,""),o=li(n),o?n.length<=o.length[o.length.length-1]:n.length<=16},ui=function(e,t,o){e.onkeypress=function(e){ci(e),di(e),ai(e,o)},e.oninput=function(e){ni(e,o),ei(e,t)},e.onkeydown=function(e){return ti(e,o)},e.onkeyup=function(e){ei(e,t)},e.onpaste=function(e){return ni(e,o)},e.onchange=function(e){CatarseAnalytics.oneTimeEvent({cat:"contribution_finish",act:"contribution_cc_edit"}),ni(e,o)}},mi=function(e){var t,o,r,n,i,a;for(i=!0,a=0,o=(e+"").split("").reverse(),r=0,n=o.length;r<n;r++)t=o[r],t=parseInt(t,10),(i=!i)&&(t*=2),t>9&&(t-=9),a+=t;return a%10===0},pi=function(e){var t=void 0,o=void 0;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(t=li(e),!!t&&(o=e.length,Gn.call(t.length,o)>=0&&(t.luhn===!1||mi(e))))},fi=function(e,t){var o,r,n;return"object"===("undefined"==typeof e?"undefined":Zo(e))&&"month"in e&&(n=e,e=n.month,t=n.year),!(!e||!t)&&(e=String(e).trim(),t=String(t).trim(),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(t)&&(1<=e&&e<=12&&(2===t.length&&(t=t<70?"20"+t:"19"+t),4===t.length&&(r=new Date(t,e),o=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),r>o)))))},wi=function(e,t){var o=void 0,r=void 0;return e=String(e).trim(),!!/^\d+$/.test(e)&&(o=Zn(t),null!=o?(r=e.length,Gn.call(o.cvvLength,r)>=0):e.length>=3&&e.length<=4)},bi={setEvents:ui,validateCardNumber:pi,validateCardcvv:wi,validateCardExpiry:fi},gi={controller:function(t){var o=t.type||e.prop("unknown"),r=function(e,r){r||bi.setEvents(e,o,t.value)};return{setCreditCardHandlers:r,cardType:o}},view:function(t,o){return e('input.w-input.text-field[name="'+o.name+'"][required="required"][type="tel"]',{onfocus:o.onfocus,"class":o["class"],config:t.setCreditCardHandlers,onblur:o.onblur})}},hi=o.partial(Ge.i18nScope,"projects.contributions.edit"),_i=o.partial(Ge.i18nScope,"projects.contributions.edit_international"),vi={controller:function(r){var n=r.vm,i=e.prop(!0),a=e.prop(!0),l=e.prop({id:-1}),s=e.prop("1"),c=e.prop(!1),d=e.prop("unknown"),u=(e.prop([]),o.partial(Ge.mask,"999.999.999-99")),m=o.partial(Ge.mask,"99.999.999/9999-99"),p=function(){return l().id===-1?(b(),w(),g(),_()):n.creditCardFields.errors([]),0===n.creditCardFields.errors().length&&n.sendPayment(l,s,r.contribution_id,r.project_id),!1},f=function(e,t){if(e){var r=o.reject(n.creditCardFields.errors(),function(e){return o.isEqual(e,t)});n.creditCardFields.errors(r)}else n.creditCardFields.errors().push(t)},w=function(){var e=bi.validateCardcvv(n.creditCardFields.cvv(),d()),o={field:"cvv",message:t.t("errors.inline.creditcard_cvv",P())};f(e,o)},b=function(){var e=bi.validateCardExpiry(n.creditCardFields.expMonth(),n.creditCardFields.expYear()),o={field:"expiry",message:t.t("errors.inline.creditcard_expiry",P())};f(e,o)},g=function(){var e=bi.validateCardNumber(n.creditCardFields.number()),o={field:"number",message:t.t("errors.inline.creditcard_number",P())};f(e,o)},h=function(){var e=n.creditCardFields.cardOwnerDocument(),t=String(e).replace(/[\.|\-|\/]*/g,""),o=!1,r="";e.length>14?(o=Ge.validateCnpj(e),r="Invalid CNPJ."):(o=Ge.validateCpf(t),r="Invalid CPF."),f(o,{field:"cardOwnerDocument",message:r})},_=function(){var e=n.creditCardFields.name().replace(/ /g,""),r=/^[a-zA-Z]*$/,i={field:"name",message:t.t("errors.inline.creditcard_name",P())},a=!(o.isEmpty(e)||!r.test(e));f(a,i)},v=o.compose(n.creditCardFields.name,Ge.noNumbersMask),y=function(e){var t=Ge.numbersOnlyMask(e.substr(0,4));return n.creditCardFields.cvv(t)},k=function(e){e.length>14?n.creditCardFields.cardOwnerDocument(m(e)):n.creditCardFields.cardOwnerDocument(u(e))},x=function(t){var r=o.findWhere(n.creditCardFields.errors(),{field:t});return r?e.component(Pn,{message:r.message}):""},j=function(t){return e.component(Mo,{el:".tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary",text:t,width:380})},z=function(e,t){return l()===e},C=function(e,t){if(!t){var o=document.createElement("script");o.src="//assets.pagar.me/js/pagarme.min.js",document.body.appendChild(o),o.onload=function(){n.pagarme(window.PagarMe)}}},S=function(e){l(e),c(e.id===-1?!0:!1)},P=function(e){return n.isInternational()?_i(e):hi(e)};return n.getInstallments(r.contribution_id).then(function(){i(!1),e.redraw()}),n.getSavedCreditCards(r.user_id).then(function(t){a(!1),S(t[0]),e.redraw()}),{vm:n,onSubmit:p,fieldHasError:x,buildTooltip:j,loadingInstallments:i,loadingSavedCreditCards:a,installments:n.installments,selectedInstallment:s,savedCreditCards:n.savedCreditCards,creditCard:n.creditCardFields,creditCardType:d,checkCreditCard:g,checkCreditCardName:_,applyCreditCardNameMask:v,applyCreditCardMask:n.applyCreditCardMask,applyDocumentMask:k,checkCardOwnerDocument:h,applyCvvMask:y,checkcvv:w,selectCreditCard:S,isCreditCardSelected:z,expMonths:n.expMonthOptions(),expYears:n.expYearOptions(),loadPagarme:C,scope:P,showForm:c}},view:function(r,n){var i=r.vm.isInternational();return e(".w-form.u-marginbottom-40",{config:r.loadPagarme},[e('form[name="email-form"]',{onsubmit:r.onSubmit},[!r.loadingSavedCreditCards()&&r.savedCreditCards().length>1?e(".my-credit-cards.w-form.back-payment-form-creditcard.records-choice.u-marginbottom-40",o.map(r.savedCreditCards(),function(n,i){return e("div#credit-card-record-"+i+".w-row.creditcard-records",{style:"cursor:pointer;",onclick:function(){return r.selectCreditCard(n)}},[e(".w-col.w-col-1.w-sub-col",e(".w-radio.w-clearfix.back-payment-credit-card-radio-field",e("input",{checked:r.isCreditCardSelected(n,i),name:"payment_subscription_card",type:"radio",value:n.card_key}))),n.id===-1?e(".w-col.w-col-11",e(".fontsize-small.fontweight-semibold.fontcolor-secondary",t.t("credit_card.use_another",r.scope()))):[e(".w-col.w-col-2.w-sub-col.w-sub-col-middle",e(".fontsize-small.fontweight-semibold.text-success",n.card_brand.toUpperCase())),e(".w-col.w-col-5.w-sub-col.w-sub-col-middle",e(".fontsize-small.fontweight-semibold.u-marginbottom-20","XXXX.XXXX.XXXX."+n.last_digits)),e(".w-col.w-col-4",r.loadingInstallments()||r.installments().length<=1?"":e("select.w-select.text-field.text-field-creditcard",{onchange:e.withAttr("value",r.selectedInstallment),value:r.selectedInstallment()},o.map(r.installments(),function(t){return e('option[value="'+t.number+'"]',t.number+" X Rs "+t.amount)})))]])})):r.loadingSavedCreditCards()?e(".fontsize-small.u-marginbottom-40",t.t("credit_card.loading",r.scope())):"",r.showForm()?e("#credit-card-payment-form.u-marginbottom-40",[e("div#credit-card-name",[e(".w-row",[e(i?".w-col.w-col-12":".w-col.w-col-6.w-col-tiny-6.w-sub-col-middle",[e('label.field-label.fontweight-semibold[for="credit-card-name"]',t.t("credit_card.name",r.scope())),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.name_tip",r.scope())),e('input.w-input.text-field[name="credit-card-name"][type="text"]',{onfocus:r.vm.resetCreditCardFieldError("name"),"class":r.fieldHasError("name")?"error":"",onblur:r.checkCreditCardName,onkeyup:e.withAttr("value",r.applyCreditCardNameMask),value:r.creditCard.name()}),r.fieldHasError("name")]),i?"":e(".w-col.w-col-6.w-col-tiny-6.w-sub-col-middle",[e('label.field-label.fontweight-semibold[for="credit-card-document"]',t.t("credit_card.document",r.scope())),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.document_tip",r.scope())),e('input.w-input.text-field[name="credit-card-document"]',{onfocus:r.vm.resetCreditCardFieldError("cardOwnerDocument"),"class":r.fieldHasError("cardOwnerDocument")?"error":"",onblur:r.checkCardOwnerDocument,onkeyup:e.withAttr("value",r.applyDocumentMask),value:r.creditCard.cardOwnerDocument()}),r.fieldHasError("cardOwnerDocument")])])]),e("div#credit-card-number",[e('label.field-label.fontweight-semibold[for="credit-card-number"]',t.t("credit_card.number",r.scope())),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.number_tip",r.scope())),e.component(gi,{onfocus:r.vm.resetCreditCardFieldError("number"),onblur:r.checkCreditCard,"class":r.fieldHasError("number")?"error":"",value:r.creditCard.number,name:"credit-card-number",type:r.creditCardType}),r.fieldHasError("number")]),e("div#credit-card-date",[e('label.field-label.fontweight-semibold[for="expiration-date"]',[t.t("credit_card.expiry",r.scope())]),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.expiry_tip",r.scope())),e(".w-row",[e(".w-col.w-col-6.w-col-tiny-6.w-sub-col-middle",e('select.w-select.text-field[name="expiration-date_month"]',{onfocus:r.vm.resetCreditCardFieldError("expiry"),"class":r.fieldHasError("expiry")?"error":"",onchange:e.withAttr("value",r.creditCard.expMonth),value:r.creditCard.expMonth()},o.map(r.expMonths,function(t){return e("option",{value:t[0]},t[1])}))),e(".w-col.w-col-6.w-col-tiny-6",e('select.w-select.text-field[name="expiration-date_year"]',{onfocus:r.vm.resetCreditCardFieldError("expiry"),"class":r.fieldHasError("expiry")?"error":"",onchange:e.withAttr("value",r.creditCard.expYear),onblur:r.checkExpiry,value:r.creditCard.expYear()},o.map(r.expYears,function(t){return e("option",{value:t},t)}))),e(".w-col.w-col-12",r.fieldHasError("expiry"))])]),e("div#credit-card-cvv",[e('label.field-label.fontweight-semibold[for="credit-card-cvv"]',[t.t("credit_card.cvv",r.scope()),r.buildTooltip(t.t("credit_card.cvv_tooltip",r.scope()))]),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.cvv_tip",r.scope())),e(".w-row",[e(".w-col.w-col-8.w-col-tiny-6.w-sub-col-middle",e('input.w-input.text-field[name="credit-card-cvv"][type="tel"]',{onfocus:r.vm.resetCreditCardFieldError("cvv"),"class":r.fieldHasError("cvv")?"error":"",onkeyup:e.withAttr("value",r.applyCvvMask),onblur:r.checkcvv,value:r.creditCard.cvv()}),r.fieldHasError("cvv")),e(".w-col.w-col-4.w-col-tiny-6.u-text-center",e('img[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57298c1c7e99926e77127bdd_cvv-card.jpg"][width="176"]'))])]),r.loadingInstallments()||r.installments().length<=1?"":e(".w-row",[e(".w-col.w-col-6",[e('label.field-label.fontweight-semibold[for="split"]',t.t("credit_card.installments",r.scope())),e('select.w-select.text-field[name="split"]',{onchange:e.withAttr("value",r.selectedInstallment),value:r.selectedInstallment()},o.map(r.installments(),function(t){return e('option[value="'+t.number+'"]',t.number+" X Rs "+t.amount)}))]),e(".w-col.w-col-6")]),e(".w-checkbox.w-clearfix",[e('input#payment_save_card.w-checkbox-input[type="checkbox"][name="payment_save_card"]',{onchange:e.withAttr("checked",r.creditCard.save),checked:r.creditCard.save()}),e('label.w-form-label[for="payment_save_card"]',t.t("credit_card.save_card",r.scope()))])]):"",e(".w-row",[e(".w-col.w-col-8.w-col-push-2",[o.isEmpty(r.vm.submissionError())?"":e(".card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller",e(".u-marginbottom-10.fontweight-bold",e.trust(r.vm.submissionError()))),r.vm.isLoading()?Ge.loader():e('input.btn.btn-large.u-marginbottom-20[type="submit"]',{value:t.t("credit_card.finish_payment",r.scope())}),e(".fontsize-smallest.u-text-center.u-marginbottom-30",e.trust(t.t("credit_card.terms_of_use_agreement",r.scope())))])])])])}},yi=_.partial(Ge.i18nScope,"projects.contributions.edit"),ki=_.partial(Ge.i18nScope,"projects.contributions.edit_international"),xi={controller:function(t){var o=e.prop(!1),r=function(){return t.vm.isInternational()?ki():yi()},n=function(e,t){};return{scrollTo:n,isSlip:o,scope:r,vm:t.vm}},view:function(o,r){return e("#catarse_pagarme_form",{config:o.scrollTo},[e(".u-text-center-small-only.u-marginbottom-30",[e(".fontsize-large.fontweight-semibold",t.t("payment_info",o.scope())),e(".fontsize-smallest.fontcolor-secondary.fontweight-semibold",[e("span.fa.fa-lock"),t.t("safe_payment",o.scope())])]),e(".flex-row.u-marginbottom-40",[e("a.w-inline-block.btn-select.flex-column.u-marginbottom-20.u-text-center[href='javascript:void(0);']",{onclick:function(){return o.isSlip(!1)},"class":o.isSlip()?"":"selected"},[e(".fontsize-base.fontweight-semibold",t.t("credit_card_select",o.scope())),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-20",t.t("debit_card_info",o.scope())),e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57299bd8f326a24d4828a0fd_credit-cards.png']")]),r.vm.isInternational()?e(".flex-column"):e("a.w-inline-block.btn-select.flex-column.u-marginbottom-20.u-text-center[href='javascript:void(0);']",{onclick:function(){return o.isSlip(!0)},"class":o.isSlip()?"selected":""},[e(".fontsize-base.fontweight-semibold.u-marginbottom-20","Bank slip"),e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57299c6ef96a6e44489a7a07_boleto.png'][width='48']")])]),o.isSlip()?r.vm.isInternational()?"":e("#boleto-section",[e.component(Xn,{vm:r.vm,contribution_id:r.contribution_id,project_id:r.project_id})]):e("#credit-card-section",[e.component(vi,{vm:r.vm,contribution_id:r.contribution_id,project_id:r.project_id,user_id:r.user_id})])])}},ji=_.partial(Ge.i18nScope,"projects.contributions.edit"),zi=_.partial(Ge.i18nScope,"projects.contributions.edit_international"),Ci={controller:function(t){var o=ko.getCurrentProject(),r=o.mode,n=o.user.id,i=Wn(r),a=e.prop(!1),l=fn.getCurrentContribution(),s=e.prop(l().reward),c=l().value,d=_.partial(Ge.mask,"(99) 9999-99999"),u=_.partial(Ge.mask,"999.999.999-99"),m=_.partial(Ge.mask,"99.999.999/9999-99"),p=_.partial(Ge.mask,"99999-999"),f=e.prop(!1),w=Ge.getUserID(),b=co.getCurrentUser();_.contains([41679,40191,40271,38768,42815,43002,42129,41867,39655],o.project_id)&&(window.$zopim&&window.$zopim.livechat||function(e,t){var o=window.$zopim=function(e){o._.push(e)},r=o.s=e.createElement(t),n=e.getElementsByTagName(t)[0];o.set=function(e){o.set._.push(e)},o._=[],o.set._=[],r.async=!0,r.setAttribute("charset","utf-8"),r.src="//v2.zopim.com/?2qPtIfZX0Exh5Szx5JUoUxWKqrTQI5Tm",o.t=+new Date,r.type="text/javascript",n.parentNode.insertBefore(r,n)}(document,"script"),setTimeout(function C(){var e=window.$zopim&&window.$zopim.livechat;if(e){var t=Ge.getUser();t&&(e.setEmail(t.email),e.setName(t.name)),window.zE&&window.zE.hide()}else setTimeout(C,1e3)},1e3));var g=function(){i.validate()&&(i.similityExecute(l().id),a(!0))},h=function(t){var o=_.findWhere(i.fields.errors(),{field:t});return o?e.component(Pn,{message:o.message}):""},v=function(e,t){t||i.fields.userState("")},y=function(e){e.length>14?(f(!0),i.fields.ownerDocument(m(e))):(f(!1),i.fields.ownerDocument(u(e)))},k=_.compose(i.fields.zipCode,p),x=_.compose(i.fields.phone,d),j=function(e){return function(t){CatarseAnalytics.oneTimeEvent({cat:"contribution_finish",act:i.isInternational?"contribution_address_br":"contribution_address_int"}),_.isFunction(e)&&e(t)}},z=function(e){return i.isInternational()?zi(e):ji(e)};return _.isNull(w)?Ge.navigateToDevise():(i.similityExecute(l().id),{addressChange:j,applyDocumentMask:y,applyZipcodeMask:k,applyPhoneMask:x,fieldHasError:h,setStateOther:v,validateForm:g,projectUserId:n,showPaymentForm:a,contribution:l,reward:s,value:c,mode:r,scope:z,isCnpj:f,vm:i,user:b,project:o})},view:function(o,r){var n=o.user(),i=o.project;return e("#project-payment.w-section.w-clearfix.section",[e(".w-col",e(".w-clearfix.w-hidden-main.w-hidden-medium.card.u-radius.u-marginbottom-20",[e(".fontsize-smaller.fontweight-semibold",t.t("selected_reward.value",o.scope())),e("a.w-inline-block.arrow-admin.fa.fa-chevron-down.fontcolor-secondary[href='#']"),e(".w-clearfix.u-marginbottom-20",e(".fontsize-larger.text-success.u-left","Rs "+Number(o.value).toFixed())),e(".w-clearfix.back-payment-info-reward",{
style:{display:"none"}},[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10",t.t("selected_reward.reward",o.scope())),e(".fontsize-smallest",o.reward().description?o.reward().description:e.trust(t.t("selected_reward.review_without_reward_html",o.scope(_.extend({value:Number(o.value).toFixed()}))))),e('a.fontsize-small.link-hidden.u-right.fontweight-semibold[href="/projects/'+i.project_id+'/contributions/new"]',t.t("selected_reward.edit",o.scope()))])])),e(".w-container",e(".w-row",[e(".w-col.w-col-8",[_.isEmpty(o.vm.fields.errors())?"":e(".card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller",e(".u-marginbottom-10.fontweight-bold",[t.t("errors.global",o.scope()),e(".errors",_.map(o.vm.fields.errors(),function(t){return e("p",t.message)}))])),e(".w-form",[e("form.u-marginbottom-40",[e(".u-marginbottom-40.u-text-center-small-only",[e(".fontweight-semibold.lineheight-tight.fontsize-large",t.t("title",o.scope())),e(".fontsize-smaller",t.t("required",o.scope()))]),n.name&&n.owner_document?e(".card.card-terciary.u-radius.u-marginbottom-40",[e(".w-row",[e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2.w-hidden-tiny",[e('img.thumb.u-margintop-10.u-round[src="'+Ge.useAvatarOrDefault(n.profile_img_thumbnail)+'"][width="100"]')]),e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",["Supporter data¬†",e('a.alt-link[href="/not-my-account?project_id='+i.project_id+'"]',"No, and you?")]),e(".fontsize-base.fontweight-semibold",n.name),e("label.field-label","CPF/CNPJ: "+n.owner_document)])])]):"",e(".w-row.u-marginbottom-30",[e(".w-col.w-col-7.w-sub-col",[e("label.field-label.fontweight-semibold[for='country']",["Parents / ",e("em","Country")," *"]),e("select.w-select.text-field[id='country']",{onfocus:o.vm.resetFieldError("userCountryId"),"class":!!o.fieldHasError("userCountryId")&&"error",onchange:e.withAttr("value",o.vm.fields.userCountryId),value:o.vm.fields.userCountryId()},_.map(o.vm.fields.countries(),function(t,r){return e("option",{value:t.id,key:r,selected:t.id===o.vm.fields.userCountryId()},t.name_en)})),o.fieldHasError("userCountryId")]),e(".w-col.w-col-5")]),n.name&&n.owner_document?"":e(".w-row",[e(".w-col.w-col-7.w-sub-col",[e("label.field-label.fontweight-semibold[for='complete-name']",t.t("fields.complete_name",o.scope())),e("input.w-input.text-field[id='complete-name'][name='complete-name']",{onfocus:o.vm.resetFieldError("completeName"),"class":!!o.fieldHasError("completeName")&&"error",type:"text",onchange:e.withAttr("value",o.vm.fields.completeName),value:o.vm.fields.completeName(),placeholder:"Full name"}),o.fieldHasError("completeName")]),e(".w-col.w-col-5",o.vm.isInternational()?"":[e("label.field-label.fontweight-semibold[for='document']",t.t("fields.owner_document",o.scope())),e("input.w-input.text-field[id='document']",{onfocus:o.vm.resetFieldError("ownerDocument"),"class":!!o.fieldHasError("ownerDocument")&&"error",type:"tel",onkeyup:e.withAttr("value",o.applyDocumentMask),value:o.vm.fields.ownerDocument()}),o.fieldHasError("ownerDocument")])]),e(".w-checkbox.w-clearfix",[e("input.w-checkbox-input[id='anonymous'][name='anonymous'][type='checkbox']",{onclick:function(){return CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_anonymous_change"})},onchange:e.withAttr("value",o.vm.fields.anonymous),checked:o.vm.fields.anonymous()}),e("label.w-form-label.fontsize-smallest[for='anonymous']",t.t("fields.anonymous",o.scope()))]),o.vm.fields.anonymous()?e(".card.card-message.u-radius.zindex-10.fontsize-smallest",e("div",[e("span.fontweight-bold",[t.t("anonymous_confirmation_title",o.scope()),e("br")]),e("br"),t.t("anonymous_confirmation",o.scope())])):""])]),e(".u-marginbottom-40",e(".w-form",[e("label.field-label.fontweight-semibold[for='street']",t.t("fields.street",o.scope())),e("input.w-input.text-field[id='street']",{onfocus:o.vm.resetFieldError("street"),"class":!!o.fieldHasError("street")&&"error",type:"text",onchange:o.addressChange(e.withAttr("value",o.vm.fields.street)),value:o.vm.fields.street(),placeholder:"My Home Street"}),o.fieldHasError("street"),e(".w-row",o.vm.isInternational()?"":[e(".w-col.w-col-4.w-sub-col",[e("label.field-label.fontweight-semibold[for='number']",t.t("fields.street_number",o.scope())),e("input.w-input.text-field[id='number']",{onfocus:o.vm.resetFieldError("number"),"class":!!o.fieldHasError("number")&&"error",type:"text",onchange:o.addressChange(e.withAttr("value",o.vm.fields.number)),value:o.vm.fields.number(),placeholder:"421"}),o.fieldHasError("number")]),e(".w-col.w-col-4.w-sub-col",[e("label.field-label.fontweight-semibold[for='address-complement']",t.t("fields.street_complement",o.scope())),e("input.w-input.text-field[id='address-complement']",{onfocus:o.vm.resetFieldError("addressComplement"),"class":!!o.fieldHasError("addressComplement")&&"error",type:"text",onchange:o.addressChange(e.withAttr("value",o.vm.fields.addressComplement)),value:o.vm.fields.addressComplement(),placeholder:"Residential 123"}),o.fieldHasError("addressComplement")]),e(".w-col.w-col-4",o.vm.isInternational()?"":[e("label.field-label.fontweight-semibold[for='neighbourhood']",t.t("fields.neighbourhood",o.scope())),e("input.w-input.text-field[id='neighbourhood']",{onfocus:o.vm.resetFieldError("neighbourhood"),"class":!!o.fieldHasError("neighbourhood")&&"error",type:"text",onchange:o.addressChange(e.withAttr("value",o.vm.fields.neighbourhood)),value:o.vm.fields.neighbourhood(),placeholder:"S√£o Jos√©"}),o.fieldHasError("neighbourhood")])]),e(".w-row",[e(".w-col.w-col-4.w-sub-col",[e("label.field-label.fontweight-semibold[for='zip-code']",t.t("fields.zipcode",o.scope())),e("input.w-input.text-field[id='zip-code']",{type:"tel",onfocus:o.vm.resetFieldError("zipCode"),"class":!!o.fieldHasError("zipCode")&&"error",onchange:o.addressChange(),onkeyup:e.withAttr("value",function(e){return o.vm.isInternational()?o.vm.fields.zipCode(e):o.applyZipcodeMask(e)}),value:o.vm.fields.zipCode(),placeholder:"42100000"}),o.fieldHasError("zipCode")]),e(".w-col.w-col-4.w-sub-col",[e("label.field-label.fontweight-semibold[for='city']",t.t("fields.city",o.scope())),e("input.w-input.text-field[id='city']",{onfocus:o.vm.resetFieldError("city"),"class":!!o.fieldHasError("city")&&"error",type:"text",onchange:o.addressChange(e.withAttr("value",o.vm.fields.city)),value:o.vm.fields.city(),placeholder:"City"}),o.fieldHasError("city")]),e(".w-col.w-col-4",[e("label.field-label.fontweight-semibold[for='state']",t.t("fields.state",o.scope())),o.vm.isInternational()?e("input.w-input.text-field[id='address-state']",{onchange:o.addressChange(e.withAttr("value",o.vm.fields.userState)),"class":!!o.fieldHasError("userState")&&"error",value:o.vm.fields.userState()}):e("select.w-select.text-field[id='address-state']",{onfocus:o.vm.resetFieldError("userState"),"class":!!o.fieldHasError("userState")&&"error",onchange:o.addressChange(e.withAttr("value",o.vm.fields.userState)),value:o.vm.fields.userState()},_.map(o.vm.fields.states(),function(t,r){return e("option",{value:t.acronym,selected:t.acronym===o.vm.fields.userState()},t.name)})),o.fieldHasError("userState")])]),o.vm.isInternational()?"":e(".w-row",[e(".w-col.w-col-6",[e("label.field-label.fontweight-semibold[for='phone']",t.t("fields.phone",o.scope())),e("input.w-input.text-field[id='phone']",{onfocus:o.vm.resetFieldError("phone"),"class":!!o.fieldHasError("phone")&&"error",type:"tel",onkeyup:e.withAttr("value",o.applyPhoneMask),value:o.vm.fields.phone()}),o.fieldHasError("phone")])])])),e(".w-row.u-marginbottom-40",o.showPaymentForm()?"":e(".w-col.w-col-push-3.w-col-6",e("button.btn.btn-large",{onclick:function(){return CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_next_click"},o.validateForm)}},t.t("next_step",o.scope())))),o.showPaymentForm()?e.component(xi,{vm:o.vm,contribution_id:o.contribution().id,project_id:ko.currentProject().project_id,user_id:n.id}):""]),e(".w-col.w-col-4",[e(".w-hidden-small.w-hidden-tiny.card.u-radius.u-marginbottom-20",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-20",t.t("selected_reward.value",o.scope())),e(".w-clearfix.u-marginbottom-20",[e(".fontsize-larger.text-success.u-left","Rs "+Number(o.value).toFixed()),e('a.fontsize-small.link-hidden.u-right.fontweight-semibold[href="/projects/'+ko.currentProject().project_id+"/contributions/new"+(o.reward().id?"?reward_id="+o.reward().id:"")+'"]',t.t("selected_reward.edit",o.scope()))]),e(".back-payment-info-reward",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10",t.t("selected_reward.reward",o.scope())),e(".fontsize-smallest",o.reward().description?o.reward().description:e.trust(t.t("selected_reward.review_without_reward_html",o.scope(_.extend({value:Number(o.value).toFixed()})))))])]),e.component(Jn,{mode:o.mode,vm:o.vm,faq:o.vm.faq(),projectUserId:o.projectUserId})])]))])}},Si={controller:function(r){var n=Yt,i=n.selectedReward,a=n.selectReward,l=n.rewards(),s=ko.currentProject().mode,c=t.translations[t.currentLocale()].projects.faq[s],d=function(){var t=Ge.monetaryToFloat(n.contributionValue);if(t<n.selectedReward().minimum_value)n.error("The support amount for this reward must be at least Rs"+n.selectedReward().minimum_value);else{if(!Ge.getUser())return Ge.storeObject(storeKey,{value:t,reward:n.selectedReward()}),Ge.navigateToDevise("/"+ko.currentProject().permalink);n.error(""),n.contributionValue(t),e.route("/projects/"+ko.currentproject().project_id+"/payment",{project_user_id:ko.currentProject().user_id})}return!1},u=function(e){return e.id===i().id};return o.first(l).id!==n.noReward.id&&l.unshift(n.noReward),{rewards:l,project:ko.currentProject,contributionValue:n.contributionValue,submitContribution:d,applyMask:n.applyMask,error:n.error,isSelected:u,selectedReward:i,selectReward:a,faq:c}},view:function(t,r){var n=t.project;return e("#project-rewards",[e(".w-section.page-header.u-text-center",[e(".w-container",[e('h1.fontsize-larger.fontweight-semibold.project-name[itemprop="name"]',Ge.selfOrEmpty(n().name||n().project_name)),e('h2.fontsize-base.lineheight-looser[itemprop="author"]',["per ",n().user?n().user.name:n().owner_name?n().owner_name:""])])]),e(".w-section.header-cont-new",e(".w-container",e(".fontweight-semibold.lineheight-tight.text-success.fontsize-large.u-text-center-small-only","Choose the reward and then the value of the support"))),e(".section[id='new-contribution']",e(".w-container",e(".w-row",[e(".w-col.w-col-8",e(".w-form.back-reward-form",e("form.simple_form.new_contribution",{onsubmit:t.submitContribution},o.map(t.rewards,function(o,r){var n=t.isSelected(o),i=Ge.applyMonetaryMask(o.minimum_value);return e("span.radio.w-radio.w-clearfix.back-reward-radio-reward",{"class":n?"selected":"",onclick:t.selectReward(o),key:r},e("label[for='contribution_reward_id_"+o.id+"']",[e("input.radio_buttons.optional.w-input.text-field.w-radio-input.back-reward-radio-button[id='contribution_reward_id_"+o.id+"'][name='contribution[reward_id]'][type='radio'][value='"+o.id+"']",{checked:!!n}),e("label.w-form-label.fontsize-base.fontweight-semibold.u-marginbottom-10[for='contribution_reward_"+o.id+"']",o.id===-1?"I do not want any reward":"Rs "+o.minimum_value+" or more"),n?e(".w-row.back-reward-money",[e(".w-col.w-col-8.w-col-small-8.w-col-tiny-8.w-sub-col-middle.w-clearfix",[e(".w-row",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".back-reward-input-reward.placeholder","Rs")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("input.user-reward-value.back-reward-input-reward[autocomplete='off'][type='tel']",{"class":t.error()?"error":"",min:i,placeholder:i,onkeyup:e.withAttr("value",t.applyMask),value:t.contributionValue()}))]),t.error().length>0?e(".text-error",[e("br"),e("span.fa.fa-exclamation-triangle")," "+t.error()]):""]),e(".submit-form.w-col.w-col-4.w-col-small-4.w-col-tiny-4",e("button.btn.btn-large",["Continue  ",e("span.fa.fa-chevron-right")]))]):"",e(".back-reward-reward-description",[e(".fontsize-smaller.u-marginbottom-10",o.description),o.deliver_at?e(".fontsize-smallest.fontcolor-secondary","Estimated delivery: "+Ge.momentify(o.deliver_at,"MMM/YYYY")):""])]))})))),e(".w-col.w-col-4",e.component(Jn,{mode:t.project().mode,faq:t.faq}))])))])}},Pi=o.partial(Ge.i18nScope,"projects.publish"),Ti={controller:function(t){var r=postgrest.filtersVM({project_id:"eq"}),n=e.prop([]),i=e.prop([]),a=e.prop([!0,!0,!0,!0,!0,!0,!0,!0,!0]),l=e.prop([!0,!0,!0,!0,!0,!0,!0,!0,!0]),s=function(e,t){var o=t();if(o[e]){o[e]=!1,t(o);var r=document.getElementsByClassName("w-hidden publish-rules");void 0!==r[0]&&r[0].classList.remove("w-hidden")}e===o.length-1&&document.getElementsByClassName("publish-btn-section")[0].classList.remove("w-hidden")},c=postgrest.loaderWithToken;r.project_id(t.root.getAttribute("data-id"));var d=c($e.projectDetail.getRowOptions(r.parameters())),u=c($e.projectAccount.getRowOptions(r.parameters()));d.load().then(i),u.load().then(n);var m=function(){var e=o.first(i());return moment().add(e.online_days,"days")};return{l:d,accountL:u,expiresAt:m,filtersVM:r,acceptTerm:a,flexAcceptTerm:l,showNextTerm:s,projectAccount:n,projectDetails:i}},view:function(r,n){var i=o.first(r.projectDetails()),a=(o.first(r.projectAccount()),function(t){return[e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","1/9"),"¬†",e("span.fontweight-semibold","FLEX Rules")]),e("div","You have chosen the flexible campaign. In this way, you will receive all the funds collected from the supporters at the end of the campaign term (discounting the JVN fee) and must comply with the execution of the campaign and with the delivery of the rewards offered regardless of how much to collect.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","2/9"),"¬†",e("span.fontweight-semibold","Goal of collection")]),e("div","The goal can not be changed after the campaign has been published.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","3/9"),"¬†",e("span.fontweight-semibold","Rates")]),e("div",["At the end of the campaign, we will charge 5% + online payment portal charge of",e("span.fontweight-semibold","total amount collected. ")])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","4/9"),"¬†",e("span.fontweight-semibold","Campaign deadline")]),e("div","Once set, the closing period can not be changed. If you started the campaign with the deadline, you must set it during the campaign, and you can leave the campaign open for a maximum of 12 months.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","5/9"),"¬†",e("span.fontweight-semibold","Deadline for transfer")]),e("div","When the deadline for your campaign comes to an end, you should verify your bank details. After this confirmation, JVN will deposit into your checking account within 10 business days. The amount deposited will already be considering the 5% + online payment portal charge discount of the fee.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","6/9"),"¬†",e("span.fontweight-semibold","What can and can not change on the campaign page from publication?")]),[e("div",[e("span.fontweight-semibold","You may not:")," Change the type of funding, campaign name, campaign URL, category chosen, collection goal, deadline (if you have already defined it), rewards where existing support is available, and registered bank account.                    ",e("br"),e("br"),e("span.fontweight-semibold","You will be able to: "),"Edit the content of the campaign description, change the main campaign video, campaign image, effect phrase, rewards where there are no supports made, and add new rewards during fundraising."])]]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","7/9"),"¬†",e("span.fontweight-semibold","Responsibility of JVN")]),[e("div",[e("span.fontweight-semibold"),e("span.fontweight-semibold","JVN is responsible for:"),"¬†By the technological development of the platform, attendance of doubts and problems (both of supporters and directors), by hosting the campaign in the platform and by guaranteeing the security of the financial transactions. ",e("br"),e("br"),e("span.fontweight-semibold","JVN is not responsible for:"),"¬†Financing, dissemination and execution, nor for the delivery of rewards of the projects registered."])]]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","8/9"),"¬†",e("span.fontweight-semibold","Your responsibilities")]),e("div",[e("span.fontweight-semibold"),e("span.fontweight-semibold"),"It is your responsibility for all aspects of campaign formatting, planning and dissemination of the fundraising campaign, mobilizing supporters, executing the campaign, producing and delivering rewards within the estimated deadline, and communicating with supporters."])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","9/9"),"¬†",e("span",{style:{"font-weight":" 600"}},"Withdrawals from campaign in the air")]),e("div",[e("span.fontweight-semibold"),"JVN reserves the right, in its sole discretion and once notified, to cancel campaign and terminate the accounts of CAMPAIGN CREATORS that violate our ",e("a.alt-link[href='/terms-of-use'][target='_blank']","Terms of use"),"."])])]}),l=function(t){return[e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","1/9")," ",e("span.fontweight-semibold","Rules of the All-or-nothing mode")]),e("div",["You chose the all-or-nothing campaign. In this way, you will only receive the funds raised ",e("span.fontweight-semibold","if it reaches or exceeds the collection goal"),". Otherwise, all of your supporters will be reimbursed. You will be responsible for delivering the rewards offered if your project reaches the collection goal."])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","2/9"),"¬†",e("span",{style:{"font-weight":" 600"}},"Goal of collection")]),e("div","The goal can not be changed after the campaign has been published.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","3/9"),"¬†",e("span",{style:{"font-weight":" 600"}},"Rates")]),e("div",["We will charge 5% + online payment portal charge of ",e("span.fontweight-semibold","total amount collected")," for your campaign if it reaches or exceeds the target within the campaign deadline. If the campaign does not reach the goal, no fee will be charged.",e("span.fontweight-semibold")])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","4/9"),"¬†",e("span",{style:{"font-weight":" 600"}},"Campaign deadline")]),e("div","Your campaign will be in collection at JVN until "+Ge.momentify(r.expiresAt())+" 11:50 p.m. This deadline can not be changed after the campaign has been published.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","5/9"),"¬†",e("span",{style:{"font-weight":" 600"}},"Transfer and refund rules")]),e("div",["When the deadline for your campaign comes to an end, you should verify your bank details. After this confirmation, JVN will deposit the amount collected, with the discount of the rate, into your checking account within 10 business days. If the campaign does not reach 100% of the target by the deadline, JVN will reimburse the supporters. "])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","6/9"),"¬†",e("span",{style:{"font-weight":" 600"}},"What can and can not change on the campaign page after publication?")]),[e("div",[e("span.fontweight-semibold","You can not:")," Change the name of your campaign, the URL (link) of your campaign, the category chosen, the type of financing, the bank account, the collection goal, the term chosen and the rewards where existing support already exists. ",e("br"),e("br"),e("span.fontweight-semibold","You will be able to: "),"Edit the content of the campaign description, change the main campaign video, campaign image, effect phrase, rewards where there are no supports made, and add new rewards during fundraising."])]]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","7/9"),"¬†",e("span",{style:{"font-weight":" 600"}},"Responsibility of JVN")]),[e("div",[e("span.fontweight-semibold"),e("span.fontweight-semibold","JVN is responsible:"),"¬†By the technological development of the platform, attendance of doubts and problems (both of supporters and directors), by hosting the project in the platform and by guaranteeing the security of the financial transactions. ",e("br"),e("br"),e("span.fontweight-semibold","JVN is not responsible for:"),"¬†Financing, dissemination and execution, nor for the delivery of rewards of the campaigns registered."])]]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","8/9"),"¬†",e("span",{style:{"font-weight":" 600"}},"Your responsibilities")]),e("div",[e("span.fontweight-semibold"),e("span.fontweight-semibold"),"It is your responsibility for all aspects of campaign formatting, planning and dissemination of the fundraising campaign, mobilizing supporters, executing the campaign, producing and delivering rewards within the estimated deadline, and communicating with supporters."])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","9/9"),"¬†",e("span",{style:{"font-weight":" 600"}},"Withdrawals from projects in the air")]),e("div",[e("span.fontweight-semibold"),"JVN reserves the right, in its sole discretion and once notified, to cancel campaigns and terminate the accounts of CAMPAIGN CREATORS that violate our",e("a.alt-link[href='/terms-of-use'][target='_blank']","Terms of use"),"."])])]};return[r.l()||r.accountL()?Ge.loader():[i.is_owner_or_admin?e.component(Do,{project:e.prop(i),hidePublish:!0}):"",e(".w-section.section-product."+i.mode),e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".u-text-center",[e("img.u-marginbottom-20[src='/assets/catarse_bootstrap/launch-icon.png'][width='94']"),e(".fontsize-large.fontweight-semibold.u-marginbottom-20","Ready to launch your campaign?"),e(".fontsize-base.u-marginbottom-30","We`ve prepared a list with important information for you to check before putting your project on the air!")])]),e(".w-col.w-col-3")])])]),e(".divider"),e(".w-section.section-one-column.bg-gray.section.before-footer",[e(".w-container",[e(".card.medium.u-marginbottom-60.card-terciary",[e(".w-row",[e(".w-col.w-col-6.w-clearfix",[e("img.card-project-thumb.u-right[src="+i.large_image+"]")]),e(".w-col.w-col-6",[e(".u-marginbottom-30.fontsize-base",[e("div",[e("span.fontweight-semibold","Title: "),i.name]),e("div",[e("span.fontweight-semibold","Link: "),"www.myjvn.com/"+i.permalink]),e("div",[e("span.fontweight-semibold","Method of financing: "),t.t(i.mode,Pi())]),e("div",[e("span.fontweight-semibold","Goal of collection: "),"Rs "+Ge.formatNumber(i.goal,2,3)]),null!==i.online_days?e("div",[e("span.fontweight-semibold","Deadline: "+i.online_days+" "+(i.online_days>1,"days"))]):""])])]),e(".u-text-center",[e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",[e(".divider.u-marginbottom-10"),e(".fontsize-small.fontcolor-secondary","The above data can not be changed after the project goes live. If you need to make changes, navigate the sidebar and come back here when you`re done!")]),e(".w-col.w-col-1")])])]),e(".card.medium.u-radius.u-marginbottom-60",[e(".u-text-center.u-marginbottom-60",[e(".fontsize-large.fontweight-semibold","Remember Our Rules"),e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-small",["Before posting, click on the circles below and confirm that you are aware of how JVN works."])]),e(".w-col.w-col-2")])]),o.map("flex"==i.mode?a(i):l(i),function(t,o){return e(".u-marginbottom-30.fontsize-base"+(0==o?"":".w-hidden.publish-rules"),[e(".w-row[id='rule-"+o+"']",[e(".w-col.w-col-1.u-text-center",[e("div",[e(("flex"==i.mode?r.flexAcceptTerm():r.acceptTerm())[o]?"a.w-inline-block.checkbox-big[href='#rule-"+(o+1)+"']":"a.w-inline-block.checkbox-big.checkbox--selected.fa.fa-check.fa-lg[href='#rule-"+(o+1)+"']",{onclick:function(){return r.showNextTerm(o,"flex"==i.mode?r.flexAcceptTerm:r.acceptTerm)}})])]),t])])})]),e(".w-row.publish-btn-section.w-hidden",[e(".w-col.w-col-4"),e(".w-col.w-col-4",[e("a.btn.btn-large.u-marginbottom-20[href=/"+("flex"==i.mode?"flexible_projects":"projects")+"/"+i.project_id+"/push_to_online]","Publish now!"),e(".u-text-center.fontsize-smaller",["When you publish your project, you are accepting ",e("a.alt-link[href='/terms-of-use'][target='_blank']","Terms of use")," and ",e("a.alt-link[href='/privacy-policy'][target='_blank']","Privacy policy")])]),e(".w-col.w-col-4")])])]),"    "]]}},Mi=function(e){var t=e.translations[e.currentLocale()].pages.start,r=t.categoryProjects,n=t.panes,i=t.qa;return{panes:o.map(n,function(e){return{label:e.label,src:e.src}}),questions:{col_1:o.map(i.col_1,function(e){return{question:e.question,answer:e.answer}}),col_2:o.map(i.col_2,function(e){return{question:e.question,answer:e.answer}})},categoryProjects:o.map(r,function(e){return{categoryId:e.category_id,sampleProjects:[e.sample_project_ids.primary,e.sample_project_ids.secondary]}})}},Ai=o.partial(Ge.i18nScope,"pages.start"),Ei={controller:function(){Ge.analytics.windowScroll({cat:"project_start",act:"start_page_scroll"});var r=e.prop([]),n=e.prop([]),a=e.prop(0),l=e.prop([]),s=e.prop([]),c=e.prop(-1),d=Mi(t),u=i.filtersVM,m=d.panes,p=u({category_id:"eq"}),f=u({project_id:"eq"}),w=u({id:"eq"}),b=i.loader,g=b($e.statistic.getRowOptions()),h=function(){return $e.category.getPage(u({}).order({name:"asc"}).parameters()).then(n)},_=function(e){return function(){a(e)}},v=function(){return b($e.categoryTotals.getRowOptions(p.parameters()))},y=function(){return b($e.projectDetail.getRowOptions(f.parameters()))},k=function(){return b($e.userDetail.getRowOptions(w.parameters()))},x=function(t){return function(){c(t.id),p.category_id(t.id),l([t]),e.redraw(),v().load().then(C)}},j=function(e,t){s()[t]=o.extend({},s()[t],{userThumb:o.first(e).profile_img_thumbnail})},z=function(e,t){s()[t]=o.first(e),w.id(o.first(e).user.id),k().load().then(function(e){return j(e,t)})},C=function(e){l(e);var t=o.findWhere(d.categoryProjects,{categoryId:o.first(e).category_id});s([]),o.isUndefined(t)||o.map(t.sampleProjects,function(e,t){o.isUndefined(e)||(f.project_id(e),y().load().then(function(e){return z(e,t)}))})},S=e.prop("-1"),P=e.prop(""),T=e.prop(!1),M=e.prop(!1),A=function(){return M(S()==-1),T(""===P().trim()),!M()&&!T()};return g.load().then(r),h(),{stats:r,categories:n,paneImages:m,selectCategory:x,selectedCategory:l,selectedCategoryIdx:c,selectPane:_,selectedPane:a,featuredProjects:s,testimonials:d.testimonials,questions:d.questions,projectCategory:S,projectName:P,projectNameError:T,projectCategoryError:M,validateProjectForm:A}},view:function(r,n){var i=o.first(r.stats());return e("#start",{config:Ge.setPageTitle(t.t("header_html",Ai()))},[e(".w-section.hero-full.hero-start",[e(".w-container.u-text-center",[e(".fontsize-megajumbo.fontweight-semibold.u-marginbottom-40",t.t("slogan",Ai())),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-4.w-col-push-4",[e('a.btn.btn-large.u-marginbottom-10[href="#start-form"]',{config:Ge.scrollTo(),onclick:Ge.analytics.event({cat:"project_start",act:"start_btnstart_click"})},t.t("submit",Ai()))])]),e(".w-row",o.isEmpty(i)?"":[e(".w-col.w-col-4",[e(".fontsize-largest.lineheight-loose",Ge.formatNumber(i.total_contributors,0,3)),e("p.fontsize-small.start-stats",t.t("header.people",Ai()))]),e(".w-col.w-col-4",[e(".fontsize-largest.lineheight-loose",i.total_contributed.toString().slice(0,2)+" millions"),e("p.fontsize-small.start-stats",t.t("header.money",Ai()))]),e(".w-col.w-col-4",[e(".fontsize-largest.lineheight-loose",Ge.formatNumber(i.total_projects_success,0,3)),e("p.fontsize-small.start-stats",t.t("header.success",Ai()))])])])]),e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1.u-text-center",[e(".fontsize-larger.u-marginbottom-10.fontweight-semibold",t.t("page-title",Ai())),e(".fontsize-small",t.t("page-subtitle",Ai()))])]),e(".w-clearfix.how-row",[e(".w-hidden-small.w-hidden-tiny.how-col-01",[e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.1",Ai())),e(".fontsize-base",t.t("banner.2",Ai()))]),e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.3",Ai())),e(".fontsize-base",t.t("banner.4",Ai()))])]),e(".how-col-02"),e(".how-col-03",[e(".fontweight-semibold.fontsize-large",t.t("banner.5",Ai())),e(".fontsize-base",t.t("banner.6",Ai())),e(".fontweight-semibold.fontsize-large.u-margintop-30",t.t("banner.7",Ai())),e(".fontsize-base",t.t("banner.8",Ai()))]),e(".w-hidden-main.w-hidden-medium.how-col-01",[e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.1",Ai())),e(".fontsize-base",t.t("banner.2",Ai()))]),e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.3",Ai())),e(".fontsize-base",t.t("banner.4",Ai()))])])])])]),e(".w-section.divider"),e(".w-section.section-large.card-terciary",e(".w-container",[e(".u-text-center.u-marginbottom-40",[e("div",e("span.fontsize-largest.fontweight-semibold",t.t("mode.title",Ai()))),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".fontsize-large.u-marginbottom-20",t.t("mode.subtitle",Ai()))),e(".w-col.w-col-1")])]),e("div",e(".flex-row.u-marginbottom-40",[e(".flex-column.card.u-radius.u-marginbottom-30",[e(".u-text-center.u-marginbottom-30",e("img[src='/assets/aon-badge.png']")),e(".fontsize-large.flex-column.u-marginbottom-20",[t.t("mode.aon.info",Ai()),e.trust("&nbsp;")]),e(".fontsize-base.flex-column.fontcolor-secondary",t.t("mode.aon.info_2",Ai()))]),e(".flex-column.card.u-radius.u-marginbottom-30",[e(".u-text-center.u-marginbottom-30",e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/5632ebacd092957f34eaea9c_badge-flex.png']")),e(".fontsize-large.flex-column.u-marginbottom-20",t.t("mode.flex.info",Ai())),e(".fontsize-base.flex-column.fontcolor-secondary",t.t("mode.flex.info_2",Ai()))])])),e(".u-text-center.u-marginbottom-30",[e(".fontsize-large.fontweight-semibold",t.t("mode.tax_info",Ai()))])])),e(".w-container",[e(".fontsize-larger.u-text-center.u-marginbottom-60.u-margintop-40",t.t("qa_title",Ai())),e(".w-row.u-marginbottom-60",[e(".w-col.w-col-6",o.map(r.questions.col_1,function(t){return e.component(Po,{question:t.question,answer:t.answer,onclick:Ge.analytics.event({cat:"project_start",act:"start_qa_click",lbl:t.question})})})),e(".w-col.w-col-6",o.map(r.questions.col_2,function(t){return e.component(Po,{question:t.question,answer:t.answer,onclick:Ge.analytics.event({cat:"project_start",act:"start_qa_click",lbl:t.question})})}))])]),e("#start-form.w-section.section-large.u-text-center.bg-purple.before-footer",[e(".w-container",[e(".fontsize-jumbo.fontcolor-negative.u-marginbottom-60","Create your campaign for FREE!"),e('form[action="/projects/fallback_create"][method="GET"].w-row.w-form',{onsubmit:function(e){return Ge.analytics.oneTimeEvent({cat:"project_create",act:"create_form_submit"})(e),r.validateProjectForm()}},[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-larger.fontcolor-negative.u-marginbottom-10",t.t("form.title",Ai())),e('input[name="utf8"][type="hidden"][value="‚úì"]'),e('input[name="authenticity_token"][type="hidden"][value="'+Ge.authenticityToken()+'"]'),e('input.w-input.text-field.medium.u-marginbottom-30[type="text"]',{name:"project[name]","class":r.projectNameError()?"error":"",onfocus:function(){return r.projectNameError(!1)},onchange:function(t){Ge.analytics.oneTimeEvent({cat:"project_create",act:"create_form_change",lbl:"name"})(t),e.withAttr("value",r.projectName)(t)}}),e(".fontsize-larger.fontcolor-negative.u-marginbottom-10","In category"),e("select.w-select.text-field.medium.u-marginbottom-40",{name:"project[category_id]","class":r.projectCategoryError()?"error":"",
onfocus:function(){return r.projectCategoryError(!1)},onchange:function(t){Ge.analytics.oneTimeEvent({cat:"project_create",act:"create_form_change",lbl:"category"})(t),e.withAttr("value",r.projectCategory)(t)}},[e('option[value="-1"]',t.t("form.select_default",Ai())),o.map(r.categories(),function(t){return e('option[value="'+t.id+'"]',{selected:r.projectCategory()===t.id},t.name)})])]),e(".w-col.w-col-2"),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4.w-col-push-4.u-margintop-40",[e('input[type="submit"][value="'+t.t("form.submit",Ai())+'"].w-button.btn.btn-large')])]),e(".w-row.u-marginbottom-80",r.projectNameError()||r.projectCategoryError()?e.component(Pn,{message:"Please check the fields above again!"}):"")])])])])}},Di={controller:function(){var t={collection:e.prop([])};return $e.teamTotal.getRow().then(function(e){t.collection(e)}),{vm:t}},view:function(t,o){return e("#team-total-static.w-section.section-one-column.section.u-margintop-40.u-text-center.u-marginbottom-20",[t.vm.collection().map(function(t){return e(".w-container",[e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-base.u-marginbottom-30","Today we are"+t.member_count+" People scattered over "+t.total_cities+" Cities in "+t.countries.length+" Countries ("+t.countries.toString()+")! JVN is independent, open-source, and built with love. Our passion is to build an environment where more and more projects can come to life."),e(".fontsize-larger.lineheight-tight.text-success","Our team, together, has already Rs"+Ge.formatNumber(t.total_amount)+" for "+t.total_contributed_projects+" Business!")]),e(".w-col.w-col-2")])])})])}},Ri={controller:function(){var t={collection:e.prop([])},r=function(e,t){return o.map(o.range(Math.ceil(e.length/t)),function(o){return e.slice(o*t,(o+1)*t)})};return $e.teamMember.getPage().then(function(e){t.collection(r(e,4))}),{vm:t}},view:function(t){return e("#team-members-static.w-section.section",[e(".w-container",[o.map(t.vm.collection(),function(t){return e(".w-row.u-text-center",[o.map(t,function(t){return e(".team-member.w-col.w-col-3.w-col-small-3.w-col-tiny-6.u-marginbottom-40",[e('a.alt-link[href="/users/'+t.id+'"]',[e('img.thumb.big.u-round.u-marginbottom-10[src="'+t.img+'"]'),e(".fontweight-semibold.fontsize-base",t.name)]),e(".fontsize-smallest.fontcolor-secondary","Supported "+t.total_contributed_projects+" Business")])})])})])])}},Ni={view:function(){return e("#static-team-app",[e.component(Di),e.component(Ri)])}},Fi=o.partial(Ge.i18nScope,"users.balance"),Ii={controller:function(e){var t=(postgrest.filtersVM({user_id:"eq"}),e.balance),o=$e.balanceTransfer.postOptions({user_id:t.user_id}),r=postgrest.loaderWithToken(o),n=Ge.toggleProp(!1,!0),i=function(){r.load().then(function(t){e.balanceManager.load(),e.balanceTransactionManager.load(),n.toggle()})};return e.bankAccountManager.load(),{requestLoader:r,requestFund:i,bankAccounts:e.bankAccountManager.collection,displayDone:n,loadBankA:e.bankAccountManager.loader}},view:function(r,n){var i=n.balance;return r.loadBankA()?Ge.loader():e("div",o.map(r.bankAccounts(),function(o){return[e(".modal-dialog-header",[e(".fontsize-large.u-text-center",t.t("withdraw",Fi()))]),r.displayDone()?e(".modal-dialog-content.u-text-center",[e(".fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40"),e("p.fontsize-large",t.t("sucess_message",Fi()))]):e(".modal-dialog-content",[e(".fontsize-base.u-marginbottom-20",[e("span.fontweight-semibold","Value:"),e.trust("&nbsp;"),e("span.text-success","R$ "+Ge.formatNumber(i.amount,2,3))]),e(".fontsize-base.u-marginbottom-10",[e("span",{style:{"font-weight":" 600"}},t.t("bank.account",Fi()))]),e(".fontsize-small.u-marginbottom-10",[e("div",[e("span.fontcolor-secondary",t.t("bank.name",Fi())),e.trust("&nbsp;"),o.owner_name]),e("div",[e("span.fontcolor-secondary",t.t("bank.cpf_cnpj",Fi())),e.trust("&nbsp;"),o.owner_document]),e("div",[e("span.fontcolor-secondary",t.t("bank.bank_name",Fi())),e.trust("&nbsp;"),o.bank_name]),e("div",[e("span.fontcolor-secondary",t.t("bank.agency",Fi())),e.trust("&nbsp;"),o.agency+"-"+o.agency_digit]),e("div",[e("span.fontcolor-secondary",t.t("bank.account",Fi())),e.trust("&nbsp;"),o.account+"-"+o.account_digit])])]),r.displayDone()?"":e(".modal-dialog-nav-bottom",[e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[r.requestLoader()?Ge.loader():e('a.btn.btn-large.btn-request-fund[href="js:void(0);"]',{onclick:r.requestFund},"Request withdrawal")]),e(".w-col.w-col-3")])])]}))}},qi=o.partial(Ge.i18nScope,"users.balance"),Oi={controller:function(e){return e.balanceManager.load(),{userBalances:e.balanceManager.collection,displayModal:Ge.toggleProp(!1,!0)}},view:function(t,r){var n=o.first(t.userBalances()),i=[Ii,o.extend({},{balance:n},r)];return e(".w-section.section.user-balance-section",[t.displayModal()?e.component(Ro,{displayModal:t.displayModal,content:i}):"",e(".w-container",[e(".w-row",[e(".w-col.w-col-8.u-text-center-small-only.u-marginbottom-20",[e(".fontsize-larger",[I18n.t("totals",qi()),e("span.text-success","Rs "+Ge.formatNumber(n.amount,2,3))])]),e(".w-col.w-col-4",[e('a[class="r-fund-btn w-button btn btn-medium u-marginbottom-10 '+(n.amount<=0?"btn-inactive":"")+'"][href="js:void(0);"]',{onclick:n.amount>0?t.displayModal.toggle:"js:void(0);"},I18n.t("withdraw_cta",qi()))])])])])}},Vi=_.partial(Ge.i18nScope,"users.balance"),Li={controller:function(e){var t=Ge.toggleProp(!1,!0);return 0==e.index&&t.toggle(),{expanded:t}},view:function(t,o){var r=o.item,n=Ge.momentFromString(r.created_at,"YYYY-MM-DD");return e("div[class='balance-card "+(t.expanded()?"card-detailed-open":"")+"']",e(".w-clearfix.card.card-clickable",[e(".w-row",[e(".w-col.w-col-2.w-col-tiny-2",[e(".fontsize-small.lineheight-tightest",n.format("D MMM")),e(".fontsize-smallest.fontcolor-terciary",n.format("YYYY"))]),e(".w-col.w-col-10.w-col-tiny-10",[e(".w-row",[e(".w-col.w-col-4",[e("div",[e("span.fontsize-smaller.fontcolor-secondary",I18n.t("debit",Vi())),e.trust("&nbsp;"),e("span.fontsize-base.text-error","Rs "+Ge.formatNumber(Math.abs(r.debit),2,3))])]),e(".w-col.w-col-4",[e("div",[e("span.fontsize-smaller.fontcolor-secondary",I18n.t("credit",Vi())),e.trust("&nbsp;"),e("span.fontsize-base.text-success","Rs "+Ge.formatNumber(r.credit,2,3))])]),e(".w-col.w-col-4",[e("div",[e("span.fontsize-smaller.fontcolor-secondary",I18n.t("totals",Vi())),e.trust("&nbsp;"),e("span.fontsize-base","Rs "+Ge.formatNumber(r.total_amount,2,3))])])])])]),e("a.w-inline-block.arrow-admin."+(t.expanded()?"arrow-admin-opened":"")+'.fa.fa-chevron-down.fontcolor-secondary[href="js:(void(0));"]',{onclick:t.expanded.toggle})]),t.expanded()?e(".card",_.map(r.source,function(t){var o=t.amount>=0;return e("div",[e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-2",[e(".text-"+(o?"success":"error"),(o?"+":"-")+" Rs "+Ge.formatNumber(Math.abs(t.amount),2,3))]),e(".w-col.w-col-10",[e("div",t.event_name+" "+t.origin_object.name)])]),e(".divider.u-marginbottom-10")])})):"")}},Bi={controller:function(e){return e.balanceTransactionManager.load(),{list:e.balanceTransactionManager.list}},view:function(t,r){var n=t.list;return e(".w-section.section.card-terciary.before-footer.balance-transactions-area",[e(".w-container",o.map(n.collection(),function(t,o){return e.component(Li,{item:t,index:o})})),e(".container",[e(".w-row.u-margintop-40",[e(".w-col.w-col-2.w-col-push-5",[n.isLoading()?Ge.loader():n.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:n.nextPage},"Load more")])])])])}},Ui={controller:function(t){var o=i.filtersVM({user_id:"eq"});o.user_id(t.user_id);var r=function(){var r=e.prop([{amount:0,user_id:t.user_id}]),n=function(){$e.balance.getRowWithToken(o.parameters()).then(r)};return{collection:r,load:n}}(),n=function(){var e=i.paginationVM($e.balanceTransaction,"created_at.desc"),t=function(){e.firstPage(o.parameters())};return{load:t,list:e}}(),a=function(){var t=e.prop([]),r=function(){return i.loaderWithToken($e.bankAccount.getRowOptions(o.parameters()))}(),n=function(){r.load().then(t)};return{collection:t,load:n,loader:r}}();return{bankAccountManager:a,balanceManager:r,balanceTransactionManager:n}},view:function(t,r){var n=o.extend({},r,t);return e("#balance-area",[e.component(Oi,n),e(".divider"),e.component(Bi,n),e(".u-marginbottom-40"),e(".w-section.section.card-terciary.before-footer")])}},Yi={controller:function(t){var o=e.prop(t.friend);return{friend:o}},view:function(t,r){var n=t.friend(),i=o.isEmpty(n.avatar)?"/assets/catarse_bootstrap/user.jpg":n.avatar;return e(".w-col.w-col-4",e(".card.card-backer.u-marginbottom-20.u-radius.u-text-center",[e("img.thumb.u-marginbottom-10.u-round[src='"+i+"']"),e(".fontsize-base.fontweight-semibold.lineheight-tight",e("a.link-hidden",{href:"/users/"+n.friend_id},n.public_name||n.name)),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",o.isNull(n.city)?"":e(".fontsize-smaller.fontcolor-secondary.u-marginbottom-10",n.city+", "+n.state)),e(".fontsize-smaller",[e("span.fontweight-semibold",n.total_contributed_projects)," Backed ",e.trust("&nbsp;"),"| ",e.trust("&nbsp;"),e("span.fontweight-semibold",n.total_published_projects)," Created"]),e(".btn-bottom-card.w-row",[e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3"),e(".w-col.w-col-6.w-col-small-4.w-col-tiny-6",e.component(tn,{following:n.following,follow_id:n.friend_id})),e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3")])]))}},Wi={controller:function(t){$e.userFriend.pageSize(9);var o=i.filtersVM({user_id:"eq"}),r=t.user,n=i.paginationVM($e.userFriend,"following.asc,total_contributed_projects.desc",{Prefer:"count=exact"}),a=e.prop(!1),l=function(){a(!0);var e=i.loaderWithToken($e.followAllFriends.postOptions({}));e.load().then(function(){n.firstPage(o.parameters()),a(!1)})};return o.user_id(r.user_id),n.collection().length||n.firstPage(o.parameters()),{friendListVM:n,followAll:l,allLoading:a}},view:function(t,r){var n=t.friendListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row.u-marginbottom-40.card.u-radius.card-terciary",[e(".w-col.w-col-7.w-col-small-6.w-col-tiny-6",[e(".fontsize-small","Start now! Follow all your friends or just a few of them to discover projects together!")]),e(".w-col.w-col-5.w-col-small-6.w-col-tiny-6",[t.allLoading()?Ge.loader():e("a.w-button.btn.btn-medium",{onclick:t.followAll},"Follow all your "+(n.total()?n.total():"")+" friends")])]),e(".w-row",[o.map(n.collection(),function(t){return e.component(Yi,{friend:t})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(Tn,{collection:n}),e(".w-col.w-col-5")])])])])])}},Hi={controller:function(t){$e.userFollow.pageSize(9);var o=i.filtersVM({user_id:"eq"}),r=t.user,n=(e.prop(window.location.hash),i.paginationVM($e.userFollow,"created_at.desc",{Prefer:"count=exact"}));return o.user_id(r.user_id),n.collection().length||n.firstPage(o.parameters()),{followsListVM:n}},view:function(t,r){var n=t.followsListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row",[o.map(n.collection(),function(t){return e.component(Yi,{friend:o.extend({},{following:!0,friend_id:t.follow_id},t.source)})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(Tn,{collection:n}),e(".w-col.w-col-5")])])])])])}},Ji={controller:function(e){$e.userFollower.pageSize(9);var t=i.paginationVM($e.userFollower,"following.asc,created_at.desc",{Prefer:"count=exact"}),o=e.user,r=i.filtersVM({follow_id:"eq"});return r.follow_id(o.user_id),t.collection().length||t.firstPage(r.parameters()),{followersListVM:t}},view:function(t,r){var n=t.followersListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row",[o.map(n.collection(),function(t){return e.component(Yi,{friend:o.extend({},{friend_id:t.user_id},t.source)})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(Tn,{collection:n}),e(".w-col.w-col-5")])])])])])}},Xi={controller:function(e){$e.creatorSuggestion.pageSize(9);var t=i.paginationVM($e.creatorSuggestion,"following.asc, total_published_projects.desc, total_contributed_projects.desc",{Prefer:"count=exact"});return t.collection().length||t.firstPage(),{creatorsListVM:t}},view:function(t,r){var n=t.creatorsListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row",[o.map(n.collection(),function(t){return e.component(Yi,{friend:o.extend({},{friend_id:t.user_id},t)})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(Tn,{collection:n}),e(".w-col.w-col-5")])])])])])}},Ki={controller:function(t){var r=Ge.getUser(),n=e.prop(window.location.hash),i=function(){var t={user:r},i={"#creators":e.component(Xi,t),"#friends":e.component(Wi,t),"#follows":e.component(Hi,t),"#followers":e.component(Ji,t)};return n(window.location.hash),o.isEmpty(n())||"#_=_"===n()?i["#friends"]:i[n()]};return Ge.redrawHashChange(),{user:r,displayTabContent:i}},view:function(t,o){return e("div",[e(".w-section.dashboard-header",[e(".w-container",[e(".w-row.u-margintop-20.u-marginbottom-20",[e(".w-col.w-col-1"),e(".w-col.w-col-10.u-text-center",[e(".fontsize-larger.fontweight-semibold.u-marginbottom-10","Discover projects with your friends"),e(".fontsize-small","Follow your friends and we will notify you whenever they launch or support any project")]),e(".w-col.w-col-1")])])]),e(".divider.u-margintop-30"),e(".project-nav",e(".u-text-center.w-container",[e('a[id="creators-link"][class="dashboard-nav-link '+(Ge.hashMatch("#creators")?"selected":"")+'"] [href="#creators"]',"Find filmmakers"),e('a[id="friends-link"][class="dashboard-nav-link '+(Ge.hashMatch("#friends")||Ge.hashMatch("")?"selected":"")+'"] [href="#friends"]',"Find friends"),e('a[id="follows-link"][class="dashboard-nav-link '+(Ge.hashMatch("#follows")?"selected":"")+'"] [href="#follows"]',["Following",e.trust("&nbsp;"),e("span.w-hidden-small.w-hidden-tiny.badge",t.user.follows_count)]),e('a[id="followers-link"][class="dashboard-nav-link '+(Ge.hashMatch("#followers")?"selected":"")+'"] [href="#followers"]',["Followers",e.trust("&nbsp;"),e("span.w-hidden-small.w-hidden-tiny.badge",t.user.followers_count)])])),t.displayTabContent()])}},Gi=o.partial(Ge.i18nScope,"projects.contributions"),$i={controller:function(e){var t=co.getUserRecommendedProjects(),r=!o.isEmpty(e.contribution.slip_url),n=function(t,o){o||(CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_finished",lbl:r?"slip":"creditcard",val:e.contribution.value,extraData:{contribution_id:e.contribution.contribution_id}}),CatarseAnalytics.checkout(""+e.contribution.contribution_id,"["+e.contribution.project.permalink+"] "+e.contribution.reward.minimum_value+" ["+(r?"slip":"creditcard")+"]",""+e.contribution.reward.reward_id,""+e.contribution.project.category,""+e.contribution.value,""+e.contribution.value*e.contribution.project.service_fee))};return{setEvents:n,displayShareBox:Ge.toggleProp(!1,!0),isSlip:r,recommendedProjects:t}},view:function(o,r){return e("#thank-you",{config:o.setEvents},[e(".page-header.u-marginbottom-30",e(".w-container",e(".w-row",e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-20.u-text-center",e("img.big.thumb.u-round[src='"+r.contribution.project.user_thumb+"']")),e("#thank-you.u-text-center",o.isSlip?[e("#slip-thank-you.fontsize-largest.text-success.u-marginbottom-20",t.t("thank_you_slip.thank_you",Gi())),e(".fontsize-base.u-marginbottom-40",e.trust(t.t("thank_you_slip.thank_you_text_html",Gi({email:r.contribution.contribution_email,link_email:"/en/users/"+Ge.getUser().user_id+"/edit#about_me"}))))]:[e("#creditcard-thank-you.fontsize-larger.text-success.u-marginbottom-20",t.t("thank_you.thank_you",Gi())),e(".fontsize-base.u-marginbottom-40",e.trust(t.t("thank_you.thank_you_text_html",Gi({total:r.contribution.project.total_contributions,email:r.contribution.contribution_email,link2:"/en/users/"+Ge.getUser().user_id+"/edit#contributions",link_email:"/en/users/"+Ge.getUser().user_id+"/edit#about_me"})))),e(".fontsize-base.fontweight-semibold.u-marginbottom-20","Share with your friends and help this project hit the goal!")]),o.isSlip?"":e(".w-row",[e(".w-hidden-small.w-hidden-tiny",[e(".w-sub-col.w-col.w-col-4",e.component(ar,{url:"https://www.myjvn.com/"+r.contribution.project.permalink+"?ref=ctrse_thankyou&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share",big:!0})),e(".w-sub-col.w-col.w-col-4",e.component(ar,{messenger:!0,big:!0,url:"http://www.myjvn.com/"+r.contribution.project.permalink+"?ref=ctrse_thankyou&utm_source=facebook.com&utm_medium=messenger&utm_campaign=thanks_share"})),e(".w-col.w-col-4",e('a.btn.btn-large.btn-tweet.u-marginbottom-20[href="https://twitter.com/intent/tweet?text=Acabei%20de%20apoiar%20o%20projeto%20'+r.contribution.project.name+"%20https://www.myjvn.com/"+r.contribution.project.permalink+'%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share"][target="_blank"]',[e("span.fa.fa-twitter")," Twitter"]))]),e(".w-hidden-main.w-hidden-medium",[e(".u-marginbottom-30.u-text-center-small-only",e("button.btn.btn-large.btn-terciary.u-marginbottom-40",{onclick:o.displayShareBox.toggle},"Share")),o.displayShareBox()?e(Xr,{project:e.prop({permalink:r.contribution.project.permalink,name:r.contribution.project.name}),displayShareBox:o.displayShareBox}):""])])])))),e(".section.u-marginbottom-40",e(".w-container",o.isSlip?e(".w-row",e(".w-col.w-col-8.w-col-offset-2",e("iframe.slip",{src:r.contribution.slip_url,width:"100%",height:"905px",frameborder:"0",style:"overflow: hidden;"}))):[e(".fontsize-large.fontweight-semibold.u-marginbottom-30.u-text-center",t.t("thank_you.project_recommendations",Gi())),e.component(So,{collection:o.recommendedProjects,ref:"ctrse_thankyou_r"})]))])}},Qi=o.partial(Ge.i18nScope,"users.edit.email_confirmation"),Zi={controller:function(t){var o=Ge.getUserID(),r=co.fetchUser(o),n=e.prop(!1),i=e.prop(!1);return{confirmedEmail:n,hideAlert:i,user:r,checkEmail:function(){return e.request({method:"PUT",url:"/users/"+o+".json",data:{user:{confirmed_email_at:!0}},config:Ge.setCsrfToken}).then(function(t){n(!0),window.setTimeout(function(){i(!0),e.redraw(!0),console.log(t)},4e3)})}}},view:function(n,i){var a=n.user();if(a){var l=r().isBefore(r(a.created_at).add(2,"days"));return!a||l||a.email_active||n.hideAlert()?e("div"):e(".card-alert.section.u-text-center",{style:i.menuTransparency?{"padding-top":"100px"}:{}},[e(".w-container",n.confirmedEmail()?[e(".fontsize-large.fontweight-semibold",t.t("confirmed_title",Qi())),e(".fontsize-large.fontweight-semibold.u-marginbottom-20",t.t("confirmed_sub",Qi()))]:[e(".fontsize-large.fontweight-semibold",o.isNull(a.name)?"Hi":t.t("hello",Qi({name:a.name}))),e(".fontsize-large.fontweight-semibold.u-marginbottom-20",t.t("hello_sub",Qi())),e(".fontsize-base.u-marginbottom-10",t.t("hello_email",Qi({email:a.email}))),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-3",[e('a.btn.btn-medium.btn-terciary.w-button[href="javacript:void(0);"]',{onclick:n.checkEmail},"Yes!")]),e(".w-col.w-col-3",[e('a.btn.btn-medium.w-button[href="/users/'+a.id+'/edit#about_me"]',"Edit Email")]),e(".w-col.w-col-3")])])])}return e("div")}},ea={controller:function(e){return{user:co.fetchUser(e.user_id)}},view:function(t,o){return e(Nn,{user:t.user(),userId:o.user_id,useFloatBtn:!0,hideDisableAcc:!0,hideCoverImg:!0,hidePasswordChange:!0})}},ta={root:{AdminUsers:pt,AdminContributions:At,Flex:To,Insights:ur,Posts:pr,Jobs:wr,LiveStatistics:br,ProjectsContributionReport:zr,ProjectsDashboard:Cr,ProjectsExplore:Dr,ProjectsHome:Jr,ProjectsShow:Cn,UsersShow:Rn,UsersEdit:Bn,ProjectsPayment:Ci,ProjectsReward:Si,ThankYou:$i,Publish:Ti,Start:Ei,Team:Ni,UsersBalance:Ui,Menu:Or,Footer:Wr,FollowFoundFriends:Ki,CheckEmail:Zi,projectEditUserAbout:ea}};return ta}(m,I18n,_,moment,$,postgrest,CatarseAnalytics,replaceDiacritics,Chart);